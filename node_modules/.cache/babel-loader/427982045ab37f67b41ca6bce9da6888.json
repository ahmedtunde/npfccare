{"ast":null,"code":"import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{Fragment,useState,useEffect,useRef,useCallback}from\"react\";import jwt_decode from\"jwt-decode\";import{Route,Switch,useHistory,useRouteMatch}from\"react-router-dom\";import face from\"../assets/img/placeholder-img.png\";import{getAccessToken,getAdminName}from\"../utils/localStorageService\";import{handleHideModal,handleOpenModal,useAuth}from\"./utilities\";import errorHandler,{validateToken}from\"../utils/errorHandler\";import{ReactComponent as SearchIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/search.svg\";import notify from\"../utils/notification\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/spinner.svg\";import{ReactComponent as ExportIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/export.svg\";import{ReactComponent as NothingFoundIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/nothing-found.svg\";import CustomerAuditHistory from\"../components/customerAuditHistory\";import LoanAuditHistory from\"./loanAuditHistory\";var AuditLogs=function AuditLogs(){var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path;var history=useHistory();var auth=useAuth();var adminName=getAdminName();// useCallback ensures that handle error function isn't recreated on every render\nvar handleError=useCallback(function(errorObject,notify,cb){return errorHandler(auth)(errorObject,notify,cb);},[auth]);var _useState=useState(\"all\"),_useState2=_slicedToArray(_useState,2),showSection=_useState2[0],setShowSection=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),selectedCustomers=_useState6[0],setSelectedCustomers=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDataExporting=_useState8[0],setDataExporting=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),displayedCustomers=_useState10[0],setDisplayedCustomers=_useState10[1];var isSearching=useRef(false);var token=getAccessToken();useEffect(function(){validateToken(token,history,jwt_decode,auth,notify);},[auth,history,token]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Audit Logs\"}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"a\",{className:showSection===\"all\"?\"active\":\"\",onClick:function onClick(e){return setShowSection(\"all\");},children:\"CBA Logs\"}),/*#__PURE__*/_jsx(\"a\",{className:showSection===\"loan\"?\"active\":\"\",onClick:function onClick(e){return setShowSection(\"loan\");},children:\"Loan Logs\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"small-admin-details\",children:[/*#__PURE__*/_jsx(\"img\",{src:face,alt:\"\"}),adminName||\"NPF Admin\",/*#__PURE__*/_jsx(\"i\",{className:\"arrow down\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"some-container\",children:showSection===\"all\"&&/*#__PURE__*/_jsxs(\"form\",{className:\"search-div\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"search\",children:/*#__PURE__*/_jsx(SearchIcon,{})}),/*#__PURE__*/_jsx(\"input\",{type:\"search\",className:\"form-control\",name:\"search\",id:\"search\",\"aria-label\":\"Search by email\",placeholder:\"Search by email\"//   value={searchEmail}\n//   onChange={(e) => setSearchEmail(e.target.value)}\n})]})})]})]}),!isLoading&&showSection===\"all\"&&/*#__PURE__*/_jsx(CustomerAuditHistory,{}),!isLoading&&showSection===\"loan\"&&/*#__PURE__*/_jsx(LoanAuditHistory,{})]});};export default AuditLogs;","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/auditLogs.js"],"names":["React","Fragment","useState","useEffect","useRef","useCallback","jwt_decode","Route","Switch","useHistory","useRouteMatch","face","getAccessToken","getAdminName","handleHideModal","handleOpenModal","useAuth","errorHandler","validateToken","notify","CustomerAuditHistory","LoanAuditHistory","AuditLogs","path","history","auth","adminName","handleError","errorObject","cb","showSection","setShowSection","isLoading","setLoading","selectedCustomers","setSelectedCustomers","isDataExporting","setDataExporting","displayedCustomers","setDisplayedCustomers","isSearching","token","e"],"mappings":"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","sourcesContent":["import React, {\n  Fragment,\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n} from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport { Route, Switch, useHistory, useRouteMatch } from \"react-router-dom\";\nimport face from \"../assets/img/placeholder-img.png\";\nimport { getAccessToken, getAdminName } from \"../utils/localStorageService\";\nimport { handleHideModal, handleOpenModal, useAuth } from \"./utilities\";\nimport errorHandler, { validateToken } from \"../utils/errorHandler\";\nimport { ReactComponent as SearchIcon } from \"../assets/icons/search.svg\";\nimport notify from \"../utils/notification\";\nimport { ReactComponent as SpinnerIcon } from \"../assets/icons/spinner.svg\";\nimport { ReactComponent as ExportIcon } from \"../assets/icons/export.svg\";\nimport { ReactComponent as NothingFoundIcon } from \"../assets/icons/nothing-found.svg\";\nimport CustomerAuditHistory from \"../components/customerAuditHistory\";\nimport LoanAuditHistory from \"./loanAuditHistory\";\n\nconst AuditLogs = () => {\n  const { path } = useRouteMatch();\n  const history = useHistory();\n  const auth = useAuth();\n  const adminName = getAdminName();\n  // useCallback ensures that handle error function isn't recreated on every render\n  const handleError = useCallback(\n    (errorObject, notify, cb) => errorHandler(auth)(errorObject, notify, cb),\n    [auth]\n  );\n\n  const [showSection, setShowSection] = useState(\"all\");\n  const [isLoading, setLoading] = useState(false);\n  const [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [isDataExporting, setDataExporting] = useState(false);\n  const [displayedCustomers, setDisplayedCustomers] = useState([]);\n  const isSearching = useRef(false);\n  const token = getAccessToken();\n\n  useEffect(() => {\n    validateToken(token, history, jwt_decode, auth, notify);\n  }, [auth, history, token]);\n  return (\n    <>\n      <header>\n        <div>\n          <h1>Audit Logs</h1>\n\n          <nav>\n            {/* eslint-disable-next-line */}\n            <a\n              className={showSection === \"all\" ? \"active\" : \"\"}\n              onClick={(e) => setShowSection(\"all\")}\n            >\n              CBA Logs\n            </a>\n            {/* eslint-disable-next-line */}\n            <a\n              className={showSection === \"loan\" ? \"active\" : \"\"}\n              onClick={(e) => setShowSection(\"loan\")}\n            >\n              Loan Logs\n            </a>\n          </nav>\n        </div>\n        <div>\n          <div className=\"small-admin-details\">\n            <img src={face} alt=\"\" />\n            {adminName || `NPF Admin`}\n            <i className=\"arrow down\"></i>\n          </div>\n          <div className=\"some-container\">\n            {showSection === \"all\" && (\n              <form className=\"search-div\">\n                <label htmlFor=\"search\">\n                  <SearchIcon />\n                </label>\n                <input\n                  type=\"search\"\n                  className=\"form-control\"\n                  name=\"search\"\n                  id=\"search\"\n                  aria-label=\"Search by email\"\n                  placeholder=\"Search by email\"\n                  //   value={searchEmail}\n                  //   onChange={(e) => setSearchEmail(e.target.value)}\n                />\n              </form>\n            )}\n          </div>\n        </div>\n      </header>\n      {!isLoading && showSection === \"all\" && <CustomerAuditHistory />}\n      {!isLoading && showSection === \"loan\" && <LoanAuditHistory />}\n    </>\n  );\n};\n\nexport default AuditLogs;\n"]},"metadata":{},"sourceType":"module"}