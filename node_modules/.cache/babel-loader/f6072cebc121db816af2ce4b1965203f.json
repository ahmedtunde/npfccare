{"ast":null,"code":"import _regeneratorRuntime from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{Fragment,useEffect,useState}from\"react\";import moment from\"moment\";import{ReactComponent as NothingFoundIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/nothing-found.svg\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/spinner.svg\";import{ReactComponent as ArrowLeftShortCircleFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/arrow-left-short-circle-fill.svg\";import{ReactComponent as ArrowRightShort}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/arrow-right-short.svg\";import notify from\"../../../utils/notification\";import errorHandler from\"../../../utils/errorHandler\";import{useAuth}from\"../../utilities\";import ReactPaginate from\"react-paginate\";import{formatAmount}from\"../../utilities\";import face from\"../../../assets/img/placeholder-img.png\";import{useHistory}from\"react-router\";import{loanRepaymentSchedule}from\"../../../services/loanService\";var LoanSchedule=function LoanSchedule(props){var history=useHistory();var _useState=useState(Array(5).fill(\"a\").map(function(v,idx){return{date:new Date(),deferDate:new Date(),totalDue:\"\",totalCap:\"\",principal:\"\",interest:\"\",charge:\"\",tax:\"\",totalPymt:\"\",outstanding:\"\"};})),_useState2=_slicedToArray(_useState,2),scheduleEntries=_useState2[0],setScheduleEntries=_useState2[1];var auth=useAuth();var _useState3=useState(5),_useState4=_slicedToArray(_useState3,2),itemsPerPage=_useState4[0],setItemsPerPage=_useState4[1];var handleError=errorHandler(auth);var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setLoading=_useState8[1];var userId=props.userId;useEffect(function(){handleGetCustomerBillings();// eslint-disable-next-line react-hooks/exhaustive-deps\nconsole.log(props);},[]);var handleGetCustomerBillings=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _result$data,_result$data$result,arrangementID,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;arrangementID=\"AA193027MFH4\";_context.next=5;return loanRepaymentSchedule(arrangementID);case 5:result=_context.sent;setLoading(false);console.log(result);if(!result.error){_context.next=10;break;}return _context.abrupt(\"return\",notify(result.message,\"error\"));case 10:if(result.data.status){_context.next=12;break;}return _context.abrupt(\"return\",notify(result.data.message,\"error\"));case 12:setScheduleEntries((_result$data=result.data)===null||_result$data===void 0?void 0:(_result$data$result=_result$data.result)===null||_result$data$result===void 0?void 0:_result$data$result.repayments);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);handleError(_context.t0,notify,function(){return setLoading(false);});case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,15]]);}));return function handleGetCustomerBillings(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return history.goBack();},className:\"btn btn-primary back-btn\",children:/*#__PURE__*/_jsx(ArrowRightShort,{})}),\"Customer Repayment Schedule & History\"]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"small-admin-details\",children:[/*#__PURE__*/_jsx(\"img\",{src:face,alt:\"\"}),\"NPF Admin\",/*#__PURE__*/_jsx(\"i\",{className:\"arrow down\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"some-container\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"customers-page\",children:[(isLoading||scheduleEntries&&scheduleEntries.length===0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"searching-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"svg-holder \"+(!isLoading?\"not-loading\":\"\"),children:isLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"}):/*#__PURE__*/_jsx(NothingFoundIcon,{})}),!isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"NOTHING FOUND!\"})]}),!isLoading&&scheduleEntries.length!==0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"color-dark-text-blue\",children:[\"Entries per page:\",\" \",/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{display:\"inline-block\"},children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",onChange:function onChange(e){setItemsPerPage(e.target.value);setCurrentPage(1);},value:itemsPerPage,children:[/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:20,children:\"20\"}),/*#__PURE__*/_jsx(\"option\",{value:50,children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:100,children:\"100\"}),/*#__PURE__*/_jsx(\"option\",{value:150,children:\"150\"}),/*#__PURE__*/_jsx(\"option\",{value:200,children:\"200\"})]})})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-borderless\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"color-dark-text-blue\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Defer Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col-3\",children:\"Total Due\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Total Cap\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Principal\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Interest\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Charge\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col-3\",children:\"Tax\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Total Pymt\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Outstanding\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"}),scheduleEntries&&scheduleEntries.map(function(v,idx){var initialBoundary=(currentPage-1)*itemsPerPage+1;var finalBoundary=currentPage*itemsPerPage;var itemNumber=idx+1;if(itemNumber<initialBoundary||itemNumber>finalBoundary)return null;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"billing-history-card\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"\",children:moment(v.date).format(\"DD/MM/YYYY\")}),/*#__PURE__*/_jsx(\"td\",{className:\"\",children:moment(v.deferDate).format(\"DD/MM/YYYY\")}),/*#__PURE__*/_jsx(\"td\",{className:\"\",children:formatAmount(v.totalDue)}),/*#__PURE__*/_jsx(\"td\",{className:\"\",children:v.totalCap}),/*#__PURE__*/_jsx(\"td\",{className:\"\",children:formatAmount(v.principal)}),/*#__PURE__*/_jsx(\"td\",{className:\"\",children:formatAmount(v.interest)}),/*#__PURE__*/_jsx(\"td\",{className:\"\",children:formatAmount(v.charge)}),/*#__PURE__*/_jsx(\"td\",{className:\"\",children:formatAmount(v.tax)}),/*#__PURE__*/_jsx(\"td\",{className:\"color-sec-green\",children:formatAmount(v.totalPymt)}),/*#__PURE__*/_jsxs(\"td\",{className:\"color-red\",children:[\"-\",formatAmount(v.outstanding)]})]}),idx!==scheduleEntries.length-1&&/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"})]},idx);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"audit-history-footer\",children:/*#__PURE__*/_jsx(ReactPaginate,{pageCount:Math.ceil(scheduleEntries.length/itemsPerPage)||1,marginPagesDisplayed:2,pageRangeDisplayed:3,forcePage:currentPage-1,onPageChange:function onPageChange(selectedItem){return setCurrentPage(selectedItem.selected+1);},containerClassName:\"pagination-btns\",activeLinkClassName:\"active\",pageLinkClassName:\"btn\",previousLabel:/*#__PURE__*/_jsx(ArrowLeftShortCircleFill,{}),previousLinkClassName:\"btn icon\",nextLabel:/*#__PURE__*/_jsx(ArrowLeftShortCircleFill,{style:{transform:\"rotateY(180deg)\"}}),nextLinkClassName:\"btn icon\",disabledClassName:\"disabled\"})})]})]})]});};export default LoanSchedule;","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/loanManagement/customer/loanSchedule.js"],"names":["React","Fragment","useEffect","useState","moment","notify","errorHandler","useAuth","ReactPaginate","formatAmount","face","useHistory","loanRepaymentSchedule","LoanSchedule","props","history","Array","fill","map","v","idx","date","Date","deferDate","totalDue","totalCap","principal","interest","charge","tax","totalPymt","outstanding","scheduleEntries","setScheduleEntries","auth","itemsPerPage","setItemsPerPage","handleError","currentPage","setCurrentPage","isLoading","setLoading","userId","handleGetCustomerBillings","console","log","arrangementID","result","error","message","data","status","repayments","e","goBack","length","display","target","value","initialBoundary","finalBoundary","itemNumber","format","Math","ceil","selectedItem","selected","transform"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport moment from \"moment\";\nimport { ReactComponent as NothingFoundIcon } from \"../../../assets/icons/nothing-found.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../../../assets/icons/spinner.svg\";\nimport { ReactComponent as ArrowLeftShortCircleFill } from \"../../../assets/icons/arrow-left-short-circle-fill.svg\";\nimport { ReactComponent as ArrowRightShort } from \"../../../assets/icons/arrow-right-short.svg\";\nimport notify from \"../../../utils/notification\";\nimport errorHandler from \"../../../utils/errorHandler\";\nimport { useAuth } from \"../../utilities\";\nimport ReactPaginate from \"react-paginate\";\nimport { formatAmount } from \"../../utilities\";\nimport face from \"../../../assets/img/placeholder-img.png\";\nimport { useHistory } from \"react-router\";\nimport { loanRepaymentSchedule } from \"../../../services/loanService\";\n\nconst LoanSchedule = (props) => {\n  const history = useHistory();\n  const [scheduleEntries, setScheduleEntries] = useState(\n    Array(5)\n      .fill(\"a\")\n      .map((v, idx) => ({\n        date: new Date(),\n        deferDate: new Date(),\n        totalDue: \"\",\n        totalCap: \"\",\n        principal: \"\",\n        interest: \"\",\n        charge: \"\",\n        tax: \"\",\n        totalPymt: \"\",\n        outstanding: \"\",\n      }))\n  );\n  const auth = useAuth();\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  const handleError = errorHandler(auth);\n\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const [isLoading, setLoading] = useState(false);\n  const { userId } = props;\n\n  useEffect(() => {\n    handleGetCustomerBillings();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    console.log(props);\n  }, []);\n\n  const handleGetCustomerBillings = async () => {\n    setLoading(true);\n    try {\n      const arrangementID = `AA193027MFH4`;\n      const result = await loanRepaymentSchedule(arrangementID);\n      setLoading(false);\n      console.log(result);\n      if (result.error) return notify(result.message, \"error\");\n      if (!result.data.status) return notify(result.data.message, \"error\");\n      setScheduleEntries(result.data?.result?.repayments);\n    } catch (error) {\n      handleError(error, notify, () => setLoading(false));\n    }\n  };\n\n  return (\n    <>\n      <header>\n        <div>\n          <h1>\n            <button\n              onClick={(e) => history.goBack()}\n              className=\"btn btn-primary back-btn\"\n            >\n              <ArrowRightShort />\n            </button>\n            {\"Customer Repayment Schedule & History\"}\n          </h1>\n        </div>\n        <div>\n          <div className=\"small-admin-details\">\n            <img src={face} alt=\"\" />\n            NPF Admin\n            <i className=\"arrow down\"></i>\n          </div>\n          <div className=\"some-container\"></div>\n        </div>\n      </header>\n      <main className=\"customers-page\">\n        {(isLoading || (scheduleEntries && scheduleEntries.length === 0)) && (\n          <div className=\"searching-block\">\n            <div className={\"svg-holder \" + (!isLoading ? \"not-loading\" : \"\")}>\n              {isLoading ? (\n                <SpinnerIcon className=\"rotating\" />\n              ) : (\n                <NothingFoundIcon />\n              )}\n            </div>\n            {!isLoading && <p>NOTHING FOUND!</p>}\n          </div>\n        )}\n        {!isLoading && scheduleEntries.length !== 0 && (\n          <>\n            <div className=\"color-dark-text-blue\">\n              Entries per page:{\" \"}\n              <div className=\"form-group\" style={{ display: \"inline-block\" }}>\n                <select\n                  className=\"form-control\"\n                  onChange={(e) => {\n                    setItemsPerPage(e.target.value);\n                    setCurrentPage(1);\n                  }}\n                  value={itemsPerPage}\n                >\n                  <option value={5}>5</option>\n                  <option value={10}>10</option>\n                  <option value={20}>20</option>\n                  <option value={50}>50</option>\n                  <option value={100}>100</option>\n                  <option value={150}>150</option>\n                  <option value={200}>200</option>\n                </select>\n              </div>\n            </div>\n            <table className=\"table table-borderless\">\n              <thead className=\"color-dark-text-blue\">\n                <tr>\n                  {/* <th scope=\"col\">\n                    <input type=\"checkbox\" />\n                  </th> */}\n                  <th scope=\"col\">Date</th>\n                  <th scope=\"col\">Defer Date</th>\n                  <th scope=\"col-3\">Total Due</th>\n                  <th scope=\"col\">Total Cap</th>\n                  <th scope=\"col\">Principal</th>\n                  <th scope=\"col\">Interest</th>\n                  <th scope=\"col\">Charge</th>\n                  <th scope=\"col-3\">Tax</th>\n                  <th scope=\"col\">Total Pymt</th>\n                  <th scope=\"col\">Outstanding</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr className=\"spacer\" />\n                {scheduleEntries &&\n                  scheduleEntries.map((v, idx) => {\n                    const initialBoundary =\n                      (currentPage - 1) * itemsPerPage + 1;\n                    const finalBoundary = currentPage * itemsPerPage;\n                    const itemNumber = idx + 1;\n                    if (\n                      itemNumber < initialBoundary ||\n                      itemNumber > finalBoundary\n                    )\n                      return null;\n                    return (\n                      <Fragment key={idx}>\n                        <tr className=\"billing-history-card\">\n                          {/* <th scope=\"row\">\n                          <input type=\"checkbox\" />\n                        </th> */}\n                          <td className=\"\">\n                            {moment(v.date).format(\"DD/MM/YYYY\")}\n                          </td>\n                          <td className=\"\">\n                            {moment(v.deferDate).format(\"DD/MM/YYYY\")}\n                          </td>\n                          <td className=\"\">{formatAmount(v.totalDue)}</td>\n                          <td className=\"\">{v.totalCap}</td>\n                          <td className=\"\">{formatAmount(v.principal)}</td>\n                          <td className=\"\">{formatAmount(v.interest)}</td>\n                          <td className=\"\">{formatAmount(v.charge)}</td>\n                          <td className=\"\">{formatAmount(v.tax)}</td>\n                          <td className=\"color-sec-green\">\n                            {formatAmount(v.totalPymt)}\n                          </td>\n                          <td className=\"color-red\">\n                            -{formatAmount(v.outstanding)}\n                          </td>\n                        </tr>\n                        {idx !== scheduleEntries.length - 1 && (\n                          <tr className=\"spacer\" />\n                        )}\n                      </Fragment>\n                    );\n                  })}\n              </tbody>\n            </table>\n            <div className=\"audit-history-footer\">\n              <ReactPaginate\n                pageCount={\n                  Math.ceil(scheduleEntries.length / itemsPerPage) || 1\n                }\n                marginPagesDisplayed={2}\n                pageRangeDisplayed={3}\n                forcePage={currentPage - 1}\n                onPageChange={(selectedItem) =>\n                  setCurrentPage(selectedItem.selected + 1)\n                }\n                containerClassName=\"pagination-btns\"\n                activeLinkClassName=\"active\"\n                pageLinkClassName=\"btn\"\n                previousLabel={<ArrowLeftShortCircleFill />}\n                previousLinkClassName=\"btn icon\"\n                nextLabel={\n                  <ArrowLeftShortCircleFill\n                    style={{ transform: \"rotateY(180deg)\" }}\n                  />\n                }\n                nextLinkClassName=\"btn icon\"\n                disabledClassName=\"disabled\"\n              />\n            </div>\n          </>\n        )}\n      </main>\n    </>\n  );\n};\n\nexport default LoanSchedule;\n"]},"metadata":{},"sourceType":"module"}