{"ast":null,"code":"import _regeneratorRuntime from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import sideImg from\"../assets/img/side-img.png\";import logo from\"../assets/img/logo-main.png\";import{ReactComponent as ArrowRightCircle}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/arrow-right-circle.svg\";import{ReactComponent as EyeFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/eye-fill.svg\";import{ReactComponent as EyeSlashFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/eye-slash-fill.svg\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/spinner.svg\";import{Link,useHistory,useLocation}from\"react-router-dom\";import{useAuth}from\"./utilities\";import notify from\"../utils/notification\";import{signInAdmin}from\"../services/authService\";var Login=function Login(props){var auth=useAuth();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var _useState3=useState({email:false,password:false}),_useState4=_slicedToArray(_useState3,2),isInputFocused=_useState4[0],setInputFocused=_useState4[1];var _useState5=useState({email:\"\",password:\"\"}),_useState6=_slicedToArray(_useState5,2),userInputs=_useState6[0],setInputs=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),loginErrorMessage=_useState10[0],setLoginErrorMessage=_useState10[1];var history=useHistory();var location=useLocation();useEffect(function(){//remove modal reminants\nvar body=document.querySelector(\"body\");body.classList.remove(\"modal-open\");body.style.paddingRight=\"\";var modalBackdrop=document.querySelector(\".modal-backdrop\");if(modalBackdrop)modalBackdrop.remove();},[]);useEffect(function(){// if (auth.user) history.push(\"/pages/customers\"); //redirect if there's token\nif(auth.user&&auth.user.includes(\"LOAN OFFICER\")){history.push(\"/pages/loanMan\");return;}else if(auth.user&&auth.user.includes(\"CSO\")){history.push(\"/pages/customers\");return;}else if(auth.user&&auth.user.includes(\"AUDIT\")){history.push(\"/pages/customers\");return;}else if(auth.user&&auth.user.includes(\"SUPER ADMIN\")){history.push(\"/pages/superAdmin\");return;}},[auth.user,history]);console.log(auth);var handleShowPassword=function handleShowPassword(e){return setShowPassword(function(prev){return!prev;});};var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setLoginErrorMessage(\"\");setInputs(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var handleInputFocused=function handleInputFocused(e){var name=e.target.name;setInputFocused(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,true));});};var handleInputBlur=function handleInputBlur(e){var name=e.target.name;setInputFocused(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,false));});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _ref2,from,result,_error$toLowerCase,_error$toLowerCase$ca,_error$toLowerCase$ca2,_error$message,_error$message$toLowe,_error$message$toLowe2,_error$message$toLowe3,_error$message2,_error$message2$toLow,_error$message2$toLow2,_error$message2$toLow3,msg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);setLoginErrorMessage(\"\");_ref2=location.state||{from:{pathname:\"/pages\"}},from=_ref2.from;_context.prev=4;_context.next=7;return signInAdmin(userInputs.email,userInputs.password);case 7:result=_context.sent;setLoading(false);if(result.token){_context.next=11;break;}return _context.abrupt(\"return\",setLoginErrorMessage(\"Incorrect email or password.\"));case 11:notify(result.message,\"success\");auth.signin(function(){if(auth.user&&auth.user.includes(\"LOAN OFFICER\")){history.push(\"/pages/loanMan\");return;}else if(auth.user&&auth.user.includes(\"CSO\")){history.push(\"/pages/customers\");return;}else if(auth.user&&auth.user.includes(\"AUDIT\")){history.push(\"/pages/customers\");return;}else if(auth.user&&auth.user.includes(\"SUPER ADMIN\")){history.push(\"/pages/superAdmin\");return;}else{history.replace(from);return;}});_context.next=20;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](4);setLoading(false);msg=(_context.t0===null||_context.t0===void 0?void 0:(_error$toLowerCase=_context.t0.toLowerCase)===null||_error$toLowerCase===void 0?void 0:(_error$toLowerCase$ca=(_error$toLowerCase$ca2=_error$toLowerCase.call(_context.t0)).includes)===null||_error$toLowerCase$ca===void 0?void 0:_error$toLowerCase$ca.call(_error$toLowerCase$ca2,\"unauth\"))?\"Incorrect email or password.\":(_context.t0===null||_context.t0===void 0?void 0:(_error$message=_context.t0.message)===null||_error$message===void 0?void 0:(_error$message$toLowe=_error$message.toLowerCase)===null||_error$message$toLowe===void 0?void 0:(_error$message$toLowe2=(_error$message$toLowe3=_error$message$toLowe.call(_error$message)).includes)===null||_error$message$toLowe2===void 0?void 0:_error$message$toLowe2.call(_error$message$toLowe3,\"network\"))?\"Network Error\":(_context.t0===null||_context.t0===void 0?void 0:(_error$message2=_context.t0.message)===null||_error$message2===void 0?void 0:(_error$message2$toLow=_error$message2.toLowerCase)===null||_error$message2$toLow===void 0?void 0:(_error$message2$toLow2=(_error$message2$toLow3=_error$message2$toLow.call(_error$message2)).includes)===null||_error$message2$toLow2===void 0?void 0:_error$message2$toLow2.call(_error$message2$toLow3,\"timeout\"))?\"Service Timeout, Try Again.\":\"Something went wrong!\";setLoginErrorMessage(msg);case 20:case\"end\":return _context.stop();}}},_callee,null,[[4,15]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"article\",{className:\"animated fadeIn delay-05s\",children:/*#__PURE__*/_jsx(\"section\",{className:\"mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-img-holder\",children:/*#__PURE__*/_jsx(\"img\",{src:sideImg,alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-form-container mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"mx-auto\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-holder\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-weight-bold\",children:\"Admin Back Office\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Kindly provide admin login details to proceed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\".concat(isInputFocused.email?\" input-focused\":\"\"),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",className:\"form-control\",required:true,onBlur:handleInputBlur,onFocus:handleInputFocused,onChange:handleChange,value:userInputs.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\".concat(isInputFocused.password?\" input-focused\":\"\"),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",name:\"password\",id:\"password\",className:\"form-control\",required:true,onBlur:handleInputBlur,onFocus:handleInputFocused,onChange:handleChange,value:userInputs.password}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"show-password-btn\",onClick:handleShowPassword,children:showPassword?/*#__PURE__*/_jsx(EyeSlashFill,{}):/*#__PURE__*/_jsx(EyeFill,{})})]}),loginErrorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"custom invalid-feedback\",children:loginErrorMessage}),/*#__PURE__*/_jsxs(\"button\",{className:\"signin-btn btn\",type:\"submit\",children:[\"Sign In\",/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(isLoading?\"loading\":\"\"),children:isLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"}):/*#__PURE__*/_jsx(ArrowRightCircle,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"overlay-div\"})]})]})})]})})});};export default Login;","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/login.js"],"names":["React","useEffect","useState","sideImg","logo","Link","useHistory","useLocation","useAuth","notify","signInAdmin","Login","props","auth","showPassword","setShowPassword","email","password","isInputFocused","setInputFocused","userInputs","setInputs","isLoading","setLoading","loginErrorMessage","setLoginErrorMessage","history","location","body","document","querySelector","classList","remove","style","paddingRight","modalBackdrop","user","includes","push","console","log","handleShowPassword","e","prev","handleChange","target","name","value","handleInputFocused","handleInputBlur","handleSubmit","preventDefault","state","from","pathname","result","token","message","signin","replace","msg","toLowerCase"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport sideImg from \"../assets/img/side-img.png\";\nimport logo from \"../assets/img/logo-main.png\";\nimport { ReactComponent as ArrowRightCircle } from \"../assets/icons/arrow-right-circle.svg\";\nimport { ReactComponent as EyeFill } from \"../assets/icons/eye-fill.svg\";\nimport { ReactComponent as EyeSlashFill } from \"../assets/icons/eye-slash-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../assets/icons/spinner.svg\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"./utilities\";\nimport notify from \"../utils/notification\";\nimport { signInAdmin } from \"../services/authService\";\nconst Login = (props) => {\n  const auth = useAuth();\n\n  const [showPassword, setShowPassword] = useState(false);\n  const [isInputFocused, setInputFocused] = useState({\n    email: false,\n    password: false,\n  });\n  const [userInputs, setInputs] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [isLoading, setLoading] = useState(false);\n  const [loginErrorMessage, setLoginErrorMessage] = useState(\"\");\n\n  const history = useHistory();\n  const location = useLocation();\n\n  useEffect(() => {\n    //remove modal reminants\n    const body = document.querySelector(\"body\");\n    body.classList.remove(\"modal-open\");\n    body.style.paddingRight = \"\";\n    const modalBackdrop = document.querySelector(\".modal-backdrop\");\n    if (modalBackdrop) modalBackdrop.remove();\n  }, []);\n\n  useEffect(() => {\n    // if (auth.user) history.push(\"/pages/customers\"); //redirect if there's token\n\n    if (auth.user && auth.user.includes(\"LOAN OFFICER\")) {\n      history.push(\"/pages/loanMan\");\n      return;\n    } else if (auth.user && auth.user.includes(\"CSO\")) {\n      history.push(\"/pages/customers\");\n      return;\n    } else if (auth.user && auth.user.includes(\"AUDIT\")) {\n      history.push(\"/pages/customers\");\n      return;\n    } else if (auth.user && auth.user.includes(\"SUPER ADMIN\")) {\n      history.push(\"/pages/superAdmin\");\n      return;\n    }\n  }, [auth.user, history]);\n\n  console.log(auth);\n\n  const handleShowPassword = (e) => setShowPassword((prev) => !prev);\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setLoginErrorMessage(\"\");\n    setInputs((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleInputFocused = (e) => {\n    const { name } = e.target;\n    setInputFocused((prev) => ({\n      ...prev,\n      [name]: true,\n    }));\n  };\n\n  const handleInputBlur = (e) => {\n    const { name } = e.target;\n    setInputFocused((prev) => ({\n      ...prev,\n      [name]: false,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setLoginErrorMessage(\"\");\n    const { from } = location.state || { from: { pathname: \"/pages\" } };\n    try {\n      const result = await signInAdmin(userInputs.email, userInputs.password);\n      setLoading(false);\n\n      if (!result.token)\n        return setLoginErrorMessage(\"Incorrect email or password.\");\n      notify(result.message, \"success\");\n      auth.signin(() => {\n        if (auth.user && auth.user.includes(\"LOAN OFFICER\")) {\n          history.push(\"/pages/loanMan\");\n          return;\n        } else if (auth.user && auth.user.includes(\"CSO\")) {\n          history.push(\"/pages/customers\");\n          return;\n        } else if (auth.user && auth.user.includes(\"AUDIT\")) {\n          history.push(\"/pages/customers\");\n          return;\n        } else if (auth.user && auth.user.includes(\"SUPER ADMIN\")) {\n          history.push(\"/pages/superAdmin\");\n          return;\n        } else {\n          history.replace(from);\n          return;\n        }\n      });\n    } catch (error) {\n      setLoading(false);\n      const msg = error?.toLowerCase?.().includes?.(\"unauth\")\n        ? \"Incorrect email or password.\"\n        : error?.message?.toLowerCase?.().includes?.(\"network\")\n        ? \"Network Error\"\n        : error?.message?.toLowerCase?.().includes?.(\"timeout\")\n        ? \"Service Timeout, Try Again.\"\n        : \"Something went wrong!\";\n      setLoginErrorMessage(msg);\n    }\n  };\n  return (\n    <article className=\"animated fadeIn delay-05s\">\n      <section className=\"mx-auto\">\n        <div className=\"login-wrapper\">\n          <div className=\"left-img-holder\">\n            <img src={sideImg} alt=\"\" />\n          </div>\n          <div className=\"login-form-container mx-auto\">\n            <form className=\"mx-auto\" onSubmit={handleSubmit}>\n              <div className=\"form-header\">\n                <div className=\"logo-holder\">\n                  <img src={logo} alt=\"logo\" />\n                </div>\n                <h3 className=\"font-weight-bold\">Admin Back Office</h3>\n                <p>Kindly provide admin login details to proceed</p>\n              </div>\n              <div\n                className={`form-group${\n                  isInputFocused.email ? \" input-focused\" : \"\"\n                }`}\n              >\n                <label htmlFor=\"email\">Email</label>\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  id=\"email\"\n                  className=\"form-control\"\n                  required\n                  onBlur={handleInputBlur}\n                  onFocus={handleInputFocused}\n                  onChange={handleChange}\n                  value={userInputs.email}\n                />\n              </div>\n\n              <div\n                className={`form-group${\n                  isInputFocused.password ? \" input-focused\" : \"\"\n                }`}\n              >\n                <label htmlFor=\"password\">Password</label>\n                <input\n                  type={showPassword ? \"text\" : \"password\"}\n                  name=\"password\"\n                  id=\"password\"\n                  className=\"form-control\"\n                  required\n                  onBlur={handleInputBlur}\n                  onFocus={handleInputFocused}\n                  onChange={handleChange}\n                  value={userInputs.password}\n                />\n                <button\n                  type=\"button\"\n                  className=\"show-password-btn\"\n                  onClick={handleShowPassword}\n                >\n                  {showPassword ? <EyeSlashFill /> : <EyeFill />}\n                </button>\n              </div>\n              {loginErrorMessage && (\n                <div className=\"custom invalid-feedback\">\n                  {loginErrorMessage}\n                </div>\n              )}\n              <button className=\"signin-btn btn\" type=\"submit\">\n                Sign In\n                <span className={`${isLoading ? \"loading\" : \"\"}`}>\n                  {isLoading ? (\n                    <SpinnerIcon className=\"rotating\" />\n                  ) : (\n                    <ArrowRightCircle />\n                  )}\n                </span>\n                <div className=\"overlay-div\"></div>\n              </button>\n            </form>\n\n            {/* <div className=\"container-fluid other-links\">\n              <div className=\"row\">\n                <div className=\"col\">\n                  <Link to=\"/forgotpassword\">Forgot Password</Link>\n                </div>\n                <div className=\"col\">\n                  <Link to=\"/signup\">Create Account</Link>\n                </div>\n              </div>\n            </div> */}\n          </div>\n        </div>\n      </section>\n    </article>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}