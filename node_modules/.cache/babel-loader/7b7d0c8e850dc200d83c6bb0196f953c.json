{"ast":null,"code":"export default function errorHandler(auth){return function(errorObject,notify){var _errorObject$toLowerC,_errorObject$toLowerC2,_errorObject$toLowerC3,_message$toLowerCase,_message$toLowerCase$,_message$toLowerCase$2,_message$toLowerCase2,_message$toLowerCase3,_message$toLowerCase4,_errorObject$toLowerC4,_errorObject$toLowerC5,_errorObject$toLowerC6;var cb=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};var message=errorObject.message;var msg=(errorObject===null||errorObject===void 0?void 0:(_errorObject$toLowerC=errorObject.toLowerCase)===null||_errorObject$toLowerC===void 0?void 0:(_errorObject$toLowerC2=(_errorObject$toLowerC3=_errorObject$toLowerC.call(errorObject)).includes)===null||_errorObject$toLowerC2===void 0?void 0:_errorObject$toLowerC2.call(_errorObject$toLowerC3,\"unauth\"))?\"Session Expired, please log in.\":(message===null||message===void 0?void 0:(_message$toLowerCase=message.toLowerCase)===null||_message$toLowerCase===void 0?void 0:(_message$toLowerCase$=(_message$toLowerCase$2=_message$toLowerCase.call(message)).includes)===null||_message$toLowerCase$===void 0?void 0:_message$toLowerCase$.call(_message$toLowerCase$2,\"timeout\"))?\"Service Timeout, Please Retry\":(message===null||message===void 0?void 0:(_message$toLowerCase2=message.toLowerCase)===null||_message$toLowerCase2===void 0?void 0:(_message$toLowerCase3=(_message$toLowerCase4=_message$toLowerCase2.call(message)).includes)===null||_message$toLowerCase3===void 0?void 0:_message$toLowerCase3.call(_message$toLowerCase4,\"network\"))?\"Network Error!\":\"Something went wrong!\";console.error(errorObject);cb();notify(msg,\"error\",function(){return console.log(\"complete\");});if(errorObject===null||errorObject===void 0?void 0:(_errorObject$toLowerC4=errorObject.toLowerCase)===null||_errorObject$toLowerC4===void 0?void 0:(_errorObject$toLowerC5=(_errorObject$toLowerC6=_errorObject$toLowerC4.call(errorObject)).includes)===null||_errorObject$toLowerC5===void 0?void 0:_errorObject$toLowerC5.call(_errorObject$toLowerC6,\"unauth\"))auth.signout();};}export function LoanErrorHandler(auth){return function(errorObject,notify){var _errorObject$toLowerC7,_errorObject$toLowerC8,_errorObject$toLowerC9,_errorObject$data,_errorObject$data$toL,_errorObject$data$toL2,_errorObject$data$toL3,_message$toLowerCase5,_message$toLowerCase6,_message$toLowerCase7,_message$toLowerCase8,_message$toLowerCase9,_message$toLowerCase10;var cb=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};var message=errorObject.message;var isTokenExpired=(errorObject===null||errorObject===void 0?void 0:(_errorObject$toLowerC7=errorObject.toLowerCase)===null||_errorObject$toLowerC7===void 0?void 0:(_errorObject$toLowerC8=(_errorObject$toLowerC9=_errorObject$toLowerC7.call(errorObject)).includes)===null||_errorObject$toLowerC8===void 0?void 0:_errorObject$toLowerC8.call(_errorObject$toLowerC9,\"unauth\"))||(errorObject===null||errorObject===void 0?void 0:(_errorObject$data=errorObject.data)===null||_errorObject$data===void 0?void 0:(_errorObject$data$toL=_errorObject$data.toLowerCase)===null||_errorObject$data$toL===void 0?void 0:(_errorObject$data$toL2=(_errorObject$data$toL3=_errorObject$data$toL.call(_errorObject$data)).includes)===null||_errorObject$data$toL2===void 0?void 0:_errorObject$data$toL2.call(_errorObject$data$toL3,\"token\"));var msg=isTokenExpired?\"Session Expired, please log in.\":(message===null||message===void 0?void 0:(_message$toLowerCase5=message.toLowerCase)===null||_message$toLowerCase5===void 0?void 0:(_message$toLowerCase6=(_message$toLowerCase7=_message$toLowerCase5.call(message)).includes)===null||_message$toLowerCase6===void 0?void 0:_message$toLowerCase6.call(_message$toLowerCase7,\"timeout\"))?\"Service Timeout, Please Retry\":(message===null||message===void 0?void 0:(_message$toLowerCase8=message.toLowerCase)===null||_message$toLowerCase8===void 0?void 0:(_message$toLowerCase9=(_message$toLowerCase10=_message$toLowerCase8.call(message)).includes)===null||_message$toLowerCase9===void 0?void 0:_message$toLowerCase9.call(_message$toLowerCase10,\"network\"))?\"Network Error!\":\"Something went wrong!\";console.error(errorObject);cb();notify(msg,\"error\",function(){return console.log(\"complete\");});if(isTokenExpired)auth.signout();};}export function validateToken(token,history,jwt_decode,auth,notify){if(token&&token!==\"\"){var decodedToken=jwt_decode(token);var currentDate=new Date();if(decodedToken.exp*1000<currentDate.getTime()){notify(\"Session expired\",\"error\");history.push(\"/login\");auth.signout();return;}}else{history.push(\"/login\");}}","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/utils/errorHandler.js"],"names":["errorHandler","auth","errorObject","notify","cb","message","msg","toLowerCase","includes","console","error","log","signout","LoanErrorHandler","isTokenExpired","data","validateToken","token","history","jwt_decode","decodedToken","currentDate","Date","exp","getTime","push"],"mappings":"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","sourcesContent":["export default function errorHandler(auth) {\n  return (errorObject, notify, cb = () => {}) => {\n    const { message } = errorObject;\n    const msg = errorObject?.toLowerCase?.().includes?.(\"unauth\")\n      ? \"Session Expired, please log in.\"\n      : message?.toLowerCase?.().includes?.(\"timeout\")\n      ? \"Service Timeout, Please Retry\"\n      : message?.toLowerCase?.().includes?.(\"network\")\n      ? \"Network Error!\"\n      : \"Something went wrong!\";\n\n    console.error(errorObject);\n    cb();\n    notify(msg, \"error\", () => console.log(\"complete\"));\n    if (errorObject?.toLowerCase?.().includes?.(\"unauth\")) auth.signout();\n  };\n}\n\nexport function LoanErrorHandler(auth) {\n  return (errorObject, notify, cb = () => {}) => {\n    const { message } = errorObject;\n    const isTokenExpired =\n      errorObject?.toLowerCase?.().includes?.(\"unauth\") ||\n      errorObject?.data?.toLowerCase?.().includes?.(\"token\");\n    const msg = isTokenExpired\n      ? \"Session Expired, please log in.\"\n      : message?.toLowerCase?.().includes?.(\"timeout\")\n      ? \"Service Timeout, Please Retry\"\n      : message?.toLowerCase?.().includes?.(\"network\")\n      ? \"Network Error!\"\n      : \"Something went wrong!\";\n\n    console.error(errorObject);\n    cb();\n    notify(msg, \"error\", () => console.log(\"complete\"));\n    if (isTokenExpired) auth.signout();\n  };\n}\n\nexport function validateToken(token, history, jwt_decode, auth, notify) {\n  if (token && token !== \"\") {\n    const decodedToken = jwt_decode(token);\n    let currentDate = new Date();\n\n    if (decodedToken.exp * 1000 < currentDate.getTime()) {\n      notify(\"Session expired\", \"error\");\n      history.push(\"/login\");\n      auth.signout();\n      return;\n    }\n  } else {\n    history.push(\"/login\");\n  }\n}\n"]},"metadata":{},"sourceType":"module"}