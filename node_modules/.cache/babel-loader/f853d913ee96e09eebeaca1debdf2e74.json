{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/xerde2/Downloads/npf-admin-web/src/components/failedBillings.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { useHistory } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport face from \"../assets/img/placeholder-img.png\";\nimport placeholderImg from \"../assets/img/placeholder-img.png\";\nimport { ReactComponent as ArrowLeftShortCircleFill } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/arrow-left-short-circle-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/spinner.svg\";\nimport { ReactComponent as ExportIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/export.svg\";\nimport { ReactComponent as NothingFoundIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/nothing-found.svg\";\nimport { getBillingStatus, getExportTransactionData, getFailedBillings } from \"../services/customerService\";\nimport DatePicker from \"react-datepicker\";\nimport errorHandler, { validateToken } from \"../utils/errorHandler\";\nimport notify from \"../utils/notification\";\nimport { handleOpenModal, handleHideModal, useAuth } from \"./utilities\";\nimport ReactPaginate from \"react-paginate\";\nimport numeral from \"numeral\";\nimport BillingStatusModal from \"./billingStatusModal\";\nimport Modal from \"./modal\";\nimport { getAccessToken } from \"../utils/localStorageService\";\n\nconst FailedBillings = props => {\n  _s();\n\n  const auth = useAuth(); // useCallback ensures that handle error function isn't recreated on every render\n\n  const handleError = useCallback((errorObject, notify, cb) => errorHandler(auth)(errorObject, notify, cb), [auth]);\n  const [billingEntries, setBillingEntries] = useState(() => Array(0).fill(\"\").map((v, idx) => ({\n    user: 54,\n    amountDue: \"100.00\",\n    rrr: \"\",\n    status: \"INCOMPLETE\",\n    date: \"2021-04-21T09:22:39.830Z\",\n    responseObject: null,\n    description: \"\",\n    funds_deduction: \"\",\n    CustomerUser: {\n      locked: false,\n      CustomerInfos: [{\n        id: 54,\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        phone: \"\"\n      }]\n    }\n  })));\n  const [billingStatus, setBillingStatus] = useState({\n    rrr: \"\",\n    amountDue: 0,\n    chargeFee: 0,\n    rrrAmount: 0,\n    payerEmail: \"\",\n    payerName: \"\",\n    payerPhone: \"\",\n    description: \"\",\n    currency: \"\",\n    type: \"\",\n    acceptPartPayment: false,\n    message: \"\"\n  });\n  const [isStatusFetching, setStatusFetching] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isLoading, setLoading] = useState(false);\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  const [isDataExporting, setDataExporting] = useState(false);\n  const [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [values, setValues] = useState({\n    search: \"\",\n    start_date: \"\",\n    end_date: \"\"\n  });\n  const token = getAccessToken();\n  const history = useHistory();\n  useEffect(() => {\n    validateToken(token, history, jwt_decode, auth, notify);\n  }, [auth, history, token]); // useCallback ensures that handle error function isn't recreated on every render\n\n  const fetchFailedBillings = useCallback(async (method, param) => {\n    setLoading(true);\n\n    try {\n      var _result$result;\n\n      const result = await getFailedBillings();\n      setLoading(false);\n      if (result.error) return notify(result.message, \"error\");\n      const tempBillingEntry = result === null || result === void 0 ? void 0 : (_result$result = result.result) === null || _result$result === void 0 ? void 0 : _result$result.filter(_ref => {\n        let {\n          user\n        } = _ref;\n        return user !== null;\n      });\n      setBillingEntries(tempBillingEntry !== null && tempBillingEntry !== void 0 ? tempBillingEntry : []);\n    } catch (error) {\n      handleError(error, notify, () => setLoading(false));\n    }\n  }, [handleError]);\n  useEffect(() => {\n    fetchFailedBillings();\n  }, [fetchFailedBillings]);\n\n  const handleShowBillingStatus = async e => {\n    const element = e.target;\n    if (!element.classList.contains(\"action-btn\")) return;\n    const rrr = element.dataset.rrr;\n\n    try {\n      setStatusFetching(rrr);\n      const result = await getBillingStatus(rrr);\n      setStatusFetching(\"\");\n      if (result.error) return notify(result.message, \"error\");\n      setBillingStatus({ ...result.result,\n        message: result.message\n      });\n      handleOpenModal(\"#billingStatusModal\");\n    } catch (error) {\n      handleError(error, notify, () => setStatusFetching(\"\"));\n    }\n  };\n\n  const handleExportData = async () => {\n    setDataExporting(true);\n    handleHideModal(\"#exportCustomersDataModal\");\n\n    try {\n      const customer_ids = selectedCustomers.includes(\"all\") ? [] : selectedCustomers;\n      const start_date = values.start_date ? values.start_date.toISOString() : \"\";\n      const end_date = values.end_date ? values.end_date.toISOString() : \"\";\n      const requestTime = moment().format(\"DD-MM-YY\"); // fetch result\n\n      const result = await getExportTransactionData({\n        customer_ids,\n        start_date,\n        end_date\n      });\n      setDataExporting(false); // handle download\n\n      const url = window.URL.createObjectURL(result);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.setAttribute(\"download\", `Transactions ${requestTime}.xlsx`); //or any other extension\n\n      document.body.appendChild(link);\n      link.click();\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n        setValues(prev => ({ ...prev,\n          start_date: null,\n          end_date: null\n        }));\n      }, 500);\n    } catch (error) {\n      handleError(error, notify, () => setDataExporting(false));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Failed Billing History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"small-admin-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: face,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), \"NPF Admin\", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"arrow down\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"some-container\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => handleOpenModal(\"#exportCustomersDataModal\"),\n            id: \"exportCustomersData\",\n            className: `btn export-data-btn d-block ${isDataExporting ? \"loading disabled\" : \"\"}`,\n            children: isDataExporting ? /*#__PURE__*/_jsxDEV(SpinnerIcon, {\n              className: \"rotating\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(ExportIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), \" Export Data\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"customers-page\",\n      children: [(isLoading || billingEntries.length === 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"searching-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"svg-holder \" + (!isLoading ? \"not-loading\" : \"\"),\n          children: isLoading ? /*#__PURE__*/_jsxDEV(SpinnerIcon, {\n            className: \"rotating\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(NothingFoundIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this), !isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"NOTHING FOUND!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this), !isLoading && billingEntries.length !== 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"color-dark-text-blue\",\n          children: [\"Customers per page:\", \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            style: {\n              display: \"inline-block\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control\",\n              onChange: e => {\n                setItemsPerPage(e.target.value);\n                setCurrentPage(1);\n              },\n              value: itemsPerPage,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: 5,\n                children: \"5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 10,\n                children: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 20,\n                children: \"20\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 50,\n                children: \"50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 100,\n                children: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 150,\n                children: \"150\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 200,\n                children: \"200\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-borderless table-hover\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"color-dark-text-blue\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Customer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col-3\",\n                children: \"RRR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Amount Due\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Funds Deduction\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                className: \"text-center\",\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            onClick: handleShowBillingStatus,\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"spacer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this), billingEntries.map((entry, idx) => {\n              const initialBoundary = (currentPage - 1) * itemsPerPage + 1;\n              const finalBoundary = currentPage * itemsPerPage;\n              const itemNumber = idx + 1;\n              if (itemNumber < initialBoundary || itemNumber > finalBoundary) return null;\n              if (entry.user === null) return null;\n              const {\n                CustomerUser: {\n                  CustomerInfos: [CustomerInfo]\n                }\n              } = entry;\n              return /*#__PURE__*/_jsxDEV(Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"customer-card\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"major-details\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"customer-img\",\n                        children: /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: entry.photo_location || placeholderImg,\n                          className: \"\",\n                          alt: \"\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 283,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 282,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"name font-weight-bold\",\n                          children: [CustomerInfo === null || CustomerInfo === void 0 ? void 0 : CustomerInfo.firstname, \" \", CustomerInfo === null || CustomerInfo === void 0 ? void 0 : CustomerInfo.lastname]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 290,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"email font-weight-light\",\n                          children: CustomerInfo === null || CustomerInfo === void 0 ? void 0 : CustomerInfo.email\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 294,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"acc-number\",\n                          children: /*#__PURE__*/_jsxDEV(Link, {\n                            to: `/pages/customers/${entry.user}`,\n                            children: \"View Customer\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 298,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 297,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 289,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 281,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: moment(entry.date).format(\"MMMM Do, YYYY\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: entry.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: entry.rrr\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: [\"\\u20A6\", numeral(entry.amountDue).format(\"0,0.00\")]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: entry.funds_deduction || \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: `${entry.status === \"SUCCESSFUL\" ? \"text-success\" : entry.status === \"FAILED\" ? \"text-danger\" : \"\"}`,\n                    children: entry.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      \"data-rrr\": entry.rrr,\n                      className: \"btn btn-success action-btn\",\n                      disabled: isStatusFetching,\n                      children: isStatusFetching === entry.rrr ? /*#__PURE__*/_jsxDEV(SpinnerIcon, {\n                        className: \"rotating\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 332,\n                        columnNumber: 31\n                      }, this) : \"View\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 326,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 325,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 23\n                }, this), idx !== billingEntries.length - 1 && /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"spacer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 25\n                }, this)]\n              }, `${entry.user} + ${idx}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"audit-history-footer\",\n          children: /*#__PURE__*/_jsxDEV(ReactPaginate, {\n            pageCount: Math.ceil(billingEntries.length / itemsPerPage) || 1,\n            marginPagesDisplayed: 2,\n            pageRangeDisplayed: 3,\n            forcePage: currentPage - 1,\n            onPageChange: selectedItem => setCurrentPage(selectedItem.selected + 1),\n            containerClassName: \"pagination-btns\",\n            activeLinkClassName: \"active\",\n            pageLinkClassName: \"btn\",\n            previousLabel: /*#__PURE__*/_jsxDEV(ArrowLeftShortCircleFill, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 32\n            }, this),\n            previousLinkClassName: \"btn icon\",\n            nextLabel: /*#__PURE__*/_jsxDEV(ArrowLeftShortCircleFill, {\n              style: {\n                transform: \"rotateY(180deg)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 19\n            }, this),\n            nextLinkClassName: \"btn icon\",\n            disabledClassName: \"disabled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), \" \"]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      id: \"exportCustomersDataModal\",\n      showCloseX: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"modal-title color-dark-text-blue\",\n          id: `exportCustomersDataModalLabel`,\n          children: \"Export Transactions Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"color-dark-text-blue\",\n            children: \"Select date range\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"date-range-container row my-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                selected: values.start_date,\n                value: values.start_date,\n                onChange: date => setValues(prev => ({ ...prev,\n                  start_date: date\n                })),\n                name: \"start_date\",\n                dateFormat: \"dd/MM/yyyy\",\n                placeholderText: \"Start Date\",\n                className: \"start_date form-control\",\n                peekNextMonth: true,\n                showMonthDropdown: true,\n                showYearDropdown: true,\n                dropdownMode: \"select\",\n                locale: \"en-GB\",\n                isClearable: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                selected: values.end_date,\n                value: values.end_date,\n                onChange: date => setValues(prev => ({ ...prev,\n                  end_date: date\n                })),\n                name: \"end_date\",\n                dateFormat: \"dd/MM/yyyy\",\n                placeholderText: \"End date\",\n                className: \"end_date form-control\" // minDate={values.start_date}\n                ,\n                peekNextMonth: true,\n                showMonthDropdown: true,\n                showYearDropdown: true,\n                dropdownMode: \"select\",\n                locale: \"en-GB\",\n                isClearable: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-primary\",\n              onClick: handleExportData,\n              disabled: !values.start_date || !values.end_date || values.start_date && values.end_date && moment(values.start_date).isAfter(values.end_date),\n              children: \"Continue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-danger d-block\",\n              children: values.start_date && values.end_date && moment(values.start_date).isAfter(values.end_date) && \"Please select an end date that comes after the start date.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BillingStatusModal, {\n      billingStatus: billingStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(FailedBillings, \"NNW+4MTE97ad8KDbtyJO6d8r64E=\", false, function () {\n  return [useAuth, useHistory];\n});\n\n_c = FailedBillings;\nexport default FailedBillings;\n\nvar _c;\n\n$RefreshReg$(_c, \"FailedBillings\");","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/failedBillings.js"],"names":["React","Fragment","useState","useEffect","useCallback","Link","moment","useHistory","jwt_decode","face","placeholderImg","getBillingStatus","getExportTransactionData","getFailedBillings","DatePicker","errorHandler","validateToken","notify","handleOpenModal","handleHideModal","useAuth","ReactPaginate","numeral","BillingStatusModal","Modal","getAccessToken","FailedBillings","props","auth","handleError","errorObject","cb","billingEntries","setBillingEntries","Array","fill","map","v","idx","user","amountDue","rrr","status","date","responseObject","description","funds_deduction","CustomerUser","locked","CustomerInfos","id","firstname","lastname","email","phone","billingStatus","setBillingStatus","chargeFee","rrrAmount","payerEmail","payerName","payerPhone","currency","type","acceptPartPayment","message","isStatusFetching","setStatusFetching","currentPage","setCurrentPage","isLoading","setLoading","itemsPerPage","setItemsPerPage","isDataExporting","setDataExporting","selectedCustomers","setSelectedCustomers","values","setValues","search","start_date","end_date","token","history","fetchFailedBillings","method","param","result","error","tempBillingEntry","filter","handleShowBillingStatus","e","element","target","classList","contains","dataset","handleExportData","customer_ids","includes","toISOString","requestTime","format","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","prev","length","display","value","entry","initialBoundary","finalBoundary","itemNumber","CustomerInfo","photo_location","Math","ceil","selectedItem","selected","transform","isAfter"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { useHistory } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport face from \"../assets/img/placeholder-img.png\";\nimport placeholderImg from \"../assets/img/placeholder-img.png\";\nimport { ReactComponent as ArrowLeftShortCircleFill } from \"../assets/icons/arrow-left-short-circle-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../assets/icons/spinner.svg\";\nimport { ReactComponent as ExportIcon } from \"../assets/icons/export.svg\";\nimport { ReactComponent as NothingFoundIcon } from \"../assets/icons/nothing-found.svg\";\nimport {\n  getBillingStatus,\n  getExportTransactionData,\n  getFailedBillings,\n} from \"../services/customerService\";\nimport DatePicker from \"react-datepicker\";\nimport errorHandler, { validateToken } from \"../utils/errorHandler\";\nimport notify from \"../utils/notification\";\nimport { handleOpenModal, handleHideModal, useAuth } from \"./utilities\";\nimport ReactPaginate from \"react-paginate\";\nimport numeral from \"numeral\";\nimport BillingStatusModal from \"./billingStatusModal\";\nimport Modal from \"./modal\";\nimport { getAccessToken } from \"../utils/localStorageService\";\n\nconst FailedBillings = (props) => {\n  const auth = useAuth();\n  // useCallback ensures that handle error function isn't recreated on every render\n  const handleError = useCallback(\n    (errorObject, notify, cb) => errorHandler(auth)(errorObject, notify, cb),\n    [auth]\n  );\n\n  const [billingEntries, setBillingEntries] = useState(() =>\n    Array(0)\n      .fill(\"\")\n      .map((v, idx) => ({\n        user: 54,\n        amountDue: \"100.00\",\n        rrr: \"\",\n        status: \"INCOMPLETE\",\n        date: \"2021-04-21T09:22:39.830Z\",\n        responseObject: null,\n        description: \"\",\n        funds_deduction: \"\",\n        CustomerUser: {\n          locked: false,\n          CustomerInfos: [\n            {\n              id: 54,\n              firstname: \"\",\n              lastname: \"\",\n              email: \"\",\n              phone: \"\",\n            },\n          ],\n        },\n      }))\n  );\n  const [billingStatus, setBillingStatus] = useState({\n    rrr: \"\",\n    amountDue: 0,\n    chargeFee: 0,\n    rrrAmount: 0,\n    payerEmail: \"\",\n    payerName: \"\",\n    payerPhone: \"\",\n    description: \"\",\n    currency: \"\",\n    type: \"\",\n    acceptPartPayment: false,\n    message: \"\",\n  });\n  const [isStatusFetching, setStatusFetching] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isLoading, setLoading] = useState(false);\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  const [isDataExporting, setDataExporting] = useState(false);\n  const [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [values, setValues] = useState({\n    search: \"\",\n    start_date: \"\",\n    end_date: \"\",\n  });\n\n  const token = getAccessToken();\n  const history = useHistory();\n\n  useEffect(() => {\n    validateToken(token, history, jwt_decode, auth, notify);\n  }, [auth, history, token]);\n\n  // useCallback ensures that handle error function isn't recreated on every render\n  const fetchFailedBillings = useCallback(\n    async (method, param) => {\n      setLoading(true);\n      try {\n        const result = await getFailedBillings();\n        setLoading(false);\n        if (result.error) return notify(result.message, \"error\");\n        const tempBillingEntry = result?.result?.filter(\n          ({ user }) => user !== null\n        );\n        setBillingEntries(tempBillingEntry ?? []);\n      } catch (error) {\n        handleError(error, notify, () => setLoading(false));\n      }\n    },\n    [handleError]\n  );\n\n  useEffect(() => {\n    fetchFailedBillings();\n  }, [fetchFailedBillings]);\n\n  const handleShowBillingStatus = async (e) => {\n    const element = e.target;\n    if (!element.classList.contains(\"action-btn\")) return;\n    const rrr = element.dataset.rrr;\n    try {\n      setStatusFetching(rrr);\n      const result = await getBillingStatus(rrr);\n      setStatusFetching(\"\");\n      if (result.error) return notify(result.message, \"error\");\n      setBillingStatus({\n        ...result.result,\n        message: result.message,\n      });\n      handleOpenModal(\"#billingStatusModal\");\n    } catch (error) {\n      handleError(error, notify, () => setStatusFetching(\"\"));\n    }\n  };\n\n  const handleExportData = async () => {\n    setDataExporting(true);\n    handleHideModal(\"#exportCustomersDataModal\");\n    try {\n      const customer_ids = selectedCustomers.includes(\"all\")\n        ? []\n        : selectedCustomers;\n      const start_date = values.start_date\n        ? values.start_date.toISOString()\n        : \"\";\n      const end_date = values.end_date ? values.end_date.toISOString() : \"\";\n      const requestTime = moment().format(\"DD-MM-YY\");\n      // fetch result\n      const result = await getExportTransactionData({\n        customer_ids,\n        start_date,\n        end_date,\n      });\n      setDataExporting(false);\n      // handle download\n      const url = window.URL.createObjectURL(result);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.setAttribute(\"download\", `Transactions ${requestTime}.xlsx`); //or any other extension\n      document.body.appendChild(link);\n      link.click();\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n        setValues((prev) => ({\n          ...prev,\n          start_date: null,\n          end_date: null,\n        }));\n      }, 500);\n    } catch (error) {\n      handleError(error, notify, () => setDataExporting(false));\n    }\n  };\n\n  return (\n    <>\n      <header>\n        <div>\n          <h1>Failed Billing History</h1>\n        </div>\n        <div>\n          <div className=\"small-admin-details\">\n            <img src={face} alt=\"\" />\n            NPF Admin\n            <i className=\"arrow down\"></i>\n          </div>\n          <div className=\"some-container\">\n            <button\n              onClick={(e) => handleOpenModal(\"#exportCustomersDataModal\")}\n              id=\"exportCustomersData\"\n              className={`btn export-data-btn d-block ${\n                isDataExporting ? \"loading disabled\" : \"\"\n              }`}\n            >\n              {isDataExporting ? (\n                <SpinnerIcon className=\"rotating\" />\n              ) : (\n                <>\n                  <ExportIcon /> Export Data\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </header>\n      <main className=\"customers-page\">\n        {(isLoading || billingEntries.length === 0) && (\n          <div className=\"searching-block\">\n            <div className={\"svg-holder \" + (!isLoading ? \"not-loading\" : \"\")}>\n              {isLoading ? (\n                <SpinnerIcon className=\"rotating\" />\n              ) : (\n                <NothingFoundIcon />\n              )}\n            </div>\n            {!isLoading && <p>NOTHING FOUND!</p>}\n          </div>\n        )}\n        {!isLoading && billingEntries.length !== 0 && (\n          <>\n            <div className=\"color-dark-text-blue\">\n              Customers per page:{\" \"}\n              <div className=\"form-group\" style={{ display: \"inline-block\" }}>\n                <select\n                  className=\"form-control\"\n                  onChange={(e) => {\n                    setItemsPerPage(e.target.value);\n                    setCurrentPage(1);\n                  }}\n                  value={itemsPerPage}\n                >\n                  <option value={5}>5</option>\n                  <option value={10}>10</option>\n                  <option value={20}>20</option>\n                  <option value={50}>50</option>\n                  <option value={100}>100</option>\n                  <option value={150}>150</option>\n                  <option value={200}>200</option>\n                </select>\n              </div>\n            </div>\n            <table className=\"table table-borderless table-hover\">\n              <thead className=\"color-dark-text-blue\">\n                <tr>\n                  <th scope=\"col\">Customer</th>\n                  <th scope=\"col\">Date</th>\n                  <th scope=\"col\">Description</th>\n                  <th scope=\"col-3\">RRR</th>\n                  <th scope=\"col\">Amount Due</th>\n                  <th scope=\"col\">Funds Deduction</th>\n                  <th scope=\"col\">Status</th>\n                  <th scope=\"col\" className=\"text-center\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody onClick={handleShowBillingStatus}>\n                <tr className=\"spacer\" />\n                {billingEntries.map((entry, idx) => {\n                  const initialBoundary = (currentPage - 1) * itemsPerPage + 1;\n                  const finalBoundary = currentPage * itemsPerPage;\n                  const itemNumber = idx + 1;\n                  if (\n                    itemNumber < initialBoundary ||\n                    itemNumber > finalBoundary\n                  )\n                    return null;\n                  if (entry.user === null) return null;\n\n                  const {\n                    CustomerUser: {\n                      CustomerInfos: [CustomerInfo],\n                    },\n                  } = entry;\n\n                  return (\n                    <Fragment key={`${entry.user} + ${idx}`}>\n                      <tr className=\"customer-card\">\n                        <td className=\"major-details\">\n                          <div className=\"row\">\n                            <div className=\"customer-img\">\n                              <img\n                                src={entry.photo_location || placeholderImg}\n                                className=\"\"\n                                alt=\"\"\n                              />\n                            </div>\n                            <div className=\"col\">\n                              <div className=\"name font-weight-bold\">\n                                {CustomerInfo?.firstname}{\" \"}\n                                {CustomerInfo?.lastname}\n                              </div>\n                              <div className=\"email font-weight-light\">\n                                {CustomerInfo?.email}\n                              </div>\n                              <div className=\"acc-number\">\n                                <Link to={`/pages/customers/${entry.user}`}>\n                                  View Customer\n                                </Link>\n                              </div>\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"\">\n                          {moment(entry.date).format(\"MMMM Do, YYYY\")}\n                        </td>\n                        <td className=\"\">{entry.description}</td>\n                        <td className=\"\">{entry.rrr}</td>\n                        <td className=\"\">\n                          &#8358;{numeral(entry.amountDue).format(\"0,0.00\")}\n                        </td>\n                        <td className=\"\">{entry.funds_deduction || \"N/A\"}</td>\n                        <td\n                          className={`${\n                            entry.status === \"SUCCESSFUL\"\n                              ? \"text-success\"\n                              : entry.status === \"FAILED\"\n                              ? \"text-danger\"\n                              : \"\"\n                          }`}\n                        >\n                          {entry.status}\n                        </td>\n                        <td className=\"text-center\">\n                          <button\n                            data-rrr={entry.rrr}\n                            className=\"btn btn-success action-btn\"\n                            disabled={isStatusFetching}\n                          >\n                            {isStatusFetching === entry.rrr ? (\n                              <SpinnerIcon className=\"rotating\" />\n                            ) : (\n                              \"View\"\n                            )}\n                          </button>\n                        </td>\n                      </tr>\n                      {idx !== billingEntries.length - 1 && (\n                        <tr className=\"spacer\" />\n                      )}\n                    </Fragment>\n                  );\n                })}\n              </tbody>\n            </table>\n            <div className=\"audit-history-footer\">\n              <ReactPaginate\n                pageCount={Math.ceil(billingEntries.length / itemsPerPage) || 1}\n                marginPagesDisplayed={2}\n                pageRangeDisplayed={3}\n                forcePage={currentPage - 1}\n                onPageChange={(selectedItem) =>\n                  setCurrentPage(selectedItem.selected + 1)\n                }\n                containerClassName=\"pagination-btns\"\n                activeLinkClassName=\"active\"\n                pageLinkClassName=\"btn\"\n                previousLabel={<ArrowLeftShortCircleFill />}\n                previousLinkClassName=\"btn icon\"\n                nextLabel={\n                  <ArrowLeftShortCircleFill\n                    style={{ transform: \"rotateY(180deg)\" }}\n                  />\n                }\n                nextLinkClassName=\"btn icon\"\n                disabledClassName=\"disabled\"\n              />\n            </div>{\" \"}\n          </>\n        )}\n      </main>\n      <Modal id=\"exportCustomersDataModal\" showCloseX>\n        <div className=\"modal-body\">\n          <h5\n            className=\"modal-title color-dark-text-blue\"\n            id={`exportCustomersDataModalLabel`}\n          >\n            Export Transactions Data\n          </h5>\n          <div className=\"\">\n            <p className=\"color-dark-text-blue\">Select date range</p>\n            <div className=\"date-range-container row my-5\">\n              <div className=\"col-6\">\n                <DatePicker\n                  selected={values.start_date}\n                  value={values.start_date}\n                  onChange={(date) =>\n                    setValues((prev) => ({\n                      ...prev,\n                      start_date: date,\n                    }))\n                  }\n                  name=\"start_date\"\n                  dateFormat=\"dd/MM/yyyy\"\n                  placeholderText=\"Start Date\"\n                  className=\"start_date form-control\"\n                  peekNextMonth\n                  showMonthDropdown\n                  showYearDropdown\n                  dropdownMode=\"select\"\n                  locale=\"en-GB\"\n                  isClearable\n                />\n              </div>\n\n              <div className=\"col-6\">\n                <DatePicker\n                  selected={values.end_date}\n                  value={values.end_date}\n                  onChange={(date) =>\n                    setValues((prev) => ({\n                      ...prev,\n                      end_date: date,\n                    }))\n                  }\n                  name=\"end_date\"\n                  dateFormat=\"dd/MM/yyyy\"\n                  placeholderText=\"End date\"\n                  className=\"end_date form-control\"\n                  // minDate={values.start_date}\n                  peekNextMonth\n                  showMonthDropdown\n                  showYearDropdown\n                  dropdownMode=\"select\"\n                  locale=\"en-GB\"\n                  isClearable\n                />\n              </div>\n            </div>\n            <div className=\"mt-4\">\n              <button\n                type=\"button\"\n                className=\"btn btn-primary\"\n                onClick={handleExportData}\n                disabled={\n                  !values.start_date ||\n                  !values.end_date ||\n                  (values.start_date &&\n                    values.end_date &&\n                    moment(values.start_date).isAfter(values.end_date))\n                }\n              >\n                Continue\n              </button>\n              <small className=\"text-danger d-block\">\n                {values.start_date &&\n                  values.end_date &&\n                  moment(values.start_date).isAfter(values.end_date) &&\n                  \"Please select an end date that comes after the start date.\"}\n              </small>\n            </div>\n          </div>\n        </div>\n      </Modal>\n      <BillingStatusModal billingStatus={billingStatus} />\n    </>\n  );\n};\n\nexport default FailedBillings;\n"]},"metadata":{},"sourceType":"module"}