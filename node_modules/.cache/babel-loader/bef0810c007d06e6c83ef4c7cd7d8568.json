{"ast":null,"code":"import _regeneratorRuntime from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect}from\"react\";import{ReactComponent as TimesCircleFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/times-circle-fill.svg\";import{ReactComponent as CheckCircleFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/check-circle-fill.svg\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/spinner.svg\";import notify from\"../../../utils/notification\";import{addComment,approveOrRejectLoan,disburseLoan,getBranches,getLoanDetails,getLoanProducts,loanRequestBooking}from\"../../../services/loanService\";import{useState}from\"react/cjs/react.development\";import{useSpring,animated}from\"react-spring\";import{useHistory}from\"react-router-dom\";import moment from\"moment\";import{getAdminEmail,getRoles as getAdminRoles}from\"../../../utils/localStorageService\";import{deleteAdminAccount,searchAdminProfile}from\"../../../services/adminService\";export var ApprovalModal=function ApprovalModal(_ref){var approveModalBtn=_ref.approveModalBtn,setApproveModalBtn=_ref.setApproveModalBtn,approveData=_ref.approveData;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAprroveLoading=_useState2[0],setIsApproveLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAboveLoading=_useState4[0],setIsAboveLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),acceptModalBtn=_useState6[0],setAcceptModalBtn=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),acceptData=_useState8[0],setAcceptData=_useState8[1];var history=useHistory();var aboveLimit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,loanAppId,approveRejectApi;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;data={isWithinLimit:false,work_flow_level:approveData.work_flow_level};loanAppId=approveData.loanAppId;setIsAboveLoading(function(prev){return!prev;});_context.next=6;return approveOrRejectLoan(data,loanAppId);case 6:approveRejectApi=_context.sent;if(!approveRejectApi.error){_context.next=9;break;}return _context.abrupt(\"return\",notify(approveRejectApi.data,\"error\"));case 9:notify(approveRejectApi.data.text,\"success\");setApproveModalBtn(function(prev){return!prev;});setIsAboveLoading(function(prev){return!prev;});history.push(\"/pages/loanMan\");_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);notify(_context.t0.data,\"error\");setIsAboveLoading(function(prev){return!prev;});case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function aboveLimit(){return _ref2.apply(this,arguments);};}();var animateModal=useSpring({config:{duration:250},opacity:approveModalBtn?1:0,transform:approveModalBtn?\"translateY(0%)\":\"translateY(-100%)\"});var handleAcceptModal=function handleAcceptModal(){return/*#__PURE__*/_jsx(BookAndAcceptLoanModal,{acceptModalBtn:acceptModalBtn,setAcceptModalBtn:setAcceptModalBtn,acceptData:acceptData});};var checkAcceptModal=function checkAcceptModal(){setApproveModalBtn(function(prev){return!prev;});setAcceptModalBtn(function(prev){return!prev;});var data={limit:approveData.limit,maxTerm:approveData.maxTerm,loanAppId:approveData.loanAppId,customerId:approveData.customerId,applicationDate:approveData.applicationDate,status:approveData.status,narrative:approveData.narrative,isWithinLimit:approveData.isWithinLimit,email:approveData.email,firstname:approveData.firstname,lastname:approveData.lastname,productName:approveData.productName};setAcceptData(data);};return/*#__PURE__*/_jsxs(_Fragment,{children:[handleAcceptModal(),approveModalBtn?/*#__PURE__*/_jsx(\"div\",{className:\"appr-modal\",children:/*#__PURE__*/_jsx(animated.div,{className:\"appr-inner\",style:animateModal,children:/*#__PURE__*/_jsxs(\"div\",{approveModalBtn:approveModalBtn,children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn appr-close-btn\",onClick:function onClick(){return setApproveModalBtn(function(prev){return!prev;});},children:/*#__PURE__*/_jsx(TimesCircleFill,{className:\"modal-cancel-icon\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"appr-modal-text\",children:\"Is the loan amount within your limit?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"appr-modal-btn\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn approve-loan-btn first-btn\",onClick:checkAcceptModal,children:[/*#__PURE__*/_jsx(CheckCircleFill,{}),\" \\xA0\",isAprroveLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):\"Yes\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn reject-loan-btn\",onClick:aboveLimit,children:[/*#__PURE__*/_jsx(TimesCircleFill,{}),isAboveLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):\"No\"]})]})]})})}):\"\"]});};export var NarrativeModal=function NarrativeModal(_ref3){var narrativeModalBtn=_ref3.narrativeModalBtn,setNarrativeModalBtn=_ref3.setNarrativeModalBtn,approveData=_ref3.approveData;var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isAprroveLoading=_useState10[0],setIsApproveLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),count=_useState12[0],setCount=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),narrative=_useState14[0],setNarrative=_useState14[1];var _useState15=useState(120),_useState16=_slicedToArray(_useState15,2),countNum=_useState16[0],setCountNum=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),isDisabled=_useState18[0],setIsDisabled=_useState18[1];var history=useHistory();var handleSetCount=function handleSetCount(){setCount(function(prev){return!prev;});};var handleRemoveCount=function handleRemoveCount(){setCount(false);};var getNarrative=function getNarrative(e){setNarrative(e.target.value);};var textCounter=function textCounter(){//max charcater is 120\nvar maxAmount=120;//check if user is greater than max character\nnarrative.length>maxAmount?//if input is greater than max character set textarea to only have\n//the amount of max character entered and nothing more\nsetNarrative(narrative.substring(0,maxAmount))://set count indicator value\nsetCountNum(maxAmount-narrative.length);//enable button if input is valid and vice verse\nvar validText=narrative.trim();validText.length>20?setIsDisabled(false):setIsDisabled(true);};var countValue=countNum>1?\"\".concat(countNum,\" characters remaining\"):\"\".concat(countNum,\" character remaining\");var approveOrReject=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data,loanAppId,approveRejectApi;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;data={status:approveData.status,narrative:narrative.trim(),isWithinLimit:approveData.isWithinLimit,email:approveData.email,firstname:approveData.firstname,lastname:approveData.lastname,productName:approveData.productName};loanAppId=approveData.loanAppId;console.log(data);setIsApproveLoading(function(prev){return!prev;});_context2.next=7;return approveOrRejectLoan(data,loanAppId);case 7:approveRejectApi=_context2.sent;if(!approveRejectApi.error){_context2.next=10;break;}return _context2.abrupt(\"return\",notify(approveRejectApi.data,\"error\"));case 10:console.log(data);notify(\"Loan Rejection successful\",\"success\");setNarrativeModalBtn(function(prev){return!prev;});setIsApproveLoading(function(prev){return!prev;});history.push(\"/pages/loanMan\");_context2.next=21;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](0);notify(_context2.t0.data,\"error\");setIsApproveLoading(function(prev){return!prev;});case 21:case\"end\":return _context2.stop();}}},_callee2,null,[[0,17]]);}));return function approveOrReject(){return _ref4.apply(this,arguments);};}();var animateModal=useSpring({config:{duration:250},opacity:narrativeModalBtn?1:0,transform:narrativeModalBtn?\"translateY(0%)\":\"translateY(-100%)\"});return/*#__PURE__*/_jsx(_Fragment,{children:narrativeModalBtn?/*#__PURE__*/_jsx(\"div\",{className:\"appr-modal\",children:/*#__PURE__*/_jsx(animated.div,{className:\"appr-inner\",style:animateModal,children:/*#__PURE__*/_jsxs(\"div\",{narrativeModalBtn:narrativeModalBtn,children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn appr-close-btn\",onClick:function onClick(){return setNarrativeModalBtn(function(prev){return!prev;});},children:/*#__PURE__*/_jsx(TimesCircleFill,{className:\"modal-cancel-icon\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"appr-modal-text\",children:\"State your reason for declining this loan request\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"textarea\",{onFocus:handleSetCount,onBlur:handleRemoveCount,rows:\"6\",className:\"narrative-text\",value:narrative,onChange:getNarrative,onKeyUp:textCounter,onKeyDown:textCounter}),count?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{className:\"text-count\",readOnly:true,type:\"text\",value:countValue}),/*#__PURE__*/_jsx(\"span\",{})]}):\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"narr-modal-btn\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn approve-loan-btn first-btn\",onClick:approveOrReject,disabled:isDisabled,children:[/*#__PURE__*/_jsx(CheckCircleFill,{}),\"\\xA0 \\xA0\",isAprroveLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):\"Submit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn reject-loan-btn\",onClick:function onClick(){return setNarrativeModalBtn(function(prev){return!prev;});},children:[/*#__PURE__*/_jsx(TimesCircleFill,{}),\"Cancel\"]})]})]})})}):\"\"});};export var BookAndAcceptLoanModal=function BookAndAcceptLoanModal(_ref5){var acceptModalBtn=_ref5.acceptModalBtn,setAcceptModalBtn=_ref5.setAcceptModalBtn,acceptData=_ref5.acceptData;var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isAprroveLoading=_useState20[0],setIsApproveLoading=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),amount=_useState22[0],setAmount=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),tenure=_useState24[0],setTenure=_useState24[1];var _useState25=useState(true),_useState26=_slicedToArray(_useState25,2),isDisabled=_useState26[0],setIsDisabled=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),error=_useState28[0],setError=_useState28[1];var history=useHistory();var getAmount=function getAmount(e){setAmount(e.target.value);if(amount&&tenure){setIsDisabled(false);}else{setIsDisabled(true);}setError(\"\");};var getTenure=function getTenure(e){setTenure(e.target.value);if(amount&&tenure){setIsDisabled(false);}else{setIsDisabled(true);}setError(\"\");};var handleCancel=function handleCancel(){setAcceptModalBtn(function(prev){return!prev;});setAmount(null);setTenure(null);setIsDisabled(true);};var bookAndApprovedLoan=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var data,loanAppId,limit,maxTerm,bookLoan;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;data={narrative:acceptData.narrative,isWithinLimit:acceptData.isWithinLimit,status:acceptData.status,email:acceptData.email,firstname:acceptData.firstname,lastname:acceptData.lastname,productName:acceptData.productName,approvedAmount:amount,approvedTenure:tenure,applicationDate:moment(acceptData.applicationDate).format(\"LL\")};loanAppId=acceptData.loanAppId;//   const customerId = acceptData.customerId;\nlimit=acceptData.limit;maxTerm=acceptData.maxTerm;if(!(amount>limit)){_context3.next=8;break;}setError(\"Amount should not exceed \".concat(limit));return _context3.abrupt(\"return\");case 8:if(!(tenure>maxTerm)){_context3.next=11;break;}setError(\"Maximun tenure is \".concat(maxTerm,\" months\"));return _context3.abrupt(\"return\");case 11:setIsApproveLoading(function(prev){return!prev;});setError(\"\");console.log(data);_context3.next=16;return approveOrRejectLoan(data,loanAppId);case 16:bookLoan=_context3.sent;if(!bookLoan.error){_context3.next=20;break;}console.log(bookLoan);return _context3.abrupt(\"return\",notify(bookLoan.data,\"error\"));case 20:notify(\"Loan Approval successful\",\"success\");setAcceptModalBtn(function(prev){return!prev;});setIsApproveLoading(function(prev){return!prev;});history.push(\"/pages/customers\");_context3.next=30;break;case 26:_context3.prev=26;_context3.t0=_context3[\"catch\"](0);notify(_context3.t0.data,\"error\");setIsApproveLoading(function(prev){return!prev;});case 30:case\"end\":return _context3.stop();}}},_callee3,null,[[0,26]]);}));return function bookAndApprovedLoan(){return _ref6.apply(this,arguments);};}();var animateModal=useSpring({config:{duration:250},opacity:acceptModalBtn?1:0,transform:acceptModalBtn?\"translateY(0%)\":\"translateY(-100%)\"});return/*#__PURE__*/_jsx(_Fragment,{children:acceptModalBtn?/*#__PURE__*/_jsx(\"div\",{className:\"appr-modal\",children:/*#__PURE__*/_jsx(animated.div,{className:\"appr-inner\",style:animateModal,children:/*#__PURE__*/_jsxs(\"div\",{acceptModalBtn:acceptModalBtn,children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn appr-close-btn\",onClick:handleCancel,children:/*#__PURE__*/_jsx(TimesCircleFill,{className:\"modal-cancel-icon\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"accept-error\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"accept-input\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Approved Amount\"}),/*#__PURE__*/_jsx(\"input\",{className:\"amount-input\",type:\"number\",placeholder:\"Amount\",value:amount,onChange:getAmount})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Approved Tenure\"}),/*#__PURE__*/_jsx(\"input\",{className:\"month-input\",type:\"number\",placeholder:\"In months\",value:tenure,onChange:getTenure})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"narr-modal-btn\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn approve-loan-btn first-btn\",onClick:bookAndApprovedLoan,disabled:isDisabled,children:[/*#__PURE__*/_jsx(CheckCircleFill,{}),\"\\xA0 \\xA0\",isAprroveLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):\"Submit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn reject-loan-btn\",onClick:handleCancel,children:[/*#__PURE__*/_jsx(TimesCircleFill,{}),\"Cancel\"]})]})]})})}):\"\"});};export var DisburseModal=function DisburseModal(_ref7){var disburseModalBtn=_ref7.disburseModalBtn,setDisburseModalBtn=_ref7.setDisburseModalBtn,approveData=_ref7.approveData;var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),isAprroveLoading=_useState30[0],setIsApproveLoading=_useState30[1];var _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),loanProducts=_useState32[0],setLoanProducts=_useState32[1];// useEffect(() => {\n//   handleLoanProducts();\n// }, []);\n// const handleLoanProducts = async () => {\n//   try {\n//     const companyCode = `NG0020001`;\n//     const products = await getLoanProducts(companyCode);\n//     console.log(products);\n//     if (products.error) return notify(products.message, \"error\");\n//     setLoanProducts(products.data?.result?.data?.products);\n//   } catch (error) {\n//     console.log(error);\n//     notify(\"Something went wrong\", \"error\");\n//   }\n// };\n// const history = useHistory();\nvar disburse=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:case\"end\":return _context4.stop();}}},_callee4);}));return function disburse(){return _ref8.apply(this,arguments);};}();var animateModal=useSpring({config:{duration:250},opacity:disburseModalBtn?1:0,transform:disburseModalBtn?\"translateY(0%)\":\"translateY(-100%)\"});return/*#__PURE__*/_jsx(_Fragment,{children:disburseModalBtn?/*#__PURE__*/_jsx(\"div\",{className:\"appr-modal\",children:/*#__PURE__*/_jsx(animated.div,{className:\"appr-inner\",style:animateModal,children:/*#__PURE__*/_jsxs(\"div\",{disburseModalBtn:disburseModalBtn,children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn appr-close-btn\",onClick:function onClick(){return setDisburseModalBtn(function(prev){return!prev;});},children:/*#__PURE__*/_jsx(TimesCircleFill,{className:\"modal-cancel-icon\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"appr-modal-text\",children:\"Proceed with loan disbursement?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"appr-modal-btn\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn approve-loan-btn first-btn\",onClick:disburse,children:[/*#__PURE__*/_jsx(CheckCircleFill,{}),\" \\xA0\",isAprroveLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):\"Yes\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn reject-loan-btn\",onClick:function onClick(){setDisburseModalBtn(function(prev){return!prev;});setIsApproveLoading(function(prev){return!prev;});},children:[/*#__PURE__*/_jsx(TimesCircleFill,{}),\"No\"]})]})]})})}):\"\"});};export var AcceptLoanModal=function AcceptLoanModal(_ref9){var acceptLoanModalBtn=_ref9.acceptLoanModalBtn,setAcceptLoanModalBtn=_ref9.setAcceptLoanModalBtn,approveData=_ref9.approveData;var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),isAprroveLoading=_useState34[0],setIsApproveLoading=_useState34[1];var acceptLoan=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var data,loanAppId,approveRejectApi;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;data={isWithinLimit:false,work_flow_level:1};loanAppId=approveData.loanAppId;setIsApproveLoading(function(prev){return!prev;});_context5.next=6;return approveOrRejectLoan(data,loanAppId);case 6:approveRejectApi=_context5.sent;if(!approveRejectApi.error){_context5.next=9;break;}return _context5.abrupt(\"return\",notify(approveRejectApi.data,\"error\"));case 9:notify(approveRejectApi.data.text,\"success\");setAcceptLoanModalBtn(function(prev){return!prev;});setIsApproveLoading(function(prev){return!prev;});window.location.reload();_context5.next=19;break;case 15:_context5.prev=15;_context5.t0=_context5[\"catch\"](0);notify(_context5.t0.data,\"error\");setIsApproveLoading(function(prev){return!prev;});case 19:case\"end\":return _context5.stop();}}},_callee5,null,[[0,15]]);}));return function acceptLoan(){return _ref10.apply(this,arguments);};}();var animateModal=useSpring({config:{duration:250},opacity:acceptLoanModalBtn?1:0,transform:acceptLoanModalBtn?\"translateY(0%)\":\"translateY(-100%)\"});return/*#__PURE__*/_jsx(_Fragment,{children:acceptLoanModalBtn?/*#__PURE__*/_jsx(\"div\",{className:\"appr-modal\",children:/*#__PURE__*/_jsx(animated.div,{className:\"appr-inner\",style:animateModal,children:/*#__PURE__*/_jsxs(\"div\",{acceptLoanModalBtn:acceptLoanModalBtn,children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn appr-close-btn\",onClick:function onClick(){return setAcceptLoanModalBtn(function(prev){return!prev;});},children:/*#__PURE__*/_jsx(TimesCircleFill,{className:\"modal-cancel-icon\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"appr-modal-text\",children:\"Proceed to loan acceptance?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"appr-modal-btn\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn approve-loan-btn first-btn\",onClick:acceptLoan,children:[/*#__PURE__*/_jsx(CheckCircleFill,{}),\"\\xA0 \\xA0\",isAprroveLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):\"Proceed\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn reject-loan-btn\",onClick:function onClick(){return setAcceptLoanModalBtn(function(prev){return!prev;});},children:[/*#__PURE__*/_jsx(TimesCircleFill,{}),\"Cancel\"]})]})]})})}):\"\"});};export var CommentModal=function CommentModal(_ref11){var commentModalBtn=_ref11.commentModalBtn,setCommentModalBtn=_ref11.setCommentModalBtn,commentData=_ref11.commentData;var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),isAprroveLoading=_useState36[0],setIsApproveLoading=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),count=_useState38[0],setCount=_useState38[1];var _useState39=useState(1000),_useState40=_slicedToArray(_useState39,2),countNum=_useState40[0],setCountNum=_useState40[1];var _useState41=useState(true),_useState42=_slicedToArray(_useState41,2),isDisabled=_useState42[0],setIsDisabled=_useState42[1];var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),branch=_useState44[0],setBranch=_useState44[1];var _useState45=useState(\"\"),_useState46=_slicedToArray(_useState45,2),staffBranch=_useState46[0],setStaffBranch=_useState46[1];var _useState47=useState(\"\"),_useState48=_slicedToArray(_useState47,2),comment=_useState48[0],setComment=_useState48[1];var _useState49=useState({}),_useState50=_slicedToArray(_useState49,2),getAdmin=_useState50[0],setGetAdmin=_useState50[1];var _useState51=useState(\"\"),_useState52=_slicedToArray(_useState51,2),adminName=_useState52[0],setAdminName=_useState52[1];var _useState53=useState(false),_useState54=_slicedToArray(_useState53,2),loading=_useState54[0],setLoading=_useState54[1];var roles=getAdminRoles();var email=getAdminEmail();useEffect(function(){var handleSearchAdmin=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var response,result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:setLoading(true);_context6.prev=1;_context6.next=4;return searchAdminProfile(email);case 4:response=_context6.sent;_context6.next=7;return getBranches();case 7:result=_context6.sent;if(response.data.status){setGetAdmin(response.data.data);setBranch(result.data);setLoading(false);}_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](1);console.log(_context6.t0);case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[1,11]]);}));return function handleSearchAdmin(){return _ref12.apply(this,arguments);};}();handleSearchAdmin();},[email]);useEffect(function(){setAdminName(\"\".concat(getAdmin.firstname,\" \").concat(getAdmin.lastname));branch&&branch.forEach(function(option){if(parseInt(getAdmin.branch)===option.id){setStaffBranch(option.name);}});},[branch,getAdmin.branch,getAdmin.firstname,getAdmin.lastname]);var handleSetCount=function handleSetCount(){setCount(function(prev){return!prev;});};var handleRemoveCount=function handleRemoveCount(){setCount(false);};var getComment=function getComment(e){return setComment(e.target.value);};var textCounter=function textCounter(){//max charcater is 120\nvar maxAmount=1000;//check if user is greater than max character\ncomment.length>maxAmount?//if input is greater than max character set textarea to only have\n//the amount of max character entered and nothing more\nsetComment(comment.substring(0,maxAmount))://set count indicator value\nsetCountNum(maxAmount-comment.length);//enable button if input is valid and vice verse\nvar validText=comment.trim();validText.length>20?setIsDisabled(false):setIsDisabled(true);};var countValue=countNum>1?\"\".concat(countNum,\" characters remaining\"):\"\".concat(countNum,\" character remaining\");var addLoanOfficerComment=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var data,response;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;data={staffId:getAdmin.staff_id,comment:roles===\"AUDIT\"?\"AUDITOR'S COMMENT: \".concat(comment.trim()):comment.trim(),rank:getAdmin.rank,fullName:adminName,staffEmail:email,staffBranch:staffBranch,loanAppId:commentData.loanAppId};setIsApproveLoading(function(prev){return!prev;});_context7.next=5;return addComment(data);case 5:response=_context7.sent;if(!response.error){_context7.next=8;break;}return _context7.abrupt(\"return\",notify(response.data,\"error\"));case 8:notify(\"Comment added successfully\",\"success\");setIsApproveLoading(function(prev){return!prev;});setTimeout(function(){setCommentModalBtn(function(prev){return!prev;});window.location.reload();},2500);return _context7.abrupt(\"return\");case 14:_context7.prev=14;_context7.t0=_context7[\"catch\"](0);notify(_context7.t0.message,\"error\");setIsApproveLoading(function(prev){return!prev;});return _context7.abrupt(\"return\");case 19:case\"end\":return _context7.stop();}}},_callee7,null,[[0,14]]);}));return function addLoanOfficerComment(){return _ref13.apply(this,arguments);};}();var animateModal=useSpring({config:{duration:250},opacity:commentModalBtn?1:0,transform:commentModalBtn?\"translateY(0%)\":\"translateY(-100%)\"});return/*#__PURE__*/_jsx(_Fragment,{children:commentModalBtn?/*#__PURE__*/_jsx(\"div\",{className:\"appr-modal\",children:/*#__PURE__*/_jsx(animated.div,{className:\"comment-inner\",style:animateModal,children:/*#__PURE__*/_jsxs(\"div\",{commentModalBtn:commentModalBtn,children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn appr-close-btn\",onClick:function onClick(){return setCommentModalBtn(function(prev){return!prev;});},children:/*#__PURE__*/_jsx(TimesCircleFill,{className:\"modal-cancel-icon\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"appr-modal-text\",children:\"Add your comment\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"staffID\",children:\"Staff ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"staff_id\",id:\"staff_id\",className:\"form-control\",defaultValue:loading?\"Loading...\":getAdmin.staff_id,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"fullName\",id:\"fullName\",className:\"form-control\",readOnly:true,defaultValue:loading?\"Loading...\":adminName})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rank\",children:\"Rank\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"rank\",id:\"rank\",className:\"form-control\",readOnly:true,defaultValue:loading?\"Loading...\":getAdmin.rank})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"branch\",children:\"Branch\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"branch\",id:\"branch\",className:\"form-control\",readOnly:true,defaultValue:loading?\"Loading...\":staffBranch})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comment\",children:\"Comment\"}),/*#__PURE__*/_jsx(\"textarea\",{onFocus:handleSetCount,onBlur:handleRemoveCount,rows:\"10\",className:\"narrative-text\",value:comment,onChange:getComment,onKeyUp:textCounter,onKeyDown:textCounter}),count?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{className:\"text-count\",readOnly:true,type:\"text\",value:countValue}),/*#__PURE__*/_jsx(\"span\",{})]}):\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"narr-modal-btn\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn approve-loan-btn first-btn\",onClick:addLoanOfficerComment,disabled:isDisabled,children:[/*#__PURE__*/_jsx(CheckCircleFill,{}),\"\\xA0 \\xA0\",isAprroveLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):\"Submit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn reject-loan-btn\",onClick:function onClick(){return setCommentModalBtn(function(prev){return!prev;});},children:[/*#__PURE__*/_jsx(TimesCircleFill,{}),\"Cancel\"]})]})]})})}):\"\"});};export var DeleteModal=function DeleteModal(_ref14){var deleteModalBtn=_ref14.deleteModalBtn,setDeleteModalBtn=_ref14.setDeleteModalBtn,deleteData=_ref14.deleteData;var history=useHistory();var _useState55=useState(false),_useState56=_slicedToArray(_useState55,2),isAprroveLoading=_useState56[0],setIsApproveLoading=_useState56[1];var animateModal=useSpring({config:{duration:250},opacity:deleteModalBtn?1:0,transform:deleteModalBtn?\"translateY(0%)\":\"translateY(-100%)\"});var handleDeleteProfile=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var id,response;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:setIsApproveLoading(true);_context8.prev=1;id=deleteData.id;_context8.next=5;return deleteAdminAccount(id);case 5:response=_context8.sent;if(!response.error){_context8.next=10;break;}notify(response.message,\"error\");setIsApproveLoading(false);return _context8.abrupt(\"return\");case 10:notify(response.message,\"success\");setIsApproveLoading(false);history.push(\"/pages/superAdmin\");return _context8.abrupt(\"return\");case 16:_context8.prev=16;_context8.t0=_context8[\"catch\"](1);notify(\"Something went wrong\",\"success\");setIsApproveLoading(false);return _context8.abrupt(\"return\");case 21:case\"end\":return _context8.stop();}}},_callee8,null,[[1,16]]);}));return function handleDeleteProfile(){return _ref15.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:deleteModalBtn?/*#__PURE__*/_jsx(\"div\",{className:\"appr-modal\",children:/*#__PURE__*/_jsx(animated.div,{className:\"appr-inner\",style:animateModal,children:/*#__PURE__*/_jsxs(\"div\",{deleteModalBtn:deleteModalBtn,children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn appr-close-btn\",onClick:function onClick(){return setDeleteModalBtn(function(prev){return!prev;});},children:/*#__PURE__*/_jsx(TimesCircleFill,{className:\"modal-cancel-icon\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"appr-modal-text\",children:\"Are you sure you want to delete \".concat(deleteData.adminName,\"'s \").concat(deleteData.adminRole?deleteData.adminRole:\"\",\" profile?\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"narr-modal-btn\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn approve-loan-btn first-btn\",onClick:handleDeleteProfile,disabled:isAprroveLoading?true:false,children:[/*#__PURE__*/_jsx(CheckCircleFill,{}),\"\\xA0 \\xA0\",isAprroveLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):\"Delete\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn reject-loan-btn\",onClick:function onClick(){return setDeleteModalBtn(function(prev){return!prev;});},children:[/*#__PURE__*/_jsx(TimesCircleFill,{}),\"Cancel\"]})]})]})})}):\"\"});};","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/loanManagement/customer/approvalModal.js"],"names":["React","useEffect","notify","addComment","approveOrRejectLoan","disburseLoan","getBranches","getLoanDetails","getLoanProducts","loanRequestBooking","useState","useSpring","animated","useHistory","moment","getAdminEmail","getRoles","getAdminRoles","deleteAdminAccount","searchAdminProfile","ApprovalModal","approveModalBtn","setApproveModalBtn","approveData","isAprroveLoading","setIsApproveLoading","isAboveLoading","setIsAboveLoading","acceptModalBtn","setAcceptModalBtn","acceptData","setAcceptData","history","aboveLimit","data","isWithinLimit","work_flow_level","loanAppId","prev","approveRejectApi","error","text","push","animateModal","config","duration","opacity","transform","handleAcceptModal","checkAcceptModal","limit","maxTerm","customerId","applicationDate","status","narrative","email","firstname","lastname","productName","NarrativeModal","narrativeModalBtn","setNarrativeModalBtn","count","setCount","setNarrative","countNum","setCountNum","isDisabled","setIsDisabled","handleSetCount","handleRemoveCount","getNarrative","e","target","value","textCounter","maxAmount","length","substring","validText","trim","countValue","approveOrReject","console","log","BookAndAcceptLoanModal","amount","setAmount","tenure","setTenure","setError","getAmount","getTenure","handleCancel","bookAndApprovedLoan","approvedAmount","approvedTenure","format","bookLoan","DisburseModal","disburseModalBtn","setDisburseModalBtn","loanProducts","setLoanProducts","disburse","AcceptLoanModal","acceptLoanModalBtn","setAcceptLoanModalBtn","acceptLoan","window","location","reload","CommentModal","commentModalBtn","setCommentModalBtn","commentData","branch","setBranch","staffBranch","setStaffBranch","comment","setComment","getAdmin","setGetAdmin","adminName","setAdminName","loading","setLoading","roles","handleSearchAdmin","response","result","forEach","option","parseInt","id","name","getComment","addLoanOfficerComment","staffId","staff_id","rank","fullName","staffEmail","setTimeout","message","DeleteModal","deleteModalBtn","setDeleteModalBtn","deleteData","handleDeleteProfile","adminRole"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { ReactComponent as TimesCircleFill } from \"../../../assets/icons/times-circle-fill.svg\";\nimport { ReactComponent as CheckCircleFill } from \"../../../assets/icons/check-circle-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../../../assets/icons/spinner.svg\";\nimport notify from \"../../../utils/notification\";\nimport {\n  addComment,\n  approveOrRejectLoan,\n  disburseLoan,\n  getBranches,\n  getLoanDetails,\n  getLoanProducts,\n  loanRequestBooking,\n} from \"../../../services/loanService\";\nimport { useState } from \"react/cjs/react.development\";\nimport { useSpring, animated } from \"react-spring\";\nimport { useHistory } from \"react-router-dom\";\nimport moment from \"moment\";\nimport {\n  getAdminEmail,\n  getRoles as getAdminRoles,\n} from \"../../../utils/localStorageService\";\nimport {\n  deleteAdminAccount,\n  searchAdminProfile,\n} from \"../../../services/adminService\";\n\nexport const ApprovalModal = ({\n  approveModalBtn,\n  setApproveModalBtn,\n  approveData,\n}) => {\n  const [isAprroveLoading, setIsApproveLoading] = useState(false);\n  const [isAboveLoading, setIsAboveLoading] = useState(false);\n  const [acceptModalBtn, setAcceptModalBtn] = useState(false);\n  const [acceptData, setAcceptData] = useState({});\n\n  const history = useHistory();\n\n  const aboveLimit = async () => {\n    try {\n      const data = {\n        isWithinLimit: false,\n        work_flow_level: approveData.work_flow_level,\n      };\n      const loanAppId = approveData.loanAppId;\n\n      setIsAboveLoading((prev) => !prev);\n\n      const approveRejectApi = await approveOrRejectLoan(data, loanAppId);\n\n      if (approveRejectApi.error) return notify(approveRejectApi.data, \"error\");\n\n      notify(approveRejectApi.data.text, \"success\");\n      setApproveModalBtn((prev) => !prev);\n      setIsAboveLoading((prev) => !prev);\n      history.push(\"/pages/loanMan\");\n    } catch (error) {\n      notify(error.data, \"error\");\n      setIsAboveLoading((prev) => !prev);\n    }\n  };\n\n  const animateModal = useSpring({\n    config: {\n      duration: 250,\n    },\n    opacity: approveModalBtn ? 1 : 0,\n    transform: approveModalBtn ? `translateY(0%)` : `translateY(-100%)`,\n  });\n\n  const handleAcceptModal = () => {\n    return (\n      <BookAndAcceptLoanModal\n        acceptModalBtn={acceptModalBtn}\n        setAcceptModalBtn={setAcceptModalBtn}\n        acceptData={acceptData}\n      />\n    );\n  };\n\n  const checkAcceptModal = () => {\n    setApproveModalBtn((prev) => !prev);\n    setAcceptModalBtn((prev) => !prev);\n\n    var data = {\n      limit: approveData.limit,\n      maxTerm: approveData.maxTerm,\n      loanAppId: approveData.loanAppId,\n      customerId: approveData.customerId,\n      applicationDate: approveData.applicationDate,\n      status: approveData.status,\n      narrative: approveData.narrative,\n      isWithinLimit: approveData.isWithinLimit,\n      email: approveData.email,\n      firstname: approveData.firstname,\n      lastname: approveData.lastname,\n      productName: approveData.productName,\n    };\n\n    setAcceptData(data);\n  };\n\n  return (\n    <>\n      {handleAcceptModal()}\n      {approveModalBtn ? (\n        <div className=\"appr-modal\">\n          <animated.div className=\"appr-inner\" style={animateModal}>\n            <div approveModalBtn={approveModalBtn}>\n              <button\n                className=\"btn appr-close-btn\"\n                onClick={() => setApproveModalBtn((prev) => !prev)}\n              >\n                <TimesCircleFill className=\"modal-cancel-icon\" />\n              </button>\n              <p className=\"appr-modal-text\">\n                Is the loan amount within your limit?\n              </p>\n              <div className=\"appr-modal-btn\">\n                <button\n                  className=\"btn approve-loan-btn first-btn\"\n                  onClick={checkAcceptModal}\n                >\n                  <CheckCircleFill /> &nbsp;\n                  {isAprroveLoading ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    \"Yes\"\n                  )}\n                </button>\n\n                <button className=\"btn reject-loan-btn\" onClick={aboveLimit}>\n                  <TimesCircleFill />\n                  {isAboveLoading ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    \"No\"\n                  )}\n                </button>\n              </div>\n            </div>\n          </animated.div>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n};\n\nexport const NarrativeModal = ({\n  narrativeModalBtn,\n  setNarrativeModalBtn,\n  approveData,\n}) => {\n  const [isAprroveLoading, setIsApproveLoading] = useState(false);\n  const [count, setCount] = useState(false);\n  const [narrative, setNarrative] = useState(\"\");\n  const [countNum, setCountNum] = useState(120);\n  const [isDisabled, setIsDisabled] = useState(true);\n  const history = useHistory();\n\n  const handleSetCount = () => {\n    setCount((prev) => !prev);\n  };\n\n  const handleRemoveCount = () => {\n    setCount(false);\n  };\n\n  const getNarrative = (e) => {\n    setNarrative(e.target.value);\n  };\n\n  const textCounter = () => {\n    //max charcater is 120\n    const maxAmount = 120;\n    //check if user is greater than max character\n    narrative.length > maxAmount\n      ? //if input is greater than max character set textarea to only have\n        //the amount of max character entered and nothing more\n        setNarrative(narrative.substring(0, maxAmount))\n      : //set count indicator value\n        setCountNum(maxAmount - narrative.length);\n\n    //enable button if input is valid and vice verse\n    const validText = narrative.trim();\n    validText.length > 20 ? setIsDisabled(false) : setIsDisabled(true);\n  };\n\n  const countValue =\n    countNum > 1\n      ? `${countNum} characters remaining`\n      : `${countNum} character remaining`;\n\n  const approveOrReject = async () => {\n    try {\n      const data = {\n        status: approveData.status,\n        narrative: narrative.trim(),\n        isWithinLimit: approveData.isWithinLimit,\n        email: approveData.email,\n        firstname: approveData.firstname,\n        lastname: approveData.lastname,\n        productName: approveData.productName,\n      };\n\n      const loanAppId = approveData.loanAppId;\n\n      console.log(data);\n\n      setIsApproveLoading((prev) => !prev);\n\n      const approveRejectApi = await approveOrRejectLoan(data, loanAppId);\n\n      if (approveRejectApi.error) return notify(approveRejectApi.data, \"error\");\n      console.log(data);\n\n      notify(`Loan Rejection successful`, \"success\");\n      setNarrativeModalBtn((prev) => !prev);\n      setIsApproveLoading((prev) => !prev);\n      history.push(\"/pages/loanMan\");\n    } catch (error) {\n      notify(error.data, \"error\");\n      setIsApproveLoading((prev) => !prev);\n    }\n  };\n\n  const animateModal = useSpring({\n    config: {\n      duration: 250,\n    },\n    opacity: narrativeModalBtn ? 1 : 0,\n    transform: narrativeModalBtn ? `translateY(0%)` : `translateY(-100%)`,\n  });\n\n  return (\n    <>\n      {narrativeModalBtn ? (\n        <div className=\"appr-modal\">\n          <animated.div className=\"appr-inner\" style={animateModal}>\n            <div narrativeModalBtn={narrativeModalBtn}>\n              <button\n                className=\"btn appr-close-btn\"\n                onClick={() => setNarrativeModalBtn((prev) => !prev)}\n              >\n                <TimesCircleFill className=\"modal-cancel-icon\" />\n              </button>\n              <p className=\"appr-modal-text\">\n                State your reason for declining this loan request\n              </p>\n              <div>\n                <textarea\n                  onFocus={handleSetCount}\n                  onBlur={handleRemoveCount}\n                  rows=\"6\"\n                  className=\"narrative-text\"\n                  value={narrative}\n                  onChange={getNarrative}\n                  onKeyUp={textCounter}\n                  onKeyDown={textCounter}\n                ></textarea>\n                {count ? (\n                  <>\n                    <input\n                      className=\"text-count\"\n                      readOnly={true}\n                      type=\"text\"\n                      value={countValue}\n                    />\n                    <span></span>\n                  </>\n                ) : (\n                  \"\"\n                )}\n              </div>\n              <div className=\"narr-modal-btn\">\n                <button\n                  className=\"btn approve-loan-btn first-btn\"\n                  onClick={approveOrReject}\n                  disabled={isDisabled}\n                >\n                  <CheckCircleFill />\n                  &nbsp; &nbsp;\n                  {isAprroveLoading ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    \"Submit\"\n                  )}\n                </button>\n                <button\n                  className=\"btn reject-loan-btn\"\n                  onClick={() => setNarrativeModalBtn((prev) => !prev)}\n                >\n                  <TimesCircleFill />\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </animated.div>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n};\n\nexport const BookAndAcceptLoanModal = ({\n  acceptModalBtn,\n  setAcceptModalBtn,\n  acceptData,\n}) => {\n  const [isAprroveLoading, setIsApproveLoading] = useState(false);\n  const [amount, setAmount] = useState(null);\n  const [tenure, setTenure] = useState(null);\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [error, setError] = useState(\"\");\n  const history = useHistory();\n\n  const getAmount = (e) => {\n    setAmount(e.target.value);\n    if (amount && tenure) {\n      setIsDisabled(false);\n    } else {\n      setIsDisabled(true);\n    }\n    setError(\"\");\n  };\n\n  const getTenure = (e) => {\n    setTenure(e.target.value);\n    if (amount && tenure) {\n      setIsDisabled(false);\n    } else {\n      setIsDisabled(true);\n    }\n    setError(\"\");\n  };\n\n  const handleCancel = () => {\n    setAcceptModalBtn((prev) => !prev);\n    setAmount(null);\n    setTenure(null);\n    setIsDisabled(true);\n  };\n\n  const bookAndApprovedLoan = async () => {\n    try {\n      const data = {\n        narrative: acceptData.narrative,\n        isWithinLimit: acceptData.isWithinLimit,\n        status: acceptData.status,\n        email: acceptData.email,\n        firstname: acceptData.firstname,\n        lastname: acceptData.lastname,\n        productName: acceptData.productName,\n        approvedAmount: amount,\n        approvedTenure: tenure,\n        applicationDate: moment(acceptData.applicationDate).format(\"LL\"),\n      };\n\n      const loanAppId = acceptData.loanAppId;\n      //   const customerId = acceptData.customerId;\n      const limit = acceptData.limit;\n      const maxTerm = acceptData.maxTerm;\n\n      if (amount > limit) {\n        setError(`Amount should not exceed ${limit}`);\n        return;\n      }\n      if (tenure > maxTerm) {\n        setError(`Maximun tenure is ${maxTerm} months`);\n        return;\n      }\n\n      setIsApproveLoading((prev) => !prev);\n      setError(\"\");\n\n      console.log(data);\n\n      const bookLoan = await approveOrRejectLoan(data, loanAppId);\n\n      if (bookLoan.error) {\n        console.log(bookLoan);\n        return notify(bookLoan.data, \"error\");\n      }\n\n      notify(`Loan Approval successful`, \"success\");\n      setAcceptModalBtn((prev) => !prev);\n      setIsApproveLoading((prev) => !prev);\n      history.push(\"/pages/customers\");\n    } catch (error) {\n      notify(error.data, \"error\");\n      setIsApproveLoading((prev) => !prev);\n    }\n  };\n\n  const animateModal = useSpring({\n    config: {\n      duration: 250,\n    },\n    opacity: acceptModalBtn ? 1 : 0,\n    transform: acceptModalBtn ? `translateY(0%)` : `translateY(-100%)`,\n  });\n\n  return (\n    <>\n      {acceptModalBtn ? (\n        <div className=\"appr-modal\">\n          <animated.div className=\"appr-inner\" style={animateModal}>\n            <div acceptModalBtn={acceptModalBtn}>\n              <button className=\"btn appr-close-btn\" onClick={handleCancel}>\n                <TimesCircleFill className=\"modal-cancel-icon\" />\n              </button>\n              <p className=\"accept-error\">{error}</p>\n              <div className=\"accept-input\">\n                <div>\n                  <label>Approved Amount</label>\n                  <input\n                    className=\"amount-input\"\n                    type=\"number\"\n                    placeholder=\"Amount\"\n                    value={amount}\n                    onChange={getAmount}\n                  />\n                </div>\n\n                <div>\n                  <label>Approved Tenure</label>\n                  <input\n                    className=\"month-input\"\n                    type=\"number\"\n                    placeholder=\"In months\"\n                    value={tenure}\n                    onChange={getTenure}\n                  />\n                </div>\n              </div>\n              <div className=\"narr-modal-btn\">\n                <button\n                  className=\"btn approve-loan-btn first-btn\"\n                  onClick={bookAndApprovedLoan}\n                  disabled={isDisabled}\n                >\n                  <CheckCircleFill />\n                  &nbsp; &nbsp;\n                  {isAprroveLoading ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    \"Submit\"\n                  )}\n                </button>\n                <button className=\"btn reject-loan-btn\" onClick={handleCancel}>\n                  <TimesCircleFill />\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </animated.div>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n};\n\nexport const DisburseModal = ({\n  disburseModalBtn,\n  setDisburseModalBtn,\n  approveData,\n}) => {\n  const [isAprroveLoading, setIsApproveLoading] = useState(false);\n  const [loanProducts, setLoanProducts] = useState([]);\n\n  // useEffect(() => {\n  //   handleLoanProducts();\n  // }, []);\n\n  // const handleLoanProducts = async () => {\n  //   try {\n  //     const companyCode = `NG0020001`;\n  //     const products = await getLoanProducts(companyCode);\n\n  //     console.log(products);\n\n  //     if (products.error) return notify(products.message, \"error\");\n  //     setLoanProducts(products.data?.result?.data?.products);\n  //   } catch (error) {\n  //     console.log(error);\n  //     notify(\"Something went wrong\", \"error\");\n  //   }\n  // };\n\n  // const history = useHistory();\n\n  const disburse = async () => {\n    //   try {\n    //     const today = new Date();\n    //     const requestData = {\n    //       inputDate: moment(today).format(\"YYYYMMDD\"),\n    //       customerType: \"INDIVIDUAL\",\n    //       customerId: `${approveData.customerId}`,\n    //       loanAction: \"\",\n    //       loanProduct: \"\",\n    //       amountRequested: approveData.approvedAmount,\n    //       currency: \"NGN\",\n    //       interestRate: approveData.interestRate,\n    //       termRequested: approveData.approvedTenure,\n    //       loanPurpose: \"1\",\n    //       sector: \"10\",\n    //       guarantorId: approveData.guarantorId,\n    //       disburseAccount: approveData.accountNo,\n    //       repayAccount: approveData.accountNo,\n    //       chargeAccount: approveData.accountNo,\n    //     };\n    //     console.log(requestData);\n    //     loanProducts &&\n    //       loanProducts.forEach((product) => {\n    //         if (product.productDescription === approveData.productName) {\n    //           requestData.loanAction = product.productCode;\n    //           requestData.loanProduct = product.productCode;\n    //         }\n    //       });\n    //     var data = {\n    //       email: approveData.email,\n    //       firstname: approveData.firstname,\n    //       lastname: approveData.lastname,\n    //       productName: approveData.productName,\n    //       sn: \"\",\n    //       accountNo: \"\",\n    //       settlementAccount: \"\",\n    //       loanID: \"\",\n    //       customerName: \"\",\n    //       productCategory: \"\",\n    //       productType: approveData.productType,\n    //       customerType: approveData.customerType,\n    //       sector: approveData.sector,\n    //       dateGranted: \"\",\n    //       expiryDate: approveData.expiryDate,\n    //       tenorInDays: \"\",\n    //       legacyID: approveData.legacyID,\n    //       authorizedLimit: \"\",\n    //       disbursedAmount: \"\",\n    //       arrangementFee: \"\",\n    //       outstandingBalance: \"\",\n    //       interestReceivable: \"\",\n    //       grossLoans: \"\",\n    //       riskRating: \"\",\n    //       pastDueObligationPrincipal: \"\",\n    //       numberOfPaymentsOutstanding: approveData.numberOfPaymentsOutstanding,\n    //       daysPastDue: approveData.daysPastDue,\n    //       pastDueObligationInterest: approveData.pastDueObligationInterest,\n    //       subStatus: approveData.subStatus,\n    //       status: approveData.status,\n    //       contratualIntRate: approveData.contratualIntRate,\n    //       annualEffectiveInterestRate: approveData.annualEffectiveInterestRate,\n    //       restructure: approveData.restructure,\n    //       paymentFrequencyPrincipal: approveData.paymentFrequencyPrincipal,\n    //       paymentFreqInterest: approveData.paymentFreqInterest,\n    //       collateralStatus: approveData.collateralStatus,\n    //       collateralType: approveData.collateralType,\n    //       otherCollateral: approveData.otherCollateral,\n    //       collateralvalue: approveData.collateralvalue,\n    //       daysToRealization: approveData.daysToRealization,\n    //     };\n    //     // setIsApproveLoading((prev) => !prev);\n    //     const loanAppId = approveData.loanAppId;\n    //     // const loanRequest = await loanRequestBooking(requestData);\n    //     console.log(\"clicked\", requestData);\n    // if (loanRequest?.data?.error === true) {\n    //   setIsApproveLoading((prev) => !prev);\n    //   notify(loanRequest?.data?.message, \"error\");\n    //   return;\n    // }\n    // if (loanRequest?.data?.error === true) {\n    //   setIsApproveLoading((prev) => !prev);\n    //   notify(loanRequest?.data?.message, \"error\");\n    //   return;\n    // }\n    // if (loanRequest?.data?.data?.data?.status === true) {\n    //   data.loanID = loanRequest.data.ApplicationId;\n    //   const loanAccount = approveData.account_no;\n    //   const loanDetails = await getLoanDetails(loanAccount);\n    //   console.log(loanDetails);\n    //   if (loanDetails?.data?.data?.data?.status === false) {\n    //     setIsApproveLoading((prev) => !prev);\n    //     notify(loanDetails?.data?.data?.data?.message, \"error\");\n    //     return;\n    //   }\n    //   if (loanDetails?.data?.data?.data?.status === true) {\n    //     data.productCategory = loanDetails.data.loanProduct;\n    //     data.dateGranted = loanDetails.data.dateDisbursed;\n    //     data.outstandingBalance = loanDetails.data.amountDisbursed;\n    //     data.interestReceivable = loanDetails.data.interestReceivable;\n    //     data.grossLoans = loanDetails.data.amountDisbursed;\n    //     data.pastDueObligationPrincipal = loanDetails.data.overdueBalance;\n    //     data.disbursedAmount = loanDetails.data.amountDisbursed;\n    //     const disburse = await disburseLoan(data, loanAppId);\n    //     if (disburse.error) {\n    //       setIsApproveLoading((prev) => !prev);\n    //       notify(disburse.data, \"error\");\n    //       return;\n    //     }\n    //     console.log(data);\n    //     notify(`Loan disbursed successfully`, \"success\");\n    //     setDisburseModalBtn((prev) => !prev);\n    //     setIsApproveLoading((prev) => !prev);\n    //     history.push(\"/pages/loanMan\");\n    //     return;\n    //   }\n    // }\n    // notify(`Something went wrong`, \"error\");\n    // setTimeout(() => {\n    //   // setIsApproveLoading((prev) => !prev);\n    //   setDisburseModalBtn((prev) => !prev);\n    // }, 6000);\n    //     // return;\n    //   } catch (error) {\n    //     notify(error.data, \"error\");\n    //     // setIsApproveLoading(false);\n    //     setTimeout(() => {\n    //       setDisburseModalBtn((prev) => !prev);\n    //     }, 6000);\n    //     return;\n    //   }\n  };\n\n  const animateModal = useSpring({\n    config: {\n      duration: 250,\n    },\n    opacity: disburseModalBtn ? 1 : 0,\n    transform: disburseModalBtn ? `translateY(0%)` : `translateY(-100%)`,\n  });\n\n  return (\n    <>\n      {disburseModalBtn ? (\n        <div className=\"appr-modal\">\n          <animated.div className=\"appr-inner\" style={animateModal}>\n            <div disburseModalBtn={disburseModalBtn}>\n              <button\n                className=\"btn appr-close-btn\"\n                onClick={() => setDisburseModalBtn((prev) => !prev)}\n              >\n                <TimesCircleFill className=\"modal-cancel-icon\" />\n              </button>\n              <p className=\"appr-modal-text\">Proceed with loan disbursement?</p>\n              <div className=\"appr-modal-btn\">\n                <button\n                  className=\"btn approve-loan-btn first-btn\"\n                  onClick={disburse}\n                >\n                  <CheckCircleFill /> &nbsp;\n                  {isAprroveLoading ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    \"Yes\"\n                  )}\n                </button>\n\n                <button\n                  className=\"btn reject-loan-btn\"\n                  onClick={() => {\n                    setDisburseModalBtn((prev) => !prev);\n                    setIsApproveLoading((prev) => !prev);\n                  }}\n                >\n                  <TimesCircleFill />\n                  No\n                </button>\n              </div>\n            </div>\n          </animated.div>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n};\n\nexport const AcceptLoanModal = ({\n  acceptLoanModalBtn,\n  setAcceptLoanModalBtn,\n  approveData,\n}) => {\n  const [isAprroveLoading, setIsApproveLoading] = useState(false);\n\n  const acceptLoan = async () => {\n    try {\n      const data = {\n        isWithinLimit: false,\n        work_flow_level: 1,\n      };\n      const loanAppId = approveData.loanAppId;\n\n      setIsApproveLoading((prev) => !prev);\n\n      const approveRejectApi = await approveOrRejectLoan(data, loanAppId);\n\n      if (approveRejectApi.error) return notify(approveRejectApi.data, \"error\");\n\n      notify(approveRejectApi.data.text, \"success\");\n      setAcceptLoanModalBtn((prev) => !prev);\n      setIsApproveLoading((prev) => !prev);\n      window.location.reload();\n    } catch (error) {\n      notify(error.data, \"error\");\n      setIsApproveLoading((prev) => !prev);\n    }\n  };\n\n  const animateModal = useSpring({\n    config: {\n      duration: 250,\n    },\n    opacity: acceptLoanModalBtn ? 1 : 0,\n    transform: acceptLoanModalBtn ? `translateY(0%)` : `translateY(-100%)`,\n  });\n\n  return (\n    <>\n      {acceptLoanModalBtn ? (\n        <div className=\"appr-modal\">\n          <animated.div className=\"appr-inner\" style={animateModal}>\n            <div acceptLoanModalBtn={acceptLoanModalBtn}>\n              <button\n                className=\"btn appr-close-btn\"\n                onClick={() => setAcceptLoanModalBtn((prev) => !prev)}\n              >\n                <TimesCircleFill className=\"modal-cancel-icon\" />\n              </button>\n              <p className=\"appr-modal-text\">Proceed to loan acceptance?</p>\n\n              <div className=\"appr-modal-btn\">\n                <button\n                  className=\"btn approve-loan-btn first-btn\"\n                  onClick={acceptLoan}\n                >\n                  <CheckCircleFill />\n                  &nbsp; &nbsp;\n                  {isAprroveLoading ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    \"Proceed\"\n                  )}\n                </button>\n                <button\n                  className=\"btn reject-loan-btn\"\n                  onClick={() => setAcceptLoanModalBtn((prev) => !prev)}\n                >\n                  <TimesCircleFill />\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </animated.div>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n};\n\nexport const CommentModal = ({\n  commentModalBtn,\n  setCommentModalBtn,\n  commentData,\n}) => {\n  const [isAprroveLoading, setIsApproveLoading] = useState(false);\n  const [count, setCount] = useState(false);\n  const [countNum, setCountNum] = useState(1000);\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [branch, setBranch] = useState([]);\n  const [staffBranch, setStaffBranch] = useState(\"\");\n  const [comment, setComment] = useState(\"\");\n  const [getAdmin, setGetAdmin] = useState({});\n  const [adminName, setAdminName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const roles = getAdminRoles();\n\n  const email = getAdminEmail();\n\n  useEffect(() => {\n    const handleSearchAdmin = async () => {\n      setLoading(true);\n      try {\n        const response = await searchAdminProfile(email);\n        const result = await getBranches();\n\n        if (response.data.status) {\n          setGetAdmin(response.data.data);\n          setBranch(result.data);\n          setLoading(false);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    handleSearchAdmin();\n  }, [email]);\n\n  useEffect(() => {\n    setAdminName(`${getAdmin.firstname} ${getAdmin.lastname}`);\n\n    branch &&\n      branch.forEach((option) => {\n        if (parseInt(getAdmin.branch) === option.id) {\n          setStaffBranch(option.name);\n        }\n      });\n  }, [branch, getAdmin.branch, getAdmin.firstname, getAdmin.lastname]);\n\n  const handleSetCount = () => {\n    setCount((prev) => !prev);\n  };\n\n  const handleRemoveCount = () => {\n    setCount(false);\n  };\n\n  const getComment = (e) => setComment(e.target.value);\n\n  const textCounter = () => {\n    //max charcater is 120\n    const maxAmount = 1000;\n    //check if user is greater than max character\n    comment.length > maxAmount\n      ? //if input is greater than max character set textarea to only have\n        //the amount of max character entered and nothing more\n        setComment(comment.substring(0, maxAmount))\n      : //set count indicator value\n        setCountNum(maxAmount - comment.length);\n\n    //enable button if input is valid and vice verse\n    const validText = comment.trim();\n    validText.length > 20 ? setIsDisabled(false) : setIsDisabled(true);\n  };\n\n  const countValue =\n    countNum > 1\n      ? `${countNum} characters remaining`\n      : `${countNum} character remaining`;\n\n  const addLoanOfficerComment = async () => {\n    try {\n      const data = {\n        staffId: getAdmin.staff_id,\n        comment:\n          roles === \"AUDIT\"\n            ? `AUDITOR'S COMMENT: ${comment.trim()}`\n            : comment.trim(),\n        rank: getAdmin.rank,\n        fullName: adminName,\n        staffEmail: email,\n        staffBranch: staffBranch,\n        loanAppId: commentData.loanAppId,\n      };\n\n      setIsApproveLoading((prev) => !prev);\n\n      const response = await addComment(data);\n\n      if (response.error) return notify(response.data, \"error\");\n\n      notify(`Comment added successfully`, \"success\");\n\n      setIsApproveLoading((prev) => !prev);\n      setTimeout(() => {\n        setCommentModalBtn((prev) => !prev);\n        window.location.reload();\n      }, 2500);\n      return;\n    } catch (error) {\n      notify(error.message, \"error\");\n      setIsApproveLoading((prev) => !prev);\n      return;\n    }\n  };\n\n  const animateModal = useSpring({\n    config: {\n      duration: 250,\n    },\n    opacity: commentModalBtn ? 1 : 0,\n    transform: commentModalBtn ? `translateY(0%)` : `translateY(-100%)`,\n  });\n\n  return (\n    <>\n      {commentModalBtn ? (\n        <div className=\"appr-modal\">\n          <animated.div className=\"comment-inner\" style={animateModal}>\n            <div commentModalBtn={commentModalBtn}>\n              <button\n                className=\"btn appr-close-btn\"\n                onClick={() => setCommentModalBtn((prev) => !prev)}\n              >\n                <TimesCircleFill className=\"modal-cancel-icon\" />\n              </button>\n              <p className=\"appr-modal-text\">Add your comment</p>\n              <form>\n                <div\n                // className={`form-group${\n                //   isInputFocused.email ? \" input-focused\" : \"\"\n                // }`}\n                >\n                  <label htmlFor=\"staffID\">Staff ID</label>\n                  <input\n                    type=\"text\"\n                    name=\"staff_id\"\n                    id=\"staff_id\"\n                    className=\"form-control\"\n                    defaultValue={loading ? \"Loading...\" : getAdmin.staff_id}\n                    readOnly={true}\n                  />\n                </div>\n                <div>\n                  <label htmlFor=\"name\">Full Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"fullName\"\n                    id=\"fullName\"\n                    className=\"form-control\"\n                    readOnly={true}\n                    defaultValue={loading ? \"Loading...\" : adminName}\n                  />\n                </div>\n                <div\n                // className={`form-group${\n                //   isInputFocused.email ? \" input-focused\" : \"\"\n                // }`}\n                >\n                  <label htmlFor=\"rank\">Rank</label>\n                  <input\n                    type=\"text\"\n                    name=\"rank\"\n                    id=\"rank\"\n                    className=\"form-control\"\n                    readOnly={true}\n                    defaultValue={loading ? \"Loading...\" : getAdmin.rank}\n                  />\n                </div>\n\n                <div>\n                  <label htmlFor=\"branch\">Branch</label>\n                  <input\n                    type=\"text\"\n                    name=\"branch\"\n                    id=\"branch\"\n                    className=\"form-control\"\n                    readOnly={true}\n                    defaultValue={loading ? \"Loading...\" : staffBranch}\n                  />\n                </div>\n\n                <div>\n                  <label htmlFor=\"comment\">Comment</label>\n                  <textarea\n                    onFocus={handleSetCount}\n                    onBlur={handleRemoveCount}\n                    rows=\"10\"\n                    className=\"narrative-text\"\n                    value={comment}\n                    onChange={getComment}\n                    onKeyUp={textCounter}\n                    onKeyDown={textCounter}\n                  ></textarea>\n                  {count ? (\n                    <>\n                      <input\n                        className=\"text-count\"\n                        readOnly={true}\n                        type=\"text\"\n                        value={countValue}\n                      />\n                      <span></span>\n                    </>\n                  ) : (\n                    \"\"\n                  )}\n                </div>\n              </form>\n              <div className=\"narr-modal-btn\">\n                <button\n                  className=\"btn approve-loan-btn first-btn\"\n                  onClick={addLoanOfficerComment}\n                  disabled={isDisabled}\n                >\n                  <CheckCircleFill />\n                  &nbsp; &nbsp;\n                  {isAprroveLoading ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    \"Submit\"\n                  )}\n                </button>\n                <button\n                  className=\"btn reject-loan-btn\"\n                  onClick={() => setCommentModalBtn((prev) => !prev)}\n                >\n                  <TimesCircleFill />\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </animated.div>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n};\n\nexport const DeleteModal = ({\n  deleteModalBtn,\n  setDeleteModalBtn,\n  deleteData,\n}) => {\n  const history = useHistory();\n  const [isAprroveLoading, setIsApproveLoading] = useState(false);\n  const animateModal = useSpring({\n    config: {\n      duration: 250,\n    },\n    opacity: deleteModalBtn ? 1 : 0,\n    transform: deleteModalBtn ? `translateY(0%)` : `translateY(-100%)`,\n  });\n\n  const handleDeleteProfile = async () => {\n    setIsApproveLoading(true);\n    try {\n      const id = deleteData.id;\n\n      const response = await deleteAdminAccount(id);\n\n      if (response.error) {\n        notify(response.message, \"error\");\n        setIsApproveLoading(false);\n        return;\n      }\n      notify(response.message, \"success\");\n      setIsApproveLoading(false);\n      history.push(\"/pages/superAdmin\");\n      return;\n    } catch (error) {\n      notify(\"Something went wrong\", \"success\");\n      setIsApproveLoading(false);\n      return;\n    }\n  };\n\n  return (\n    <>\n      {deleteModalBtn ? (\n        <div className=\"appr-modal\">\n          <animated.div className=\"appr-inner\" style={animateModal}>\n            <div deleteModalBtn={deleteModalBtn}>\n              <button\n                className=\"btn appr-close-btn\"\n                onClick={() => setDeleteModalBtn((prev) => !prev)}\n              >\n                <TimesCircleFill className=\"modal-cancel-icon\" />\n              </button>\n              <p className=\"appr-modal-text\">\n                {`Are you sure you want to delete ${deleteData.adminName}'s ${\n                  deleteData.adminRole ? deleteData.adminRole : \"\"\n                } profile?`}\n              </p>\n\n              <div className=\"narr-modal-btn\">\n                <button\n                  className=\"btn approve-loan-btn first-btn\"\n                  onClick={handleDeleteProfile}\n                  disabled={isAprroveLoading ? true : false}\n                >\n                  <CheckCircleFill />\n                  &nbsp; &nbsp;\n                  {isAprroveLoading ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    \"Delete\"\n                  )}\n                </button>\n                <button\n                  className=\"btn reject-loan-btn\"\n                  onClick={() => setDeleteModalBtn((prev) => !prev)}\n                >\n                  <TimesCircleFill />\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </animated.div>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}