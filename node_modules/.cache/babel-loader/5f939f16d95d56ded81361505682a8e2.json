{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/xerde2/Downloads/npf-admin-web/src/components/login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport sideImg from \"../assets/img/side-img.png\";\nimport logo from \"../assets/img/logo-main.png\";\nimport { ReactComponent as ArrowRightCircle } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/arrow-right-circle.svg\";\nimport { ReactComponent as EyeFill } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/eye-fill.svg\";\nimport { ReactComponent as EyeSlashFill } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/eye-slash-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/spinner.svg\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"./utilities\";\nimport notify from \"../utils/notification\";\nimport { signInAdmin } from \"../services/authService\";\n\nconst Login = props => {\n  _s();\n\n  const auth = useAuth();\n  const [showPassword, setShowPassword] = useState(false);\n  const [isInputFocused, setInputFocused] = useState({\n    email: false,\n    password: false\n  });\n  const [userInputs, setInputs] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [isLoading, setLoading] = useState(false);\n  const [loginErrorMessage, setLoginErrorMessage] = useState(\"\");\n  const history = useHistory();\n  const location = useLocation();\n  useEffect(() => {\n    //remove modal reminants\n    const body = document.querySelector(\"body\");\n    body.classList.remove(\"modal-open\");\n    body.style.paddingRight = \"\";\n    const modalBackdrop = document.querySelector(\".modal-backdrop\");\n    if (modalBackdrop) modalBackdrop.remove();\n  }, []);\n  useEffect(() => {\n    // if (auth.user) history.push(\"/pages/customers\"); //redirect if there's token\n    if (auth.user && auth.user.includes(\"LOAN OFFICER\")) {\n      history.push(\"/pages/loanMan\");\n      return;\n    } else if (auth.user && auth.user.includes(\"CSO\")) {\n      history.push(\"/pages/customers\");\n      return;\n    } else if (auth.user && auth.user.includes(\"AUDIT\")) {\n      history.push(\"/pages/customers\");\n      return;\n    } else if (auth.user && auth.user.includes(\"SUPER ADMIN\")) {\n      history.push(\"/pages/superAdmin\");\n      return;\n    }\n  }, [auth.user, history]);\n  console.log(auth);\n\n  const handleShowPassword = e => setShowPassword(prev => !prev);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setLoginErrorMessage(\"\");\n    setInputs(prev => ({ ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleInputFocused = e => {\n    const {\n      name\n    } = e.target;\n    setInputFocused(prev => ({ ...prev,\n      [name]: true\n    }));\n  };\n\n  const handleInputBlur = e => {\n    const {\n      name\n    } = e.target;\n    setInputFocused(prev => ({ ...prev,\n      [name]: false\n    }));\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setLoginErrorMessage(\"\");\n    const {\n      from\n    } = location.state || {\n      from: {\n        pathname: \"/pages\"\n      }\n    };\n\n    try {\n      const result = await signInAdmin(userInputs.email, userInputs.password);\n      setLoading(false);\n      if (!result.token) return setLoginErrorMessage(\"Incorrect email or password.\");\n      notify(result.message, \"success\");\n      auth.signin(() => {\n        if (auth.user && auth.user.includes(\"LOAN OFFICER\")) {\n          history.push(\"/pages/loanMan\");\n          return;\n        } else if (auth.user && auth.user.includes(\"CSO\")) {\n          history.push(\"/pages/customers\");\n          return;\n        } else if (auth.user && auth.user.includes(\"AUDIT\")) {\n          history.push(\"/pages/customers\");\n          return;\n        } else if (auth.user && auth.user.includes(\"SUPER ADMIN\")) {\n          history.push(\"/pages/superAdmin\");\n          return;\n        } else {\n          history.replace(from);\n          return;\n        }\n      });\n    } catch (error) {\n      var _error$toLowerCase, _error$toLowerCase$ca, _error$toLowerCase$ca2, _error$message, _error$message$toLowe, _error$message$toLowe2, _error$message$toLowe3, _error$message2, _error$message2$toLow, _error$message2$toLow2, _error$message2$toLow3;\n\n      setLoading(false);\n      const msg = (error === null || error === void 0 ? void 0 : (_error$toLowerCase = error.toLowerCase) === null || _error$toLowerCase === void 0 ? void 0 : (_error$toLowerCase$ca = (_error$toLowerCase$ca2 = _error$toLowerCase.call(error)).includes) === null || _error$toLowerCase$ca === void 0 ? void 0 : _error$toLowerCase$ca.call(_error$toLowerCase$ca2, \"unauth\")) ? \"Incorrect email or password.\" : (error === null || error === void 0 ? void 0 : (_error$message = error.message) === null || _error$message === void 0 ? void 0 : (_error$message$toLowe = _error$message.toLowerCase) === null || _error$message$toLowe === void 0 ? void 0 : (_error$message$toLowe2 = (_error$message$toLowe3 = _error$message$toLowe.call(_error$message)).includes) === null || _error$message$toLowe2 === void 0 ? void 0 : _error$message$toLowe2.call(_error$message$toLowe3, \"network\")) ? \"Network Error\" : (error === null || error === void 0 ? void 0 : (_error$message2 = error.message) === null || _error$message2 === void 0 ? void 0 : (_error$message2$toLow = _error$message2.toLowerCase) === null || _error$message2$toLow === void 0 ? void 0 : (_error$message2$toLow2 = (_error$message2$toLow3 = _error$message2$toLow.call(_error$message2)).includes) === null || _error$message2$toLow2 === void 0 ? void 0 : _error$message2$toLow2.call(_error$message2$toLow3, \"timeout\")) ? \"Service Timeout, Try Again.\" : \"Something went wrong!\";\n      setLoginErrorMessage(msg);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"animated fadeIn delay-05s\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"mx-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-img-holder\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: sideImg,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-form-container mx-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"mx-auto\",\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"logo-holder\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: logo,\n                  alt: \"logo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-weight-bold\",\n                children: \"Admin Back Office\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Kindly provide admin login details to proceed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `form-group${isInputFocused.email ? \" input-focused\" : \"\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                name: \"email\",\n                id: \"email\",\n                className: \"form-control\",\n                required: true,\n                onBlur: handleInputBlur,\n                onFocus: handleInputFocused,\n                onChange: handleChange,\n                value: userInputs.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `form-group${isInputFocused.password ? \" input-focused\" : \"\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"password\",\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: showPassword ? \"text\" : \"password\",\n                name: \"password\",\n                id: \"password\",\n                className: \"form-control\",\n                required: true,\n                onBlur: handleInputBlur,\n                onFocus: handleInputFocused,\n                onChange: handleChange,\n                value: userInputs.password\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"show-password-btn\",\n                onClick: handleShowPassword,\n                children: showPassword ? /*#__PURE__*/_jsxDEV(EyeSlashFill, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 35\n                }, this) : /*#__PURE__*/_jsxDEV(EyeFill, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 54\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this), loginErrorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"custom invalid-feedback\",\n              children: loginErrorMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"signin-btn btn\",\n              type: \"submit\",\n              children: [\"Sign In\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `${isLoading ? \"loading\" : \"\"}`,\n                children: isLoading ? /*#__PURE__*/_jsxDEV(SpinnerIcon, {\n                  className: \"rotating\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(ArrowRightCircle, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"overlay-div\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"OTcon8zmj6RLv9V6/OfT45kiOqA=\", false, function () {\n  return [useAuth, useHistory, useLocation];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/login.js"],"names":["React","useEffect","useState","sideImg","logo","Link","useHistory","useLocation","useAuth","notify","signInAdmin","Login","props","auth","showPassword","setShowPassword","isInputFocused","setInputFocused","email","password","userInputs","setInputs","isLoading","setLoading","loginErrorMessage","setLoginErrorMessage","history","location","body","document","querySelector","classList","remove","style","paddingRight","modalBackdrop","user","includes","push","console","log","handleShowPassword","e","prev","handleChange","name","value","target","handleInputFocused","handleInputBlur","handleSubmit","preventDefault","from","state","pathname","result","token","message","signin","replace","error","msg","toLowerCase"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport sideImg from \"../assets/img/side-img.png\";\nimport logo from \"../assets/img/logo-main.png\";\nimport { ReactComponent as ArrowRightCircle } from \"../assets/icons/arrow-right-circle.svg\";\nimport { ReactComponent as EyeFill } from \"../assets/icons/eye-fill.svg\";\nimport { ReactComponent as EyeSlashFill } from \"../assets/icons/eye-slash-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../assets/icons/spinner.svg\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"./utilities\";\nimport notify from \"../utils/notification\";\nimport { signInAdmin } from \"../services/authService\";\nconst Login = (props) => {\n  const auth = useAuth();\n\n  const [showPassword, setShowPassword] = useState(false);\n  const [isInputFocused, setInputFocused] = useState({\n    email: false,\n    password: false,\n  });\n  const [userInputs, setInputs] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [isLoading, setLoading] = useState(false);\n  const [loginErrorMessage, setLoginErrorMessage] = useState(\"\");\n\n  const history = useHistory();\n  const location = useLocation();\n\n  useEffect(() => {\n    //remove modal reminants\n    const body = document.querySelector(\"body\");\n    body.classList.remove(\"modal-open\");\n    body.style.paddingRight = \"\";\n    const modalBackdrop = document.querySelector(\".modal-backdrop\");\n    if (modalBackdrop) modalBackdrop.remove();\n  }, []);\n\n  useEffect(() => {\n    // if (auth.user) history.push(\"/pages/customers\"); //redirect if there's token\n\n    if (auth.user && auth.user.includes(\"LOAN OFFICER\")) {\n      history.push(\"/pages/loanMan\");\n      return;\n    } else if (auth.user && auth.user.includes(\"CSO\")) {\n      history.push(\"/pages/customers\");\n      return;\n    } else if (auth.user && auth.user.includes(\"AUDIT\")) {\n      history.push(\"/pages/customers\");\n      return;\n    } else if (auth.user && auth.user.includes(\"SUPER ADMIN\")) {\n      history.push(\"/pages/superAdmin\");\n      return;\n    }\n  }, [auth.user, history]);\n\n  console.log(auth);\n\n  const handleShowPassword = (e) => setShowPassword((prev) => !prev);\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setLoginErrorMessage(\"\");\n    setInputs((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleInputFocused = (e) => {\n    const { name } = e.target;\n    setInputFocused((prev) => ({\n      ...prev,\n      [name]: true,\n    }));\n  };\n\n  const handleInputBlur = (e) => {\n    const { name } = e.target;\n    setInputFocused((prev) => ({\n      ...prev,\n      [name]: false,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setLoginErrorMessage(\"\");\n    const { from } = location.state || { from: { pathname: \"/pages\" } };\n    try {\n      const result = await signInAdmin(userInputs.email, userInputs.password);\n      setLoading(false);\n\n      if (!result.token)\n        return setLoginErrorMessage(\"Incorrect email or password.\");\n      notify(result.message, \"success\");\n      auth.signin(() => {\n        if (auth.user && auth.user.includes(\"LOAN OFFICER\")) {\n          history.push(\"/pages/loanMan\");\n          return;\n        } else if (auth.user && auth.user.includes(\"CSO\")) {\n          history.push(\"/pages/customers\");\n          return;\n        } else if (auth.user && auth.user.includes(\"AUDIT\")) {\n          history.push(\"/pages/customers\");\n          return;\n        } else if (auth.user && auth.user.includes(\"SUPER ADMIN\")) {\n          history.push(\"/pages/superAdmin\");\n          return;\n        } else {\n          history.replace(from);\n          return;\n        }\n      });\n    } catch (error) {\n      setLoading(false);\n      const msg = error?.toLowerCase?.().includes?.(\"unauth\")\n        ? \"Incorrect email or password.\"\n        : error?.message?.toLowerCase?.().includes?.(\"network\")\n        ? \"Network Error\"\n        : error?.message?.toLowerCase?.().includes?.(\"timeout\")\n        ? \"Service Timeout, Try Again.\"\n        : \"Something went wrong!\";\n      setLoginErrorMessage(msg);\n    }\n  };\n  return (\n    <article className=\"animated fadeIn delay-05s\">\n      <section className=\"mx-auto\">\n        <div className=\"login-wrapper\">\n          <div className=\"left-img-holder\">\n            <img src={sideImg} alt=\"\" />\n          </div>\n          <div className=\"login-form-container mx-auto\">\n            <form className=\"mx-auto\" onSubmit={handleSubmit}>\n              <div className=\"form-header\">\n                <div className=\"logo-holder\">\n                  <img src={logo} alt=\"logo\" />\n                </div>\n                <h3 className=\"font-weight-bold\">Admin Back Office</h3>\n                <p>Kindly provide admin login details to proceed</p>\n              </div>\n              <div\n                className={`form-group${\n                  isInputFocused.email ? \" input-focused\" : \"\"\n                }`}\n              >\n                <label htmlFor=\"email\">Email</label>\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  id=\"email\"\n                  className=\"form-control\"\n                  required\n                  onBlur={handleInputBlur}\n                  onFocus={handleInputFocused}\n                  onChange={handleChange}\n                  value={userInputs.email}\n                />\n              </div>\n\n              <div\n                className={`form-group${\n                  isInputFocused.password ? \" input-focused\" : \"\"\n                }`}\n              >\n                <label htmlFor=\"password\">Password</label>\n                <input\n                  type={showPassword ? \"text\" : \"password\"}\n                  name=\"password\"\n                  id=\"password\"\n                  className=\"form-control\"\n                  required\n                  onBlur={handleInputBlur}\n                  onFocus={handleInputFocused}\n                  onChange={handleChange}\n                  value={userInputs.password}\n                />\n                <button\n                  type=\"button\"\n                  className=\"show-password-btn\"\n                  onClick={handleShowPassword}\n                >\n                  {showPassword ? <EyeSlashFill /> : <EyeFill />}\n                </button>\n              </div>\n              {loginErrorMessage && (\n                <div className=\"custom invalid-feedback\">\n                  {loginErrorMessage}\n                </div>\n              )}\n              <button className=\"signin-btn btn\" type=\"submit\">\n                Sign In\n                <span className={`${isLoading ? \"loading\" : \"\"}`}>\n                  {isLoading ? (\n                    <SpinnerIcon className=\"rotating\" />\n                  ) : (\n                    <ArrowRightCircle />\n                  )}\n                </span>\n                <div className=\"overlay-div\"></div>\n              </button>\n            </form>\n\n            {/* <div className=\"container-fluid other-links\">\n              <div className=\"row\">\n                <div className=\"col\">\n                  <Link to=\"/forgotpassword\">Forgot Password</Link>\n                </div>\n                <div className=\"col\">\n                  <Link to=\"/signup\">Create Account</Link>\n                </div>\n              </div>\n            </div> */}\n          </div>\n        </div>\n      </section>\n    </article>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}