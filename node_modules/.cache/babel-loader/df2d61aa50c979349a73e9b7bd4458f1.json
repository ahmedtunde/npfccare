{"ast":null,"code":"import _regeneratorRuntime from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import face from\"../../assets/img/placeholder-img.png\";import{ReactComponent as SearchIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/search.svg\";import{ReactComponent as PlusIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/icons8-plus.svg\";import{ReactComponent as ArrowLeftShortCircleFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/arrow-left-short-circle-fill.svg\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/spinner.svg\";import{ReactComponent as NothingFoundIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/nothing-found.svg\";import{ReactComponent as MenuIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/menu.svg\";import{useState,useEffect,useCallback}from\"react\";import ReactPaginate from\"react-paginate\";import LoanCustomerCard from\"./loanCustomerCard\";import RunningLoans from\"./runningLoans\";import{useHistory,useRouteMatch}from\"react-router-dom\";import{getBranches,getPendingLoans}from\"../../services/loanService\";import numeral from\"numeral\";import jwt_decode from\"jwt-decode\";import{useAuth}from\"../utilities\";import{LoanErrorHandler,validateToken}from\"../../utils/errorHandler\";import notify from\"../../utils/notification\";import{getAccessToken,getAdminName,getBranchId,getRoles}from\"../../utils/localStorageService\";import{easternRegion,northernRegion,westernRegion}from\"../../utils/constant\";var AllLoanApplications=function AllLoanApplications(props){var _allLoans$showCustome2,_allLoans$showCustome3,_allLoans$showCustome4,_allLoans$showCustome5;var history=useHistory();var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path;var adminName=getAdminName();var auth=useAuth();// useCallback ensures that handle error function isn't recreated on every render\nvar handleError=useCallback(function(errorObject,notify,cb){return LoanErrorHandler(auth)(errorObject,notify,cb);},[auth]);var _useState=useState({inProcess:[],approved:[],declined:[],running:[],paid:[]}),_useState2=_slicedToArray(_useState,2),allLoans=_useState2[0],setLoans=_useState2[1];var _useState3=useState(5),_useState4=_slicedToArray(_useState3,2),itemsPerPage=_useState4[0],setItemsPerPage=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(\"inProcess\"),_useState8=_slicedToArray(_useState7,2),showCustomers=_useState8[0],setShowCustomers=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setLoading=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),branches=_useState12[0],setBranches=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),branchesId=_useState14[0],setBranchesId=_useState14[1];var _useState15=useState({new_applications:0,upcoming_disbursement:0,total_loan_value:0,total_repayments:0}),_useState16=_slicedToArray(_useState15,2),dashboardItems=_useState16[0],setDashboardItems=_useState16[1];var HQ_ID=Number(process.env.REACT_APP_HQ_ID);var WQ_ID=Number(process.env.REACT_APP_WQ_ID);var NQ_ID=Number(process.env.REACT_APP_NQ_ID);var EQ_ID=Number(process.env.REACT_APP_EQ_ID);var adminBranchId=getBranchId();var roles=getRoles();var idNum=Number(adminBranchId);var token=getAccessToken();useEffect(function(){validateToken(token,history,jwt_decode,auth,notify);},[auth,history,token]);useEffect(function(){function handleGetAllLoanApplications(){return _handleGetAllLoanApplications.apply(this,arguments);}function _handleGetAllLoanApplications(){_handleGetAllLoanApplications=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _result$data,_result$data2,_result$data3,_result$data4,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return getPendingLoans();case 4:result=_context.sent;setLoading(false);if(result===null||result===void 0?void 0:(_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.loans)setLoans(result===null||result===void 0?void 0:(_result$data2=result.data)===null||_result$data2===void 0?void 0:_result$data2.loans);if(result===null||result===void 0?void 0:(_result$data3=result.data)===null||_result$data3===void 0?void 0:_result$data3.dashboard)setDashboardItems(result===null||result===void 0?void 0:(_result$data4=result.data)===null||_result$data4===void 0?void 0:_result$data4.dashboard);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);handleError(_context.t0,notify,function(){return setLoading(false);});case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _handleGetAllLoanApplications.apply(this,arguments);}handleGetAllLoanApplications();// console.log('newc', customer);\n},[handleError]);// console.log(branchesId, branches);\nuseEffect(function(){var northernRegionIds=[];var easternRegionIds=[];var westernRegionIds=[];var handleGetBranches=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var getAllBranches;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getBranches();case 2:getAllBranches=_context2.sent;if(getAllBranches===null||getAllBranches===void 0?void 0:getAllBranches.data)setBranches(getAllBranches===null||getAllBranches===void 0?void 0:getAllBranches.data);// console.log(getAllBranches.data);\nif(getAllBranches){branches.forEach(function(item){if(northernRegion.includes(item.name.toLowerCase())){northernRegionIds.push(item.id);}if(easternRegion.includes(item.name.toLowerCase())){easternRegionIds.push(item.id);}if(westernRegion.includes(item.name.toLowerCase())){westernRegionIds.push(item.id);}});if(easternRegionIds&&easternRegionIds.includes(idNum)){setBranchesId(easternRegionIds);}else if(northernRegionIds&&northernRegionIds.includes(idNum)){setBranchesId(northernRegionIds);}else if(westernRegionIds&&westernRegionIds.includes(idNum)){setBranchesId(westernRegionIds);}else{setBranchesId([]);}// console.log(northernRegionIds, easternRegionIds, branchesId);\n}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleGetBranches(){return _ref.apply(this,arguments);};}();handleGetBranches();},[branches,idNum]);var handleNavigateToCustomer=function handleNavigateToCustomer(e){var element=e.target;if(!element.classList.contains(\"action-btn\"))return;var userId=element.dataset.userId;// console.log(userId);\n// const requestedCustomer = customers[customers.findIndex(v => v.id.toString() === userId)];\n// history.push(`${path}/${userId}`, {requestedCustomer: requestedCustomer});\nif(showCustomers===\"inProcess\"){history.push(\"\".concat(path,\"/inProcess?id=\").concat(userId));return;}if(showCustomers===\"running\"||showCustomers===\"paid\"){history.push(\"\".concat(path,\"/schedule?id=\").concat(userId));return;}history.push(\"\".concat(path,\"/customer?id=\").concat(userId));};// let customerCount = 0;\nvar customerCount=function customerCount(){var _allLoans$showCustome;var countArr=[];(_allLoans$showCustome=allLoans[showCustomers])===null||_allLoans$showCustome===void 0?void 0:_allLoans$showCustome.forEach(function(customer){// check.push(customer.approvalBranch_id);\nif(idNum===HQ_ID){countArr.push(customer.approvalBranch_id);}else if(idNum===customer.approvalBranch_id){var checkCount=[];checkCount.push(customer.approvalBranch_id);for(var _i=0,_checkCount=checkCount;_i<_checkCount.length;_i++){var count=_checkCount[_i];if(count)countArr.push(count);}}else if(idNum===NQ_ID&&branchesId.includes(customer.approvalBranch_id)){var _checkCount2=[];_checkCount2.push(customer.approvalBranch_id);for(var _i2=0,_checkCount3=_checkCount2;_i2<_checkCount3.length;_i2++){var _count=_checkCount3[_i2];if(_count)countArr.push(_count);}}else if(idNum===WQ_ID&&branchesId.includes(customer.approvalBranch_id)){var _checkCount4=[];_checkCount4.push(customer.approvalBranch_id);for(var _i3=0,_checkCount5=_checkCount4;_i3<_checkCount5.length;_i3++){var _count2=_checkCount5[_i3];if(_count2)countArr.push(_count2);}}else if(idNum===EQ_ID&&branchesId.includes(customer.approvalBranch_id)){var _checkCount6=[];_checkCount6.push(customer.approvalBranch_id);for(var _i4=0,_checkCount7=_checkCount6;_i4<_checkCount7.length;_i4++){var _count3=_checkCount7[_i4];if(_count3)countArr.push(_count3);}}});return countArr.length;};var upcomingDisbursement=function upcomingDisbursement(){var amount=0;allLoans[\"approved\"].forEach(function(customer){// console.log(idNum, customer.approvalBranch_id)\nif(idNum===HQ_ID){amount+=customer.approved_amount;}else if(idNum===customer.approvalBranch_id){amount+=customer.approved_amount;}else if(idNum===NQ_ID&&branchesId.includes(customer.approvalBranch_id)){amount+=customer.approved_amount;}else if(idNum===WQ_ID&&branchesId.includes(customer.approvalBranch_id)){amount+=customer.approved_amount;}else if(idNum===EQ_ID&&branchesId.includes(customer.approvalBranch_id)){amount+=customer.approved_amount;}});// handleBranches();\nreturn amount;};var totalLoanValue=function totalLoanValue(){var amount=0;var disbursedLoans=upcomingDisbursement();allLoans[\"running\"].forEach(function(customer){if(idNum===HQ_ID){amount+=customer.approved_amount;}else if(idNum===customer.approvalBranch_id){amount+=customer.approved_amount;}else if(idNum===NQ_ID&&branchesId.includes(customer.approvalBranch_id)){amount+=customer.approved_amount;}else if(idNum===WQ_ID&&branchesId.includes(customer.approvalBranch_id)){amount+=customer.approved_amount;}else if(idNum===EQ_ID&&branchesId.includes(customer.approvalBranch_id)){amount+=customer.approved_amount;}});return amount+disbursedLoans;};var totalRepayments=function totalRepayments(){var amount=0;allLoans[\"paid\"].forEach(function(customer){if(idNum===HQ_ID){amount+=customer.approved_amount;}else if(idNum===customer.approvalBranch_id){amount+=customer.approved_amount;}else if(idNum===NQ_ID&&branchesId.includes(customer.approvalBranch_id)){amount+=customer.approved_amount;}else if(idNum===WQ_ID&&branchesId.includes(customer.approvalBranch_id)){amount+=customer.approved_amount;}else if(idNum===EQ_ID&&branchesId.includes(customer.approvalBranch_id)){amount+=customer.approved_amount;}});return amount;};var applicationCount=function applicationCount(){var appCount;switch(showCustomers){case\"paid\":appCount=\"Closed Applications\";break;case\"approved\":appCount=\"Approved Applications\";break;case\"declined\":appCount=\"Declined Applications\";break;case\"running\":appCount=\"Running Applications\";break;default:appCount=\"New Applications\";}return appCount;};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"loans-header\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Loan Management\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"small-admin-details\",children:[/*#__PURE__*/_jsx(\"img\",{src:face,alt:\"\"}),adminName||\"NPF Admin\",/*#__PURE__*/_jsx(\"i\",{className:\"arrow down\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"loan-dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loan-dashboard-card row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3 side-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"side-icon-inner color-purplish bg-color-purplish\",style:{paddingRight:\"18px\",paddingLeft:\"18px\"},children:/*#__PURE__*/_jsx(MenuIcon,{})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-details col-9\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-content\",children:numeral(customerCount()).format(\"0,0\")}),/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:applicationCount()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"loan-dashboard-card row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3 side-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"side-icon-inner bg-color-blueish color-blueish\",children:\"\\u20A6\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-details col-9\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[\"\\u20A6 \",numeral(upcomingDisbursement()).format(\"0,0.00\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"Upcoming Disbursement\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"loan-dashboard-card row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3 side-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"side-icon-inner bg-color-redish color-redish\",children:\"\\u20A6\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-details col-9\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[\"\\u20A6 \",numeral(totalLoanValue()).format(\"0,0.00\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"Total Loan Value\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"loan-dashboard-card row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3 side-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"side-icon-inner color-greenish bg-color-greenish\",children:\"\\u20A6\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-details col-9\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[\"\\u20A6 \",numeral(totalRepayments()).format(\"0,0.00\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"Total Repayments\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"loan-nav-wrapper\",children:[/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"a\",{className:showCustomers===\"inProcess\"?\"active\":\"\",onClick:function onClick(e){return setShowCustomers(\"inProcess\");},children:\"In process\"}),/*#__PURE__*/_jsx(\"a\",{className:showCustomers===\"approved\"?\"active\":\"\",onClick:function onClick(e){return setShowCustomers(\"approved\");},children:\"Approved\"}),/*#__PURE__*/_jsx(\"a\",{className:showCustomers===\"declined\"?\"active\":\"\",onClick:function onClick(e){return setShowCustomers(\"declined\");},children:\"Declined\"}),/*#__PURE__*/_jsx(\"a\",{className:showCustomers===\"running\"?\"active\":\"\",onClick:function onClick(e){return setShowCustomers(\"running\");},children:\"Running\"}),/*#__PURE__*/_jsx(\"a\",{className:showCustomers===\"paid\"?\"active\":\"\",onClick:function onClick(e){return setShowCustomers(\"paid\");},children:\"Closed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"some-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-div d-none\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"search\",children:/*#__PURE__*/_jsx(SearchIcon,{})}),/*#__PURE__*/_jsx(\"input\",{type:\"search\",className:\"form-control\",name:\"search\",id:\"search\",\"aria-label\":\"Search for customers\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn create-admin-btn\",onClick:function onClick(e){return history.push(\"\".concat(path,\"/new/selectCustomer\"));},children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(PlusIcon,{})}),\"New application\"]})]})]}),branchesId.length>0||idNum===HQ_ID?/*#__PURE__*/_jsxs(\"main\",{className:\"loans-page customers-page\",children:[(isLoading||((_allLoans$showCustome2=allLoans[showCustomers])===null||_allLoans$showCustome2===void 0?void 0:_allLoans$showCustome2.length)===0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"searching-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"svg-holder \"+(!isLoading?\"not-loading\":\"\"),children:isLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"}):/*#__PURE__*/_jsx(NothingFoundIcon,{})}),!isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"NOTHING FOUND!\"})]}),!isLoading&&((_allLoans$showCustome3=allLoans[showCustomers])===null||_allLoans$showCustome3===void 0?void 0:_allLoans$showCustome3.length)>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"color-dark-text-blue\",children:[\"Entries per page:\",\" \",/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{display:\"inline-block\"},children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",onChange:function onChange(e){setItemsPerPage(e.target.value);setCurrentPage(1);},value:itemsPerPage,children:[/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:20,children:\"20\"}),/*#__PURE__*/_jsx(\"option\",{value:50,children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:100,children:\"100\"}),/*#__PURE__*/_jsx(\"option\",{value:150,children:\"150\"}),/*#__PURE__*/_jsx(\"option\",{value:200,children:\"200\"})]})})]}),showCustomers===\"running\"?/*#__PURE__*/_jsx(RunningLoans,{idNum:idNum,HQ_ID:HQ_ID,EQ_ID:EQ_ID,NQ_ID:NQ_ID,WQ_ID:WQ_ID,branchesId:branchesId,customers:allLoans[showCustomers],roles:roles}):/*#__PURE__*/_jsxs(\"table\",{className:\"table table-borderless table-hover\",onClick:handleNavigateToCustomer,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"color-dark-text-blue\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"selCustomer-all\"})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Customer\"}),(showCustomers===\"submitted\"||showCustomers===\"inProcess\")&&/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Loan Details\"}),showCustomers!==\"submitted\"&&showCustomers!==\"inProcess\"&&/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Customer Request\"}),(showCustomers===\"approved\"||showCustomers===\"paid\")&&/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Bank Offer\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Repayment Method\"}),showCustomers===\"submitted\"&&/*#__PURE__*/_jsxs(\"th\",{scope:\"col\",children:[\"DTI \\xA0 \\xA0\",/*#__PURE__*/_jsx(\"span\",{className:\"dti positive\",children:\"%\"})]}),showCustomers===\"inProcess\"&&/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),(showCustomers===\"inProcess\"||showCustomers===\"approved\")&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"th\",{scope:\"col\",children:[\"System Score \\xA0 \\xA0\",/*#__PURE__*/_jsx(\"span\",{className:\"dti positive\",children:\"%\"})]})}),showCustomers===\"declined\"&&/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"col-4\",children:\"Narrative\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:showCustomers===\"paid\"?\"Closed\":\"Application Date\"}),showCustomers!==\"declined\"&&/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"}),(_allLoans$showCustome4=allLoans[showCustomers])===null||_allLoans$showCustome4===void 0?void 0:_allLoans$showCustome4.map(function(customer,idx,arr){var checkItemNumber=[];if(idNum===HQ_ID){checkItemNumber.push(customer.approvalBranch_id);var initialBoundary=(currentPage-1)*itemsPerPage+1;var finalBoundary=currentPage*itemsPerPage;var itemNumber=idx+1;if(itemNumber<initialBoundary||itemNumber>finalBoundary)return null;return/*#__PURE__*/_jsx(LoanCustomerCard,{customerDetails:customer,showMajorDetails:true,shownCustomerCategory:showCustomers,roles:roles,children:idx!==arr.length-1&&/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"})},customer.id);}else if(idNum===customer.approvalBranch_id){checkItemNumber.push(customer.approvalBranch_id);var _initialBoundary=(currentPage-1)*itemsPerPage+1;var _finalBoundary=currentPage*itemsPerPage;var _itemNumber=idx+1;if(_itemNumber<_initialBoundary||_itemNumber>_finalBoundary)return null;return/*#__PURE__*/_jsx(LoanCustomerCard,{customerDetails:customer,showMajorDetails:true,shownCustomerCategory:showCustomers,roles:roles,children:idx!==arr.length-1&&/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"})},customer.id);}else if(idNum===NQ_ID&&branchesId.includes(customer.approvalBranch_id)){checkItemNumber.push(customer.approvalBranch_id);var _initialBoundary2=(currentPage-1)*itemsPerPage+1;var _finalBoundary2=currentPage*itemsPerPage;var _itemNumber2=idx+1;if(_itemNumber2<_initialBoundary2||_itemNumber2>_finalBoundary2)return null;return/*#__PURE__*/_jsx(LoanCustomerCard,{customerDetails:customer,showMajorDetails:true,shownCustomerCategory:showCustomers,roles:roles,children:idx!==arr.length-1&&/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"})},customer.id);}else if(idNum===EQ_ID&&branchesId.includes(customer.approvalBranch_id)){checkItemNumber.push(customer.approvalBranch_id);var _initialBoundary3=(currentPage-1)*itemsPerPage+1;var _finalBoundary3=currentPage*itemsPerPage;var _itemNumber3=idx+1;if(_itemNumber3<_initialBoundary3||_itemNumber3>_finalBoundary3)return null;return/*#__PURE__*/_jsx(LoanCustomerCard,{customerDetails:customer,showMajorDetails:true,shownCustomerCategory:showCustomers,roles:roles,children:idx!==arr.length-1&&/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"})},customer.id);}else if(idNum===WQ_ID&&branchesId.includes(customer.approvalBranch_id)){checkItemNumber.push(customer.approvalBranch_id);var _initialBoundary4=(currentPage-1)*itemsPerPage+1;var _finalBoundary4=currentPage*itemsPerPage;var _itemNumber4=idx+1;if(_itemNumber4<_initialBoundary4||_itemNumber4>_finalBoundary4)return null;return/*#__PURE__*/_jsx(LoanCustomerCard,{customerDetails:customer,showMajorDetails:true,shownCustomerCategory:showCustomers,roles:roles,children:idx!==arr.length-1&&/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"})},customer.id);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"paginate-footer\",children:/*#__PURE__*/_jsx(ReactPaginate,{pageCount:Math.ceil(((_allLoans$showCustome5=allLoans[showCustomers])===null||_allLoans$showCustome5===void 0?void 0:_allLoans$showCustome5.length)/itemsPerPage),marginPagesDisplayed:2,pageRangeDisplayed:3,forcePage:currentPage-5,onPageChange:function onPageChange(selectedItem){return setCurrentPage(selectedItem.selected+1);},containerClassName:\"pagination-btns\",activeLinkClassName:\"active\",pageLinkClassName:\"btn\",previousLabel:/*#__PURE__*/_jsx(ArrowLeftShortCircleFill,{}),previousLinkClassName:\"btn icon\",nextLabel:/*#__PURE__*/_jsx(ArrowLeftShortCircleFill,{style:{transform:\"rotateY(180deg)\"}}),nextLinkClassName:\"btn icon\",disabledClassName:\"disabled\"})})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"searching-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"svg-holder \"+(!isLoading?\"not-loading\":\"\"),children:isLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"}):/*#__PURE__*/_jsx(NothingFoundIcon,{})}),!isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"NOTHING FOUND!\"})]})]});};export default AllLoanApplications;","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/loanManagement/AllLoanApplications.js"],"names":["face","useState","useEffect","useCallback","ReactPaginate","LoanCustomerCard","RunningLoans","useHistory","useRouteMatch","getBranches","getPendingLoans","numeral","jwt_decode","useAuth","LoanErrorHandler","validateToken","notify","getAccessToken","getAdminName","getBranchId","getRoles","easternRegion","northernRegion","westernRegion","AllLoanApplications","props","history","path","adminName","auth","handleError","errorObject","cb","inProcess","approved","declined","running","paid","allLoans","setLoans","itemsPerPage","setItemsPerPage","currentPage","setCurrentPage","showCustomers","setShowCustomers","isLoading","setLoading","branches","setBranches","branchesId","setBranchesId","new_applications","upcoming_disbursement","total_loan_value","total_repayments","dashboardItems","setDashboardItems","HQ_ID","Number","process","env","REACT_APP_HQ_ID","WQ_ID","REACT_APP_WQ_ID","NQ_ID","REACT_APP_NQ_ID","EQ_ID","REACT_APP_EQ_ID","adminBranchId","roles","idNum","token","handleGetAllLoanApplications","result","data","loans","dashboard","northernRegionIds","easternRegionIds","westernRegionIds","handleGetBranches","getAllBranches","forEach","item","includes","name","toLowerCase","push","id","handleNavigateToCustomer","e","element","target","classList","contains","userId","dataset","customerCount","countArr","customer","approvalBranch_id","checkCount","count","length","upcomingDisbursement","amount","approved_amount","totalLoanValue","disbursedLoans","totalRepayments","applicationCount","appCount","paddingRight","paddingLeft","format","display","value","map","idx","arr","checkItemNumber","initialBoundary","finalBoundary","itemNumber","Math","ceil","selectedItem","selected","transform"],"mappings":"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","sourcesContent":["import face from \"../../assets/img/placeholder-img.png\";\nimport { ReactComponent as SearchIcon } from \"../../assets/icons/search.svg\";\nimport { ReactComponent as PlusIcon } from \"../../assets/icons/icons8-plus.svg\";\nimport { ReactComponent as ArrowLeftShortCircleFill } from \"../../assets/icons/arrow-left-short-circle-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../../assets/icons/spinner.svg\";\nimport { ReactComponent as NothingFoundIcon } from \"../../assets/icons/nothing-found.svg\";\nimport { ReactComponent as MenuIcon } from \"../../assets/icons/menu.svg\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport ReactPaginate from \"react-paginate\";\nimport LoanCustomerCard from \"./loanCustomerCard\";\nimport RunningLoans from \"./runningLoans\";\nimport { useHistory, useRouteMatch } from \"react-router-dom\";\nimport { getBranches, getPendingLoans } from \"../../services/loanService\";\nimport numeral from \"numeral\";\nimport jwt_decode from \"jwt-decode\";\nimport { useAuth } from \"../utilities\";\nimport { LoanErrorHandler, validateToken } from \"../../utils/errorHandler\";\nimport notify from \"../../utils/notification\";\nimport {\n  getAccessToken,\n  getAdminName,\n  getBranchId,\n  getRoles,\n} from \"../../utils/localStorageService\";\nimport {\n  easternRegion,\n  northernRegion,\n  westernRegion,\n} from \"../../utils/constant\";\n\nconst AllLoanApplications = (props) => {\n  const history = useHistory();\n  const { path } = useRouteMatch();\n  const adminName = getAdminName();\n\n  const auth = useAuth();\n  // useCallback ensures that handle error function isn't recreated on every render\n  const handleError = useCallback(\n    (errorObject, notify, cb) =>\n      LoanErrorHandler(auth)(errorObject, notify, cb),\n    [auth]\n  );\n\n  const [allLoans, setLoans] = useState({\n    inProcess: [],\n    approved: [],\n    declined: [],\n    running: [],\n    paid: [],\n  });\n\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [showCustomers, setShowCustomers] = useState(\"inProcess\");\n  const [isLoading, setLoading] = useState(false);\n  const [branches, setBranches] = useState([]);\n  const [branchesId, setBranchesId] = useState([]);\n  const [dashboardItems, setDashboardItems] = useState({\n    new_applications: 0,\n    upcoming_disbursement: 0,\n    total_loan_value: 0,\n    total_repayments: 0,\n  });\n\n  const HQ_ID = Number(process.env.REACT_APP_HQ_ID);\n  const WQ_ID = Number(process.env.REACT_APP_WQ_ID);\n  const NQ_ID = Number(process.env.REACT_APP_NQ_ID);\n  const EQ_ID = Number(process.env.REACT_APP_EQ_ID);\n  const adminBranchId = getBranchId();\n  const roles = getRoles();\n  const idNum = Number(adminBranchId);\n  const token = getAccessToken();\n\n  useEffect(() => {\n    validateToken(token, history, jwt_decode, auth, notify);\n  }, [auth, history, token]);\n\n  useEffect(() => {\n    async function handleGetAllLoanApplications() {\n      try {\n        setLoading(true);\n        const result = await getPendingLoans();\n        setLoading(false);\n        if (result?.data?.loans) setLoans(result?.data?.loans);\n        if (result?.data?.dashboard) setDashboardItems(result?.data?.dashboard);\n      } catch (error) {\n        handleError(error, notify, () => setLoading(false));\n      }\n    }\n\n    handleGetAllLoanApplications();\n\n    // console.log('newc', customer);\n  }, [handleError]);\n\n  // console.log(branchesId, branches);\n\n  useEffect(() => {\n    const northernRegionIds = [];\n    const easternRegionIds = [];\n    const westernRegionIds = [];\n    const handleGetBranches = async () => {\n      const getAllBranches = await getBranches();\n      if (getAllBranches?.data) setBranches(getAllBranches?.data);\n      // console.log(getAllBranches.data);\n\n      if (getAllBranches) {\n        branches.forEach((item) => {\n          if (northernRegion.includes(item.name.toLowerCase())) {\n            northernRegionIds.push(item.id);\n          }\n\n          if (easternRegion.includes(item.name.toLowerCase())) {\n            easternRegionIds.push(item.id);\n          }\n          if (westernRegion.includes(item.name.toLowerCase())) {\n            westernRegionIds.push(item.id);\n          }\n        });\n\n        if (easternRegionIds && easternRegionIds.includes(idNum)) {\n          setBranchesId(easternRegionIds);\n        } else if (northernRegionIds && northernRegionIds.includes(idNum)) {\n          setBranchesId(northernRegionIds);\n        } else if (westernRegionIds && westernRegionIds.includes(idNum)) {\n          setBranchesId(westernRegionIds);\n        } else {\n          setBranchesId([]);\n        }\n\n        // console.log(northernRegionIds, easternRegionIds, branchesId);\n      }\n    };\n\n    handleGetBranches();\n  }, [branches, idNum]);\n\n  const handleNavigateToCustomer = (e) => {\n    const element = e.target;\n    if (!element.classList.contains(\"action-btn\")) return;\n    const userId = element.dataset.userId;\n    // console.log(userId);\n    // const requestedCustomer = customers[customers.findIndex(v => v.id.toString() === userId)];\n    // history.push(`${path}/${userId}`, {requestedCustomer: requestedCustomer});\n    if (showCustomers === \"inProcess\") {\n      history.push(`${path}/inProcess?id=${userId}`);\n      return;\n    }\n    if (showCustomers === \"running\" || showCustomers === \"paid\") {\n      history.push(`${path}/schedule?id=${userId}`);\n      return;\n    }\n    history.push(`${path}/customer?id=${userId}`);\n  };\n\n  // let customerCount = 0;\n\n  const customerCount = () => {\n    let countArr = [];\n\n    allLoans[showCustomers]?.forEach((customer) => {\n      // check.push(customer.approvalBranch_id);\n\n      if (idNum === HQ_ID) {\n        countArr.push(customer.approvalBranch_id);\n      } else if (idNum === customer.approvalBranch_id) {\n        const checkCount = [];\n        checkCount.push(customer.approvalBranch_id);\n        for (let count of checkCount) {\n          if (count) countArr.push(count);\n        }\n      } else if (\n        idNum === NQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        const checkCount = [];\n        checkCount.push(customer.approvalBranch_id);\n        for (let count of checkCount) {\n          if (count) countArr.push(count);\n        }\n      } else if (\n        idNum === WQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        const checkCount = [];\n        checkCount.push(customer.approvalBranch_id);\n        for (let count of checkCount) {\n          if (count) countArr.push(count);\n        }\n      } else if (\n        idNum === EQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        const checkCount = [];\n        checkCount.push(customer.approvalBranch_id);\n        for (let count of checkCount) {\n          if (count) countArr.push(count);\n        }\n      }\n    });\n\n    return countArr.length;\n  };\n\n  const upcomingDisbursement = () => {\n    let amount = 0;\n    allLoans[\"approved\"].forEach((customer) => {\n      // console.log(idNum, customer.approvalBranch_id)\n      if (idNum === HQ_ID) {\n        amount += customer.approved_amount;\n      } else if (idNum === customer.approvalBranch_id) {\n        amount += customer.approved_amount;\n      } else if (\n        idNum === NQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        amount += customer.approved_amount;\n      } else if (\n        idNum === WQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        amount += customer.approved_amount;\n      } else if (\n        idNum === EQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        amount += customer.approved_amount;\n      }\n    });\n    // handleBranches();\n    return amount;\n  };\n\n  const totalLoanValue = () => {\n    let amount = 0;\n    const disbursedLoans = upcomingDisbursement();\n    allLoans[\"running\"].forEach((customer) => {\n      if (idNum === HQ_ID) {\n        amount += customer.approved_amount;\n      } else if (idNum === customer.approvalBranch_id) {\n        amount += customer.approved_amount;\n      } else if (\n        idNum === NQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        amount += customer.approved_amount;\n      } else if (\n        idNum === WQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        amount += customer.approved_amount;\n      } else if (\n        idNum === EQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        amount += customer.approved_amount;\n      }\n    });\n    return amount + disbursedLoans;\n  };\n\n  const totalRepayments = () => {\n    let amount = 0;\n    allLoans[\"paid\"].forEach((customer) => {\n      if (idNum === HQ_ID) {\n        amount += customer.approved_amount;\n      } else if (idNum === customer.approvalBranch_id) {\n        amount += customer.approved_amount;\n      } else if (\n        idNum === NQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        amount += customer.approved_amount;\n      } else if (\n        idNum === WQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        amount += customer.approved_amount;\n      } else if (\n        idNum === EQ_ID &&\n        branchesId.includes(customer.approvalBranch_id)\n      ) {\n        amount += customer.approved_amount;\n      }\n    });\n    return amount;\n  };\n\n  const applicationCount = () => {\n    let appCount;\n\n    switch (showCustomers) {\n      case \"paid\":\n        appCount = \"Closed Applications\";\n        break;\n      case \"approved\":\n        appCount = \"Approved Applications\";\n        break;\n      case \"declined\":\n        appCount = \"Declined Applications\";\n        break;\n      case \"running\":\n        appCount = \"Running Applications\";\n        break;\n      default:\n        appCount = \"New Applications\";\n    }\n\n    return appCount;\n  };\n\n  return (\n    <>\n      <header className=\"loans-header\">\n        <div>\n          <h1>Loan Management</h1>\n        </div>\n        <div>\n          <div className=\"small-admin-details\">\n            <img src={face} alt=\"\" />\n            {adminName || `NPF Admin`}\n            <i className=\"arrow down\"></i>\n          </div>\n        </div>\n      </header>\n      <div className=\"loan-dashboard\">\n        <div className=\"loan-dashboard-card row\">\n          <div className=\"col-3 side-icon\">\n            <span\n              className=\"side-icon-inner color-purplish bg-color-purplish\"\n              style={{\n                paddingRight: \"18px\",\n                paddingLeft: \"18px\",\n              }}\n            >\n              <MenuIcon />\n            </span>\n          </div>\n          <div className=\"card-details col-9\">\n            <div className=\"card-content\">\n              {numeral(customerCount()).format(\"0,0\")}\n            </div>\n            <div className=\"card-title\">{applicationCount()}</div>\n          </div>\n        </div>\n        <div className=\"loan-dashboard-card row\">\n          <div className=\"col-3 side-icon\">\n            <span className=\"side-icon-inner bg-color-blueish color-blueish\">\n              &#8358;\n            </span>\n          </div>\n          <div className=\"card-details col-9\">\n            <div className=\"card-content\">\n              &#8358; {numeral(upcomingDisbursement()).format(\"0,0.00\")}\n            </div>\n            <div className=\"card-title\">Upcoming Disbursement</div>\n          </div>\n        </div>\n        <div className=\"loan-dashboard-card row\">\n          <div className=\"col-3 side-icon\">\n            <span className=\"side-icon-inner bg-color-redish color-redish\">\n              &#8358;\n            </span>\n          </div>\n          <div className=\"card-details col-9\">\n            <div className=\"card-content\">\n              &#8358; {numeral(totalLoanValue()).format(\"0,0.00\")}\n            </div>\n            <div className=\"card-title\">Total Loan Value</div>\n          </div>\n        </div>\n        <div className=\"loan-dashboard-card row\">\n          <div className=\"col-3 side-icon\">\n            <span className=\"side-icon-inner color-greenish bg-color-greenish\">\n              &#8358;\n            </span>\n          </div>\n          <div className=\"card-details col-9\">\n            <div className=\"card-content\">\n              &#8358; {numeral(totalRepayments()).format(\"0,0.00\")}\n            </div>\n            <div className=\"card-title\">Total Repayments</div>\n          </div>\n        </div>\n      </div>\n      <div className=\"loan-nav-wrapper\">\n        <nav>\n          {/* eslint-disable jsx-a11y/anchor-is-valid */}\n          <a\n            className={showCustomers === \"inProcess\" ? \"active\" : \"\"}\n            onClick={(e) => setShowCustomers(\"inProcess\")}\n          >\n            In process\n          </a>\n          <a\n            className={showCustomers === \"approved\" ? \"active\" : \"\"}\n            onClick={(e) => setShowCustomers(\"approved\")}\n          >\n            Approved\n          </a>\n          <a\n            className={showCustomers === \"declined\" ? \"active\" : \"\"}\n            onClick={(e) => setShowCustomers(\"declined\")}\n          >\n            Declined\n          </a>\n          <a\n            className={showCustomers === \"running\" ? \"active\" : \"\"}\n            onClick={(e) => setShowCustomers(\"running\")}\n          >\n            Running\n          </a>\n          <a\n            className={showCustomers === \"paid\" ? \"active\" : \"\"}\n            onClick={(e) => setShowCustomers(\"paid\")}\n          >\n            Closed\n          </a>\n          {/* eslint-enable */}\n        </nav>\n        <div className=\"some-container\">\n          <div className=\"search-div d-none\">\n            <label htmlFor=\"search\">\n              <SearchIcon />\n            </label>\n            <input\n              type=\"search\"\n              className=\"form-control\"\n              name=\"search\"\n              id=\"search\"\n              aria-label=\"Search for customers\"\n            />\n          </div>\n          <button\n            className=\"btn create-admin-btn\"\n            onClick={(e) => history.push(`${path}/new/selectCustomer`)}\n          >\n            <span>\n              <PlusIcon />\n            </span>\n            New application\n          </button>\n        </div>\n      </div>\n\n      {branchesId.length > 0 || idNum === HQ_ID ? (\n        <main className=\"loans-page customers-page\">\n          {(isLoading || allLoans[showCustomers]?.length === 0) && (\n            <div className=\"searching-block\">\n              <div\n                className={\"svg-holder \" + (!isLoading ? \"not-loading\" : \"\")}\n              >\n                {isLoading ? (\n                  <SpinnerIcon className=\"rotating\" />\n                ) : (\n                  <NothingFoundIcon />\n                )}\n              </div>\n              {!isLoading && <p>NOTHING FOUND!</p>}\n            </div>\n          )}\n          {!isLoading && allLoans[showCustomers]?.length > 0 && (\n            <>\n              <div className=\"color-dark-text-blue\">\n                Entries per page:{\" \"}\n                <div className=\"form-group\" style={{ display: \"inline-block\" }}>\n                  <select\n                    className=\"form-control\"\n                    onChange={(e) => {\n                      setItemsPerPage(e.target.value);\n                      setCurrentPage(1);\n                    }}\n                    value={itemsPerPage}\n                  >\n                    <option value={5}>5</option>\n                    <option value={10}>10</option>\n                    <option value={20}>20</option>\n                    <option value={50}>50</option>\n                    <option value={100}>100</option>\n                    <option value={150}>150</option>\n                    <option value={200}>200</option>\n                  </select>\n                </div>\n              </div>\n\n              {showCustomers === \"running\" ? (\n                <RunningLoans\n                  idNum={idNum}\n                  HQ_ID={HQ_ID}\n                  EQ_ID={EQ_ID}\n                  NQ_ID={NQ_ID}\n                  WQ_ID={WQ_ID}\n                  branchesId={branchesId}\n                  customers={allLoans[showCustomers]}\n                  roles={roles}\n                />\n              ) : (\n                <table\n                  className=\"table table-borderless table-hover\"\n                  onClick={handleNavigateToCustomer}\n                >\n                  <thead className=\"color-dark-text-blue\">\n                    <tr>\n                      <th scope=\"col\">\n                        <input type=\"checkbox\" name=\"selCustomer-all\" />\n                      </th>\n                      <th scope=\"col\">Customer</th>\n                      {/* Show loan details only when on submitted or inProcess tabs */}\n                      {(showCustomers === \"submitted\" ||\n                        showCustomers === \"inProcess\") && (\n                        <th scope=\"col\">Loan Details</th>\n                      )}\n                      {/* Show Customer Request only when NOT on submitted or inProcess tabs */}\n                      {showCustomers !== \"submitted\" &&\n                        showCustomers !== \"inProcess\" && (\n                          <th scope=\"col\">Customer Request</th>\n                        )}\n                      {/* Show Bank offer only when on approved or paid tabs */}\n                      {(showCustomers === \"approved\" ||\n                        showCustomers === \"paid\") && (\n                        <th scope=\"col\">Bank Offer</th>\n                      )}\n                      <th scope=\"col\">Repayment Method</th>\n                      {showCustomers === \"submitted\" && (\n                        <th scope=\"col\">\n                          DTI &nbsp; &nbsp;\n                          <span className=\"dti positive\">%</span>\n                        </th>\n                      )}\n                      {showCustomers === \"inProcess\" && (\n                        <th scope=\"col\">Status</th>\n                      )}\n                      {(showCustomers === \"inProcess\" ||\n                        showCustomers === \"approved\") && (\n                        <>\n                          <th scope=\"col\">\n                            System Score &nbsp; &nbsp;\n                            <span className=\"dti positive\">%</span>\n                          </th>\n                        </>\n                      )}\n                      {/* Show narrative when declined tab is active */}\n                      {showCustomers === \"declined\" && (\n                        <th scope=\"col\" className=\"col-4\">\n                          Narrative\n                        </th>\n                      )}\n                      <th scope=\"col\">\n                        {showCustomers === \"paid\"\n                          ? \"Closed\"\n                          : \"Application Date\"}\n                      </th>\n                      {/* Hide action when declined tab is active */}\n                      {showCustomers !== \"declined\" && (\n                        <th scope=\"col\">Action</th>\n                      )}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr className=\"spacer\"></tr>\n                    {allLoans[showCustomers]?.map((customer, idx, arr) => {\n                      const checkItemNumber = [];\n                      if (idNum === HQ_ID) {\n                        checkItemNumber.push(customer.approvalBranch_id);\n                        const initialBoundary =\n                          (currentPage - 1) * itemsPerPage + 1;\n                        const finalBoundary = currentPage * itemsPerPage;\n                        const itemNumber = idx + 1;\n\n                        if (\n                          itemNumber < initialBoundary ||\n                          itemNumber > finalBoundary\n                        )\n                          return null;\n                        return (\n                          <LoanCustomerCard\n                            customerDetails={customer}\n                            showMajorDetails\n                            shownCustomerCategory={showCustomers}\n                            key={customer.id}\n                            roles={roles}\n                          >\n                            {idx !== arr.length - 1 && (\n                              <tr className=\"spacer\" />\n                            )}\n                          </LoanCustomerCard>\n                        );\n                      } else if (idNum === customer.approvalBranch_id) {\n                        checkItemNumber.push(customer.approvalBranch_id);\n                        const initialBoundary =\n                          (currentPage - 1) * itemsPerPage + 1;\n                        const finalBoundary = currentPage * itemsPerPage;\n                        const itemNumber = idx + 1;\n\n                        if (\n                          itemNumber < initialBoundary ||\n                          itemNumber > finalBoundary\n                        )\n                          return null;\n                        return (\n                          <LoanCustomerCard\n                            customerDetails={customer}\n                            showMajorDetails\n                            shownCustomerCategory={showCustomers}\n                            key={customer.id}\n                            roles={roles}\n                          >\n                            {idx !== arr.length - 1 && (\n                              <tr className=\"spacer\" />\n                            )}\n                          </LoanCustomerCard>\n                        );\n                      } else if (\n                        idNum === NQ_ID &&\n                        branchesId.includes(customer.approvalBranch_id)\n                      ) {\n                        checkItemNumber.push(customer.approvalBranch_id);\n                        const initialBoundary =\n                          (currentPage - 1) * itemsPerPage + 1;\n                        const finalBoundary = currentPage * itemsPerPage;\n                        const itemNumber = idx + 1;\n\n                        if (\n                          itemNumber < initialBoundary ||\n                          itemNumber > finalBoundary\n                        )\n                          return null;\n                        return (\n                          <LoanCustomerCard\n                            customerDetails={customer}\n                            showMajorDetails\n                            shownCustomerCategory={showCustomers}\n                            key={customer.id}\n                            roles={roles}\n                          >\n                            {idx !== arr.length - 1 && (\n                              <tr className=\"spacer\" />\n                            )}\n                          </LoanCustomerCard>\n                        );\n                      } else if (\n                        idNum === EQ_ID &&\n                        branchesId.includes(customer.approvalBranch_id)\n                      ) {\n                        checkItemNumber.push(customer.approvalBranch_id);\n                        const initialBoundary =\n                          (currentPage - 1) * itemsPerPage + 1;\n                        const finalBoundary = currentPage * itemsPerPage;\n                        const itemNumber = idx + 1;\n\n                        if (\n                          itemNumber < initialBoundary ||\n                          itemNumber > finalBoundary\n                        )\n                          return null;\n                        return (\n                          <LoanCustomerCard\n                            customerDetails={customer}\n                            showMajorDetails\n                            shownCustomerCategory={showCustomers}\n                            key={customer.id}\n                            roles={roles}\n                          >\n                            {idx !== arr.length - 1 && (\n                              <tr className=\"spacer\" />\n                            )}\n                          </LoanCustomerCard>\n                        );\n                      } else if (\n                        idNum === WQ_ID &&\n                        branchesId.includes(customer.approvalBranch_id)\n                      ) {\n                        checkItemNumber.push(customer.approvalBranch_id);\n                        const initialBoundary =\n                          (currentPage - 1) * itemsPerPage + 1;\n                        const finalBoundary = currentPage * itemsPerPage;\n                        const itemNumber = idx + 1;\n\n                        if (\n                          itemNumber < initialBoundary ||\n                          itemNumber > finalBoundary\n                        )\n                          return null;\n                        return (\n                          <LoanCustomerCard\n                            customerDetails={customer}\n                            showMajorDetails\n                            shownCustomerCategory={showCustomers}\n                            key={customer.id}\n                            roles={roles}\n                          >\n                            {idx !== arr.length - 1 && (\n                              <tr className=\"spacer\" />\n                            )}\n                          </LoanCustomerCard>\n                        );\n                      }\n                    })}\n                  </tbody>\n                </table>\n              )}\n              <div className=\"paginate-footer\">\n                <ReactPaginate\n                  pageCount={Math.ceil(\n                    allLoans[showCustomers]?.length / itemsPerPage\n                  )}\n                  marginPagesDisplayed={2}\n                  pageRangeDisplayed={3}\n                  forcePage={currentPage - 5}\n                  onPageChange={(selectedItem) =>\n                    setCurrentPage(selectedItem.selected + 1)\n                  }\n                  containerClassName=\"pagination-btns\"\n                  activeLinkClassName=\"active\"\n                  pageLinkClassName=\"btn\"\n                  previousLabel={<ArrowLeftShortCircleFill />}\n                  previousLinkClassName=\"btn icon\"\n                  nextLabel={\n                    <ArrowLeftShortCircleFill\n                      style={{ transform: \"rotateY(180deg)\" }}\n                    />\n                  }\n                  nextLinkClassName=\"btn icon\"\n                  disabledClassName=\"disabled\"\n                />\n              </div>\n            </>\n          )}\n        </main>\n      ) : (\n        <div className=\"searching-block\">\n          <div className={\"svg-holder \" + (!isLoading ? \"not-loading\" : \"\")}>\n            {isLoading ? (\n              <SpinnerIcon className=\"rotating\" />\n            ) : (\n              <NothingFoundIcon />\n            )}\n          </div>\n          {!isLoading && <p>NOTHING FOUND!</p>}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default AllLoanApplications;\n"]},"metadata":{},"sourceType":"module"}