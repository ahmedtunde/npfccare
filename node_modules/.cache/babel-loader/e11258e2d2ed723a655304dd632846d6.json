{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/xerde2/Downloads/npf-admin-web/src/components/loanManagement/customer/loanSchedule.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport moment from \"moment\";\nimport { ReactComponent as NothingFoundIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/nothing-found.svg\";\nimport { ReactComponent as SpinnerIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/spinner.svg\";\nimport { ReactComponent as ArrowLeftShortCircleFill } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/arrow-left-short-circle-fill.svg\";\nimport { ReactComponent as ArrowRightShort } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/arrow-right-short.svg\";\nimport notify from \"../../../utils/notification\";\nimport errorHandler from \"../../../utils/errorHandler\";\nimport { useAuth } from \"../../utilities\";\nimport ReactPaginate from \"react-paginate\";\nimport { formatAmount } from \"../../utilities\";\nimport face from \"../../../assets/img/placeholder-img.png\";\nimport { useHistory } from \"react-router\";\nimport { loanRepaymentSchedule } from \"../../../services/loanService\";\n\nconst LoanSchedule = props => {\n  _s();\n\n  const history = useHistory();\n  const [scheduleEntries, setScheduleEntries] = useState(Array(5).fill(\"a\").map((v, idx) => ({\n    date: new Date(),\n    deferDate: new Date(),\n    totalDue: \"\",\n    totalCap: \"\",\n    principal: \"\",\n    interest: \"\",\n    charge: \"\",\n    tax: \"\",\n    totalPymt: \"\",\n    outstanding: \"\"\n  })));\n  const auth = useAuth();\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  const handleError = errorHandler(auth);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isLoading, setLoading] = useState(false);\n  const {\n    userId\n  } = props;\n  useEffect(() => {\n    handleGetCustomerBillings(); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n    console.log(props);\n  }, []);\n\n  const handleGetCustomerBillings = async () => {\n    setLoading(true);\n\n    try {\n      var _result$data, _result$data$result;\n\n      const arrangementID = `AA193027MFH4`;\n      const result = await loanRepaymentSchedule(arrangementID);\n      setLoading(false);\n      console.log(result);\n      if (result.error) return notify(result.message, \"error\");\n      if (!result.data.status) return notify(result.data.message, \"error\");\n      setScheduleEntries((_result$data = result.data) === null || _result$data === void 0 ? void 0 : (_result$data$result = _result$data.result) === null || _result$data$result === void 0 ? void 0 : _result$data$result.repayments);\n    } catch (error) {\n      handleError(error, notify, () => setLoading(false));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => history.goBack(),\n            className: \"btn btn-primary back-btn\",\n            children: /*#__PURE__*/_jsxDEV(ArrowRightShort, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), \"Customer Repayment Schedule & History\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"small-admin-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: face,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), \"NPF Admin\", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"arrow down\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"some-container\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"customers-page\",\n      children: [(isLoading || scheduleEntries && scheduleEntries.length === 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"searching-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"svg-holder \" + (!isLoading ? \"not-loading\" : \"\"),\n          children: isLoading ? /*#__PURE__*/_jsxDEV(SpinnerIcon, {\n            className: \"rotating\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(NothingFoundIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), !isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"NOTHING FOUND!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), !isLoading && scheduleEntries.length !== 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"color-dark-text-blue\",\n          children: [\"Entries per page:\", \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            style: {\n              display: \"inline-block\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control\",\n              onChange: e => {\n                setItemsPerPage(e.target.value);\n                setCurrentPage(1);\n              },\n              value: itemsPerPage,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: 5,\n                children: \"5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 10,\n                children: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 20,\n                children: \"20\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 50,\n                children: \"50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 100,\n                children: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 150,\n                children: \"150\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 200,\n                children: \"200\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-borderless\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"color-dark-text-blue\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Defer Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col-3\",\n                children: \"Total Due\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Total Cap\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Principal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Interest\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Charge\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col-3\",\n                children: \"Tax\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Total Pymt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Outstanding\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"spacer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this), scheduleEntries && scheduleEntries.map((v, idx) => {\n              const initialBoundary = (currentPage - 1) * itemsPerPage + 1;\n              const finalBoundary = currentPage * itemsPerPage;\n              const itemNumber = idx + 1;\n              if (itemNumber < initialBoundary || itemNumber > finalBoundary) return null;\n              return /*#__PURE__*/_jsxDEV(Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"billing-history-card\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: moment(v.date).format(\"DD/MM/YYYY\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: moment(v.deferDate).format(\"DD/MM/YYYY\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: formatAmount(v.totalDue)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: v.totalCap\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: formatAmount(v.principal)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: formatAmount(v.interest)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: formatAmount(v.charge)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"\",\n                    children: formatAmount(v.tax)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"color-sec-green\",\n                    children: formatAmount(v.totalPymt)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"color-red\",\n                    children: [\"-\", formatAmount(v.outstanding)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 25\n                }, this), idx !== scheduleEntries.length - 1 && /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"spacer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 27\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 23\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"audit-history-footer\",\n          children: /*#__PURE__*/_jsxDEV(ReactPaginate, {\n            pageCount: Math.ceil(scheduleEntries.length / itemsPerPage) || 1,\n            marginPagesDisplayed: 2,\n            pageRangeDisplayed: 3,\n            forcePage: currentPage - 1,\n            onPageChange: selectedItem => setCurrentPage(selectedItem.selected + 1),\n            containerClassName: \"pagination-btns\",\n            activeLinkClassName: \"active\",\n            pageLinkClassName: \"btn\",\n            previousLabel: /*#__PURE__*/_jsxDEV(ArrowLeftShortCircleFill, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 32\n            }, this),\n            previousLinkClassName: \"btn icon\",\n            nextLabel: /*#__PURE__*/_jsxDEV(ArrowLeftShortCircleFill, {\n              style: {\n                transform: \"rotateY(180deg)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 19\n            }, this),\n            nextLinkClassName: \"btn icon\",\n            disabledClassName: \"disabled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(LoanSchedule, \"98wwoXmYqlsxsDM4+kveG2I133s=\", false, function () {\n  return [useHistory, useAuth];\n});\n\n_c = LoanSchedule;\nexport default LoanSchedule;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoanSchedule\");","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/loanManagement/customer/loanSchedule.js"],"names":["React","Fragment","useEffect","useState","moment","notify","errorHandler","useAuth","ReactPaginate","formatAmount","face","useHistory","loanRepaymentSchedule","LoanSchedule","props","history","scheduleEntries","setScheduleEntries","Array","fill","map","v","idx","date","Date","deferDate","totalDue","totalCap","principal","interest","charge","tax","totalPymt","outstanding","auth","itemsPerPage","setItemsPerPage","handleError","currentPage","setCurrentPage","isLoading","setLoading","userId","handleGetCustomerBillings","console","log","arrangementID","result","error","message","data","status","repayments","e","goBack","length","display","target","value","initialBoundary","finalBoundary","itemNumber","format","Math","ceil","selectedItem","selected","transform"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport moment from \"moment\";\nimport { ReactComponent as NothingFoundIcon } from \"../../../assets/icons/nothing-found.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../../../assets/icons/spinner.svg\";\nimport { ReactComponent as ArrowLeftShortCircleFill } from \"../../../assets/icons/arrow-left-short-circle-fill.svg\";\nimport { ReactComponent as ArrowRightShort } from \"../../../assets/icons/arrow-right-short.svg\";\nimport notify from \"../../../utils/notification\";\nimport errorHandler from \"../../../utils/errorHandler\";\nimport { useAuth } from \"../../utilities\";\nimport ReactPaginate from \"react-paginate\";\nimport { formatAmount } from \"../../utilities\";\nimport face from \"../../../assets/img/placeholder-img.png\";\nimport { useHistory } from \"react-router\";\nimport { loanRepaymentSchedule } from \"../../../services/loanService\";\n\nconst LoanSchedule = (props) => {\n  const history = useHistory();\n  const [scheduleEntries, setScheduleEntries] = useState(\n    Array(5)\n      .fill(\"a\")\n      .map((v, idx) => ({\n        date: new Date(),\n        deferDate: new Date(),\n        totalDue: \"\",\n        totalCap: \"\",\n        principal: \"\",\n        interest: \"\",\n        charge: \"\",\n        tax: \"\",\n        totalPymt: \"\",\n        outstanding: \"\",\n      }))\n  );\n  const auth = useAuth();\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  const handleError = errorHandler(auth);\n\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const [isLoading, setLoading] = useState(false);\n  const { userId } = props;\n\n  useEffect(() => {\n    handleGetCustomerBillings();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    console.log(props);\n  }, []);\n\n  const handleGetCustomerBillings = async () => {\n    setLoading(true);\n    try {\n      const arrangementID = `AA193027MFH4`;\n      const result = await loanRepaymentSchedule(arrangementID);\n      setLoading(false);\n      console.log(result);\n      if (result.error) return notify(result.message, \"error\");\n      if (!result.data.status) return notify(result.data.message, \"error\");\n      setScheduleEntries(result.data?.result?.repayments);\n    } catch (error) {\n      handleError(error, notify, () => setLoading(false));\n    }\n  };\n\n  return (\n    <>\n      <header>\n        <div>\n          <h1>\n            <button\n              onClick={(e) => history.goBack()}\n              className=\"btn btn-primary back-btn\"\n            >\n              <ArrowRightShort />\n            </button>\n            {\"Customer Repayment Schedule & History\"}\n          </h1>\n        </div>\n        <div>\n          <div className=\"small-admin-details\">\n            <img src={face} alt=\"\" />\n            NPF Admin\n            <i className=\"arrow down\"></i>\n          </div>\n          <div className=\"some-container\"></div>\n        </div>\n      </header>\n      <main className=\"customers-page\">\n        {(isLoading || (scheduleEntries && scheduleEntries.length === 0)) && (\n          <div className=\"searching-block\">\n            <div className={\"svg-holder \" + (!isLoading ? \"not-loading\" : \"\")}>\n              {isLoading ? (\n                <SpinnerIcon className=\"rotating\" />\n              ) : (\n                <NothingFoundIcon />\n              )}\n            </div>\n            {!isLoading && <p>NOTHING FOUND!</p>}\n          </div>\n        )}\n        {!isLoading && scheduleEntries.length !== 0 && (\n          <>\n            <div className=\"color-dark-text-blue\">\n              Entries per page:{\" \"}\n              <div className=\"form-group\" style={{ display: \"inline-block\" }}>\n                <select\n                  className=\"form-control\"\n                  onChange={(e) => {\n                    setItemsPerPage(e.target.value);\n                    setCurrentPage(1);\n                  }}\n                  value={itemsPerPage}\n                >\n                  <option value={5}>5</option>\n                  <option value={10}>10</option>\n                  <option value={20}>20</option>\n                  <option value={50}>50</option>\n                  <option value={100}>100</option>\n                  <option value={150}>150</option>\n                  <option value={200}>200</option>\n                </select>\n              </div>\n            </div>\n            <table className=\"table table-borderless\">\n              <thead className=\"color-dark-text-blue\">\n                <tr>\n                  {/* <th scope=\"col\">\n                    <input type=\"checkbox\" />\n                  </th> */}\n                  <th scope=\"col\">Date</th>\n                  <th scope=\"col\">Defer Date</th>\n                  <th scope=\"col-3\">Total Due</th>\n                  <th scope=\"col\">Total Cap</th>\n                  <th scope=\"col\">Principal</th>\n                  <th scope=\"col\">Interest</th>\n                  <th scope=\"col\">Charge</th>\n                  <th scope=\"col-3\">Tax</th>\n                  <th scope=\"col\">Total Pymt</th>\n                  <th scope=\"col\">Outstanding</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr className=\"spacer\" />\n                {scheduleEntries &&\n                  scheduleEntries.map((v, idx) => {\n                    const initialBoundary =\n                      (currentPage - 1) * itemsPerPage + 1;\n                    const finalBoundary = currentPage * itemsPerPage;\n                    const itemNumber = idx + 1;\n                    if (\n                      itemNumber < initialBoundary ||\n                      itemNumber > finalBoundary\n                    )\n                      return null;\n                    return (\n                      <Fragment key={idx}>\n                        <tr className=\"billing-history-card\">\n                          {/* <th scope=\"row\">\n                          <input type=\"checkbox\" />\n                        </th> */}\n                          <td className=\"\">\n                            {moment(v.date).format(\"DD/MM/YYYY\")}\n                          </td>\n                          <td className=\"\">\n                            {moment(v.deferDate).format(\"DD/MM/YYYY\")}\n                          </td>\n                          <td className=\"\">{formatAmount(v.totalDue)}</td>\n                          <td className=\"\">{v.totalCap}</td>\n                          <td className=\"\">{formatAmount(v.principal)}</td>\n                          <td className=\"\">{formatAmount(v.interest)}</td>\n                          <td className=\"\">{formatAmount(v.charge)}</td>\n                          <td className=\"\">{formatAmount(v.tax)}</td>\n                          <td className=\"color-sec-green\">\n                            {formatAmount(v.totalPymt)}\n                          </td>\n                          <td className=\"color-red\">\n                            -{formatAmount(v.outstanding)}\n                          </td>\n                        </tr>\n                        {idx !== scheduleEntries.length - 1 && (\n                          <tr className=\"spacer\" />\n                        )}\n                      </Fragment>\n                    );\n                  })}\n              </tbody>\n            </table>\n            <div className=\"audit-history-footer\">\n              <ReactPaginate\n                pageCount={\n                  Math.ceil(scheduleEntries.length / itemsPerPage) || 1\n                }\n                marginPagesDisplayed={2}\n                pageRangeDisplayed={3}\n                forcePage={currentPage - 1}\n                onPageChange={(selectedItem) =>\n                  setCurrentPage(selectedItem.selected + 1)\n                }\n                containerClassName=\"pagination-btns\"\n                activeLinkClassName=\"active\"\n                pageLinkClassName=\"btn\"\n                previousLabel={<ArrowLeftShortCircleFill />}\n                previousLinkClassName=\"btn icon\"\n                nextLabel={\n                  <ArrowLeftShortCircleFill\n                    style={{ transform: \"rotateY(180deg)\" }}\n                  />\n                }\n                nextLinkClassName=\"btn icon\"\n                disabledClassName=\"disabled\"\n              />\n            </div>\n          </>\n        )}\n      </main>\n    </>\n  );\n};\n\nexport default LoanSchedule;\n"]},"metadata":{},"sourceType":"module"}