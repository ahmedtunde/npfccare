{"ast":null,"code":"import _regeneratorRuntime from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import logo from'../assets/img/logo-main.png';import{ReactComponent as ArrowRightCircle}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/arrow-right-circle.svg\";import{ReactComponent as EyeFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/eye-fill.svg\";import{ReactComponent as EyeSlashFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/eye-slash-fill.svg\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/spinner.svg\";import{useHistory}from'react-router-dom';import notify from'../utils/notification';import{resetAdminPassword}from'../services/authService';var ResetPassword=function ResetPassword(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showNewPassword=_useState2[0],setShowNewPassword=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showOldPassword=_useState4[0],setShowOldPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showConfirmPassword=_useState6[0],setShowConfirmPassword=_useState6[1];var _useState7=useState({oldPassword:false,newPassword:false,confirmPassword:false}),_useState8=_slicedToArray(_useState7,2),isInputFocused=_useState8[0],setInputFocused=_useState8[1];var _useState9=useState({oldPassword:\"\",newPassword:\"\",confirmPassword:\"\"}),_useState10=_slicedToArray(_useState9,2),userInputs=_useState10[0],setInputs=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isLoading=_useState12[0],setLoading=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),loginErrorMessage=_useState14[0],setLoginErrorMessage=_useState14[1];useEffect(function(){//remove modal reminants\nvar body=document.querySelector('body');body.classList.remove(\"modal-open\");body.style.paddingRight=\"\";var modalBackdrop=document.querySelector(\".modal-backdrop\");if(modalBackdrop)modalBackdrop.remove();},[]);var handleShowPassword=function handleShowPassword(target){if(target===\"new\"){setShowNewPassword(function(prev){return!prev;});}else if(target===\"confirm\"){setShowConfirmPassword(function(prev){return!prev;});}else{setShowOldPassword(function(prev){return!prev;});}};var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setLoginErrorMessage(\"\");setInputs(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var handleInputFocused=function handleInputFocused(e){var name=e.target.name;setInputFocused(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,true));});};var handleInputBlur=function handleInputBlur(e){var name=e.target.name;setInputFocused(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,false));});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var result,_error$toLowerCase,_error$toLowerCase$ca,_error$toLowerCase$ca2,_error$message,_error$message$toLowe,_error$message$toLowe2,_error$message$toLowe3,_error$message2,_error$message2$toLow,_error$message2$toLow2,_error$message2$toLow3,msg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);setLoginErrorMessage(\"\");_context.prev=3;_context.next=6;return resetAdminPassword(userInputs.oldPassword,userInputs.newPassword);case 6:result=_context.sent;setLoading(false);if(!result.error){_context.next=10;break;}return _context.abrupt(\"return\",setLoginErrorMessage(result.message));case 10:notify(result.message,\"success\",function(){setInputs({oldPassword:\"\",newPassword:\"\",confirmPassword:\"\"});});_context.next=18;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](3);setLoading(false);msg=(_context.t0===null||_context.t0===void 0?void 0:(_error$toLowerCase=_context.t0.toLowerCase)===null||_error$toLowerCase===void 0?void 0:(_error$toLowerCase$ca=(_error$toLowerCase$ca2=_error$toLowerCase.call(_context.t0)).includes)===null||_error$toLowerCase$ca===void 0?void 0:_error$toLowerCase$ca.call(_error$toLowerCase$ca2,\"unauth\"))?\"Unauthorized.\":(_context.t0===null||_context.t0===void 0?void 0:(_error$message=_context.t0.message)===null||_error$message===void 0?void 0:(_error$message$toLowe=_error$message.toLowerCase)===null||_error$message$toLowe===void 0?void 0:(_error$message$toLowe2=(_error$message$toLowe3=_error$message$toLowe.call(_error$message)).includes)===null||_error$message$toLowe2===void 0?void 0:_error$message$toLowe2.call(_error$message$toLowe3,\"network\"))?\"Network Error\":(_context.t0===null||_context.t0===void 0?void 0:(_error$message2=_context.t0.message)===null||_error$message2===void 0?void 0:(_error$message2$toLow=_error$message2.toLowerCase)===null||_error$message2$toLow===void 0?void 0:(_error$message2$toLow2=(_error$message2$toLow3=_error$message2$toLow.call(_error$message2)).includes)===null||_error$message2$toLow2===void 0?void 0:_error$message2$toLow2.call(_error$message2$toLow3,\"timeout\"))?\"Service Timeout, Try Again.\":\"Something went wrong!\";setLoginErrorMessage(msg);case 18:case\"end\":return _context.stop();}}},_callee,null,[[3,13]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"article\",{className:\"animated fadeIn delay-05s\",children:/*#__PURE__*/_jsx(\"section\",{className:\"mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"div\",{className:\"reset-form-container login-form-container mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"mx-auto\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-holder\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Provide your old and new password to proceed.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:\"Password must be a minimum of 8 characters and contain at least 1 uppercase letter, 1 digit and 1 symbol.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\".concat(isInputFocused.oldPassword?\" input-focused\":\"\"),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"oldPassword\",children:\"Old Password\"}),/*#__PURE__*/_jsx(\"input\",{type:showOldPassword?\"text\":\"password\",name:\"oldPassword\",id:\"oldPassword\",className:\"form-control\",required:true,onBlur:handleInputBlur,onFocus:handleInputFocused,onChange:handleChange,value:userInputs.oldPassword}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"show-password-btn1\",onClick:function onClick(){handleShowPassword(\"old\");},children:showOldPassword?/*#__PURE__*/_jsx(EyeSlashFill,{}):/*#__PURE__*/_jsx(EyeFill,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-0 form-group\".concat(isInputFocused.newPassword?\" input-focused\":\"\"),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newPassword\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:showNewPassword?\"text\":\"password\",name:\"newPassword\",id:\"newPassword\",className:\"form-control\",required:true,onBlur:handleInputBlur,onFocus:handleInputFocused,onChange:handleChange,value:userInputs.newPassword}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"show-password-btn1\",onClick:function onClick(){handleShowPassword(\"new\");},children:showNewPassword?/*#__PURE__*/_jsx(EyeSlashFill,{}):/*#__PURE__*/_jsx(EyeFill,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\".concat(isInputFocused.confirmPassword?\" input-focused\":\"\"),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:showConfirmPassword?\"text\":\"password\",name:\"confirmPassword\",id:\"confirmPassword\",className:\"form-control\",required:true,onBlur:handleInputBlur,onFocus:handleInputFocused,onChange:handleChange,value:userInputs.confirmPassword}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"show-password-btn1\",onClick:function onClick(){handleShowPassword(\"confirm\");},children:showConfirmPassword?/*#__PURE__*/_jsx(EyeSlashFill,{}):/*#__PURE__*/_jsx(EyeFill,{})})]}),loginErrorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"custom invalid-feedback mb-2\",children:loginErrorMessage}),/*#__PURE__*/_jsxs(\"button\",{disabled:!userInputs.newPassword&&!userInputs.confirmPassword&&!userInputs.oldPassword||userInputs.newPassword&&userInputs.newPassword.toString()!==userInputs.confirmPassword.toString(),className:\"signin-btn btn\",type:\"submit\",style:{padding:\"25px 103px 25px 108px\"},children:[\"Change Password\",/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(isLoading?\"loading\":\"\"),children:isLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"}):/*#__PURE__*/_jsx(ArrowRightCircle,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"overlay-div\"})]})]})})})})});};export default ResetPassword;","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/resetPassword.js"],"names":["React","useEffect","useState","logo","useHistory","notify","resetAdminPassword","ResetPassword","props","showNewPassword","setShowNewPassword","showOldPassword","setShowOldPassword","showConfirmPassword","setShowConfirmPassword","oldPassword","newPassword","confirmPassword","isInputFocused","setInputFocused","userInputs","setInputs","isLoading","setLoading","loginErrorMessage","setLoginErrorMessage","body","document","querySelector","classList","remove","style","paddingRight","modalBackdrop","handleShowPassword","target","prev","handleChange","e","name","value","handleInputFocused","handleInputBlur","handleSubmit","preventDefault","result","error","message","msg","toLowerCase","includes","toString","padding"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport logo from '../assets/img/logo-main.png';\nimport { ReactComponent as ArrowRightCircle} from '../assets/icons/arrow-right-circle.svg';\nimport { ReactComponent as EyeFill} from '../assets/icons/eye-fill.svg';\nimport { ReactComponent as EyeSlashFill} from '../assets/icons/eye-slash-fill.svg';\nimport { ReactComponent as SpinnerIcon} from '../assets/icons/spinner.svg';\nimport { useHistory } from 'react-router-dom';\nimport notify from '../utils/notification';\nimport { resetAdminPassword } from '../services/authService';\n\nconst ResetPassword = props => {\n\n    const [showNewPassword, setShowNewPassword] = useState(false);\n\tconst [showOldPassword, setShowOldPassword] = useState(false);\n\tconst [showConfirmPassword, setShowConfirmPassword] = useState(false);\n\n    const [isInputFocused, setInputFocused] = useState({\n\t\toldPassword: false,\n        newPassword: false,\n        confirmPassword: false\n    });\n\n    const [userInputs, setInputs] = useState({\n\t\toldPassword: \"\",\n        newPassword: \"\",\n        confirmPassword: \"\"\n    });\n\n    const [isLoading, setLoading] = useState(false);\n    const [loginErrorMessage, setLoginErrorMessage] = useState(\"\");\n\n    useEffect(() => {\n        //remove modal reminants\n        const body = document.querySelector('body');\n        body.classList.remove(\"modal-open\");\n        body.style.paddingRight = \"\";\n\n        const modalBackdrop = document.querySelector(\".modal-backdrop\");\n        if(modalBackdrop) modalBackdrop.remove();\n    }, []);\n\t\n    const handleShowPassword = target => {\n\t\tif(target === \"new\") {\n\t\t\tsetShowNewPassword(prev => !prev)\n\t\t} else if(target === \"confirm\") {\n\t\t\tsetShowConfirmPassword(prev => !prev)\n\t\t} else {\n\t\t\tsetShowOldPassword(prev => !prev)\n\t\t}\n\t};\n\n    const handleChange = e => {\n        const {name, value} = e.target;\n        setLoginErrorMessage(\"\");\n\n        setInputs(prev => ({\n            ...prev,\n            [name]: value\n        }));\n    };\n\n\tconst handleInputFocused = e => {\n\t\tconst { name } = e.target;\n\t\tsetInputFocused(prev => ({\n\t\t\t...prev,\n\t\t\t[name]: true\n\t\t}));\n\t};\n\n\tconst handleInputBlur = e => {\n\t\tconst { name } = e.target;\n\t\tsetInputFocused(prev => ({\n\t\t\t...prev,\n\t\t\t[name]: false\n\t\t}));\n\t};\n\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault();\n\t\tsetLoading(true);\n\t\tsetLoginErrorMessage(\"\");\n\n\t\ttry {\n\t\t\tconst result = await resetAdminPassword(userInputs.oldPassword, userInputs.newPassword);\n\t\t\tsetLoading(false);\n\n\t\t\tif(result.error) return setLoginErrorMessage(result.message);\n\n\t\t\tnotify(result.message, \"success\", () => {\n\t\t\t\tsetInputs({\n\t\t\t\t\toldPassword: \"\",\n\t\t\t\t\tnewPassword: \"\",\n\t\t\t\t\tconfirmPassword: \"\"\n\t\t\t\t})\n\t\t\t});\n\n\t\t} catch (error) {\n\t\t\tsetLoading(false);\n\t\t\tconst msg = error?.toLowerCase?.().includes?.(\"unauth\") ? \"Unauthorized.\" :\n\t\t\terror?.message?.toLowerCase?.().includes?.(\"network\") ? \"Network Error\" :\n\t\t\t\terror?.message?.toLowerCase?.().includes?.(\"timeout\") ? \"Service Timeout, Try Again.\" :\n\t\t\t\t\"Something went wrong!\";\n\t\t\tsetLoginErrorMessage(msg);\n\t\t}\n\t};\n\t\n\treturn(\n\t\t<article className=\"animated fadeIn delay-05s\">\n\t\t\t<section className=\"mx-auto\">\n\t\t\t\t<div className=\"\">\n\t\t\t\t\t{/* <div className=\"left-img-holder\">\n\t\t\t\t\t\t<img src={sideImg} alt=\"\" />\n\t\t\t\t\t</div> */}\n\n\t\t\t\t\t<div className=\"reset-form-container login-form-container mx-auto\">\n\t\t\t\t\t\t<form className=\"mx-auto\" onSubmit={handleSubmit}>\n\n\t\t\t\t\t\t\t<div className=\"form-header\">\n\t\t\t\t\t\t\t\t<div className=\"logo-holder\">\n\t\t\t\t\t\t\t\t\t<img src={logo} alt=\"logo\"/>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<p>Provide your old and new password to proceed.</p>\n\t\t\t\t\t\t\t\t<p className=\"text-danger\">Password must be a minimum of 8 characters and contain at least 1 uppercase letter, 1 digit and 1 symbol.</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className={`form-group${isInputFocused.oldPassword ? \" input-focused\" : \"\"}`}>\n\t\t\t\t\t\t\t\t<label htmlFor=\"oldPassword\">\n\t\t\t\t\t\t\t\t\tOld Password\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype={showOldPassword ? \"text\" : \"password\"}\n\t\t\t\t\t\t\t\t\tname=\"oldPassword\"\n\t\t\t\t\t\t\t\t\tid=\"oldPassword\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tonBlur={handleInputBlur}\n\t\t\t\t\t\t\t\t\tonFocus={handleInputFocused}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tvalue={userInputs.oldPassword}/>\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"show-password-btn1\" onClick={() => {handleShowPassword(\"old\")}}>\n\t\t\t\t\t\t\t\t\t{showOldPassword ? <EyeSlashFill /> : <EyeFill />}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className={`mb-0 form-group${isInputFocused.newPassword ? \" input-focused\" : \"\"}`}>\n\t\t\t\t\t\t\t\t<label htmlFor=\"newPassword\">\n\t\t\t\t\t\t\t\t\tNew Password\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype={showNewPassword ? \"text\" : \"password\"}\n\t\t\t\t\t\t\t\t\tname=\"newPassword\"\n\t\t\t\t\t\t\t\t\tid=\"newPassword\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tonBlur={handleInputBlur}\n\t\t\t\t\t\t\t\t\tonFocus={handleInputFocused}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tvalue={userInputs.newPassword}/>\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"show-password-btn1\" onClick={() => {handleShowPassword(\"new\")}}>\n\t\t\t\t\t\t\t\t\t{showNewPassword ? <EyeSlashFill /> : <EyeFill />}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className={`form-group${isInputFocused.confirmPassword ? \" input-focused\" : \"\"}`}>\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\">\n\t\t\t\t\t\t\t\t\tConfirm Password\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype={showConfirmPassword ? \"text\" : \"password\"}\n\t\t\t\t\t\t\t\t\tname=\"confirmPassword\"\n\t\t\t\t\t\t\t\t\tid=\"confirmPassword\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tonBlur={handleInputBlur}\n\t\t\t\t\t\t\t\t\tonFocus={handleInputFocused}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tvalue={userInputs.confirmPassword}/>\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"show-password-btn1\" onClick={() => {handleShowPassword(\"confirm\")}}>\n\t\t\t\t\t\t\t\t\t{showConfirmPassword ? <EyeSlashFill /> : <EyeFill />}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{loginErrorMessage && <div className=\"custom invalid-feedback mb-2\">\n\t\t\t\t\t\t\t{loginErrorMessage}\n\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tdisabled={(!userInputs.newPassword && !userInputs.confirmPassword && !userInputs.oldPassword) || \n\t\t\t\t\t\t\t\t(userInputs.newPassword && userInputs.newPassword.toString() !== userInputs.confirmPassword.toString())} \n\t\t\t\t\t\t\t\tclassName=\"signin-btn btn\" type=\"submit\" style={{padding: \"25px 103px 25px 108px\"}}>\n\t\t\t\t\t\t\t\tChange Password\n\t\t\t\t\t\t\t<span className={`${isLoading ? \"loading\" : \"\"}`}>\n\t\t\t\t\t\t\t\t{isLoading ?\n\t\t\t\t\t\t\t\t<SpinnerIcon className=\"rotating\" /> :\n\t\t\t\t\t\t\t\t<ArrowRightCircle />}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div className=\"overlay-div\"></div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</form>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</article>\n\t);\n};\n\nexport default ResetPassword;"]},"metadata":{},"sourceType":"module"}