{"ast":null,"code":"import _regeneratorRuntime from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Fragment,useState}from\"react\";import{Link,useHistory,useLocation,useRouteMatch}from\"react-router-dom\";import{ReactComponent as ChevronRight}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/chevron-right.svg\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/spinner.svg\";import logo from\"../assets/img/logo-main.png\";import{useAuth}from\"./utilities\";import{initiatePasswordRest}from\"../services/authService\";import{getRoles}from\"../utils/localStorageService\";import notify from\"../utils/notification\";var SidePanel=function SidePanel(props){var auth=useAuth();var roles=getRoles();var sidePanelItems=[{name:\"Loan Management\",path:\"/loanMan\",next:roles===\"LOAN OFFICER\"?\"settings\":\"customers\",user:[\"LOAN OFFICER\",\"AUDIT\"]},{name:\"Customer Accounts\",path:\"/customers\",prev:\"loanMan\",next:\"failedBillings\",user:[\"CSO\",\"AUDIT\"]},{name:\"Failed Billing History\",path:\"/failedBillings\",prev:\"customers\",next:roles===\"AUDIT\"?\"settings\":\"eft\",user:[\"CSO\",\"SUPER ADMIN\",\"AUDIT\"]},{name:\"Electronic Funds Transfer\",path:\"/eft\",prev:\"failedBillings\",next:roles===\"AUDIT\"?\"helpDesk\":\"settings\",user:[\"CSO\",\"SUPER ADMIN\"]},{name:\"Settings\",path:\"/settings\",prev:roles===\"AUDIT\"?\"failedBillings\":roles===\"LOAN OFFICER\"?\"loanMan\":\"eft\",next:roles===\"AUDIT\"||roles===\"LOAN OFFICER\"||roles===\"CSO\"?\"changePassword\":\"helpDesk\",user:[\"CSO\",\"SUPER ADMIN\",\"LOAN OFFICER\",\"AUDIT\"]},{name:\"Customer Management\",path:\"/helpDesk\",prev:\"settings\",next:\"changePassword\",user:[\"SUPER ADMIN\"]},{name:\"Change Password\",path:\"/changePassword\",prev:roles===\"AUDIT\"||roles===\"LOAN OFFICER\"||roles===\"CSO\"?\"settings\":\"helpDesk\",next:\"superAdmin\",user:[\"CSO\",\"SUPER ADMIN\",\"LOAN OFFICER\",\"AUDIT\"]},{name:\"Admin Management\",path:\"/superAdmin\",prev:\"changePassword\",next:\"auditLog\",user:[\"SUPER ADMIN\"]},{name:\"Audit Logs\",path:\"/auditLog\",prev:\"superAdmin\",user:[\"SUPER ADMIN\",\"AUDIT\"]}];var _useRouteMatch=useRouteMatch(),url=_useRouteMatch.url;// const history = useHistory();\nvar _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),resetloading=_useState4[0],setResetLoading=_useState4[1];var handleSignOut=function handleSignOut(e){setLoading(true);auth.signout(function(){return setLoading(false);});};var handleResetPassword=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setResetLoading(true);_context.next=3;return initiatePasswordRest();case 3:result=_context.sent;if(!result.error)notify(result.message,\"success\");setResetLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleResetPassword(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"side-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"side-panel-header\",children:/*#__PURE__*/_jsx(\"img\",{className:\"mx-auto d-block\",src:logo,alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"side-panel-items\",children:sidePanelItems.map(function(_ref2,idx){var name=_ref2.name,path=_ref2.path,next=_ref2.next,prev=_ref2.prev,user=_ref2.user;return/*#__PURE__*/_jsxs(Fragment,{children:[idx===0&&/*#__PURE__*/_jsx(\"div\",{className:\"dummy item \".concat(pathname.includes(path)?\"next-active\":\"\"),children:/*#__PURE__*/_jsx(\"a\",{href:\"#!\",children:\"\\xA0\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"item\\n            \".concat(pathname.includes(path)?\" active\":\"\",\"\\n            \").concat(pathname.includes(prev)?\" prev-active\":\"\",\"\\n            \").concat(pathname.includes(next)?\" next-active\":\"\"),children:user.includes(auth.user[0])&&/*#__PURE__*/_jsxs(Link,{to:url+path,children:[name,!pathname.includes(path)&&/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(ChevronRight,{})})]})}),idx===sidePanelItems.length-1&&/*#__PURE__*/_jsx(\"div\",{className:\"item \".concat(pathname.includes(path)?\"prev-active\":\"\"),children:/*#__PURE__*/_jsx(\"a\",{href:\"#!\",children:\"\\xA0\"})})]},idx);})}),/*#__PURE__*/_jsx(\"div\",{className:\"signout-div\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary signout-btn \".concat(loading?\"loading disabled\":\"\"),onClick:handleSignOut,children:loading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"}):\"Sign Out\"})})]});};export default SidePanel;","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/sidePanel.js"],"names":["React","Fragment","useState","Link","useHistory","useLocation","useRouteMatch","logo","useAuth","initiatePasswordRest","getRoles","notify","SidePanel","props","auth","roles","sidePanelItems","name","path","next","user","prev","url","pathname","loading","setLoading","resetloading","setResetLoading","handleSignOut","e","signout","handleResetPassword","result","error","message","map","idx","includes","length"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport { Link, useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\nimport { ReactComponent as ChevronRight } from \"../assets/icons/chevron-right.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../assets/icons/spinner.svg\";\nimport logo from \"../assets/img/logo-main.png\";\nimport { useAuth } from \"./utilities\";\nimport { initiatePasswordRest } from \"../services/authService\";\nimport { getRoles } from \"../utils/localStorageService\";\nimport notify from \"../utils/notification\";\n\nconst SidePanel = (props) => {\n  const auth = useAuth();\n  const roles = getRoles();\n\n  const sidePanelItems = [\n    {\n      name: \"Loan Management\",\n      path: \"/loanMan\",\n      next: roles === \"LOAN OFFICER\" ? \"settings\" : \"customers\",\n      user: [\"LOAN OFFICER\", \"AUDIT\"],\n    },\n    {\n      name: \"Customer Accounts\",\n      path: \"/customers\",\n      prev: \"loanMan\",\n      next: \"failedBillings\",\n      user: [\"CSO\", \"AUDIT\"],\n    },\n    {\n      name: \"Failed Billing History\",\n      path: \"/failedBillings\",\n      prev: \"customers\",\n      next: roles === \"AUDIT\" ? \"settings\" : \"eft\",\n      user: [\"CSO\", \"SUPER ADMIN\", \"AUDIT\"],\n    },\n    {\n      name: \"Electronic Funds Transfer\",\n      path: \"/eft\",\n      prev: \"failedBillings\",\n      next: roles === \"AUDIT\" ? \"helpDesk\" : \"settings\",\n      user: [\"CSO\", \"SUPER ADMIN\"],\n    },\n    {\n      name: \"Settings\",\n      path: \"/settings\",\n      prev:\n        roles === \"AUDIT\"\n          ? \"failedBillings\"\n          : roles === \"LOAN OFFICER\"\n          ? \"loanMan\"\n          : \"eft\",\n      next:\n        roles === \"AUDIT\" || roles === \"LOAN OFFICER\" || roles === \"CSO\"\n          ? \"changePassword\"\n          : \"helpDesk\",\n      user: [\"CSO\", \"SUPER ADMIN\", \"LOAN OFFICER\", \"AUDIT\"],\n    },\n    {\n      name: \"Customer Management\",\n      path: \"/helpDesk\",\n      prev: \"settings\",\n      next: \"changePassword\",\n      user: [\"SUPER ADMIN\"],\n    },\n    {\n      name: \"Change Password\",\n      path: \"/changePassword\",\n      prev:\n        roles === \"AUDIT\" || roles === \"LOAN OFFICER\" || roles === \"CSO\"\n          ? \"settings\"\n          : \"helpDesk\",\n      next: \"superAdmin\",\n      user: [\"CSO\", \"SUPER ADMIN\", \"LOAN OFFICER\", \"AUDIT\"],\n    },\n    {\n      name: \"Admin Management\",\n      path: \"/superAdmin\",\n      prev: \"changePassword\",\n      next: \"auditLog\",\n      user: [\"SUPER ADMIN\"],\n    },\n\n    {\n      name: \"Audit Logs\",\n      path: \"/auditLog\",\n      prev: \"superAdmin\",\n      user: [\"SUPER ADMIN\", \"AUDIT\"],\n    },\n  ];\n\n  const { url } = useRouteMatch();\n  // const history = useHistory();\n  const { pathname } = useLocation();\n\n  const [loading, setLoading] = useState(false);\n  const [resetloading, setResetLoading] = useState(false);\n\n  const handleSignOut = (e) => {\n    setLoading(true);\n    auth.signout(() => setLoading(false));\n  };\n\n  const handleResetPassword = async (e) => {\n    setResetLoading(true);\n\n    let result = await initiatePasswordRest();\n\n    if (!result.error) notify(result.message, \"success\");\n\n    setResetLoading(false);\n  };\n\n  return (\n    <div className=\"side-panel\">\n      <div className=\"side-panel-header\">\n        <img className=\"mx-auto d-block\" src={logo} alt=\"\" />\n      </div>\n      <div className=\"side-panel-items\">\n        {sidePanelItems.map(({ name, path, next, prev, user }, idx) => (\n          <Fragment key={idx}>\n            {idx === 0 && (\n              <div\n                className={`dummy item ${\n                  pathname.includes(path) ? \"next-active\" : \"\"\n                }`}\n              >\n                <a href=\"#!\">&nbsp;</a>\n              </div>\n            )}\n            <div\n              className={`item\n            ${pathname.includes(path) ? \" active\" : \"\"}\n            ${pathname.includes(prev) ? \" prev-active\" : \"\"}\n            ${pathname.includes(next) ? \" next-active\" : \"\"}`}\n            >\n              {user.includes(auth.user[0]) && (\n                <Link to={url + path}>\n                  {name}\n                  {!pathname.includes(path) && (\n                    <span>\n                      <ChevronRight />\n                    </span>\n                  )}\n                </Link>\n              )}\n            </div>\n            {idx === sidePanelItems.length - 1 && (\n              <div\n                className={`item ${\n                  pathname.includes(path) ? \"prev-active\" : \"\"\n                }`}\n              >\n                <a href=\"#!\">&nbsp;</a>\n              </div>\n            )}\n          </Fragment>\n        ))}\n      </div>\n\n      {/* <div className=\"reset-div\">\n        <button\n          type=\"button\"\n          className={`btn btn-primary signout-btn ${resetloading ? \"loading disabled\" : \"\"}`}\n          onClick={handleResetPassword}>\n            {resetloading ? <SpinnerIcon className=\"rotating\" /> : \"Reset Password\"}\n        </button>\n      </div> */}\n\n      <div className=\"signout-div\">\n        <button\n          type=\"button\"\n          className={`btn btn-primary signout-btn ${\n            loading ? \"loading disabled\" : \"\"\n          }`}\n          onClick={handleSignOut}\n        >\n          {loading ? <SpinnerIcon className=\"rotating\" /> : \"Sign Out\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SidePanel;\n"]},"metadata":{},"sourceType":"module"}