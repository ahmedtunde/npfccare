{"ast":null,"code":"export default function errorHandler(auth) {\n  return function (errorObject, notify) {\n    var _errorObject$toLowerC, _errorObject$toLowerC2, _errorObject$toLowerC3, _message$toLowerCase, _message$toLowerCase$, _message$toLowerCase$2, _message$toLowerCase2, _message$toLowerCase3, _message$toLowerCase4, _errorObject$toLowerC4, _errorObject$toLowerC5, _errorObject$toLowerC6;\n\n    let cb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : () => {};\n    const {\n      message\n    } = errorObject;\n    const msg = (errorObject === null || errorObject === void 0 ? void 0 : (_errorObject$toLowerC = errorObject.toLowerCase) === null || _errorObject$toLowerC === void 0 ? void 0 : (_errorObject$toLowerC2 = (_errorObject$toLowerC3 = _errorObject$toLowerC.call(errorObject)).includes) === null || _errorObject$toLowerC2 === void 0 ? void 0 : _errorObject$toLowerC2.call(_errorObject$toLowerC3, \"unauth\")) ? \"Session Expired, please log in.\" : (message === null || message === void 0 ? void 0 : (_message$toLowerCase = message.toLowerCase) === null || _message$toLowerCase === void 0 ? void 0 : (_message$toLowerCase$ = (_message$toLowerCase$2 = _message$toLowerCase.call(message)).includes) === null || _message$toLowerCase$ === void 0 ? void 0 : _message$toLowerCase$.call(_message$toLowerCase$2, \"timeout\")) ? \"Service Timeout, Please Retry\" : (message === null || message === void 0 ? void 0 : (_message$toLowerCase2 = message.toLowerCase) === null || _message$toLowerCase2 === void 0 ? void 0 : (_message$toLowerCase3 = (_message$toLowerCase4 = _message$toLowerCase2.call(message)).includes) === null || _message$toLowerCase3 === void 0 ? void 0 : _message$toLowerCase3.call(_message$toLowerCase4, \"network\")) ? \"Network Error!\" : \"Something went wrong!\";\n    console.error(errorObject);\n    cb();\n    notify(msg, \"error\", () => console.log(\"complete\"));\n    if (errorObject === null || errorObject === void 0 ? void 0 : (_errorObject$toLowerC4 = errorObject.toLowerCase) === null || _errorObject$toLowerC4 === void 0 ? void 0 : (_errorObject$toLowerC5 = (_errorObject$toLowerC6 = _errorObject$toLowerC4.call(errorObject)).includes) === null || _errorObject$toLowerC5 === void 0 ? void 0 : _errorObject$toLowerC5.call(_errorObject$toLowerC6, \"unauth\")) auth.signout();\n  };\n}\nexport function LoanErrorHandler(auth) {\n  return function (errorObject, notify) {\n    var _errorObject$toLowerC7, _errorObject$toLowerC8, _errorObject$toLowerC9, _errorObject$data, _errorObject$data$toL, _errorObject$data$toL2, _errorObject$data$toL3, _message$toLowerCase5, _message$toLowerCase6, _message$toLowerCase7, _message$toLowerCase8, _message$toLowerCase9, _message$toLowerCase10;\n\n    let cb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : () => {};\n    const {\n      message\n    } = errorObject;\n    const isTokenExpired = (errorObject === null || errorObject === void 0 ? void 0 : (_errorObject$toLowerC7 = errorObject.toLowerCase) === null || _errorObject$toLowerC7 === void 0 ? void 0 : (_errorObject$toLowerC8 = (_errorObject$toLowerC9 = _errorObject$toLowerC7.call(errorObject)).includes) === null || _errorObject$toLowerC8 === void 0 ? void 0 : _errorObject$toLowerC8.call(_errorObject$toLowerC9, \"unauth\")) || (errorObject === null || errorObject === void 0 ? void 0 : (_errorObject$data = errorObject.data) === null || _errorObject$data === void 0 ? void 0 : (_errorObject$data$toL = _errorObject$data.toLowerCase) === null || _errorObject$data$toL === void 0 ? void 0 : (_errorObject$data$toL2 = (_errorObject$data$toL3 = _errorObject$data$toL.call(_errorObject$data)).includes) === null || _errorObject$data$toL2 === void 0 ? void 0 : _errorObject$data$toL2.call(_errorObject$data$toL3, \"token\"));\n    const msg = isTokenExpired ? \"Session Expired, please log in.\" : (message === null || message === void 0 ? void 0 : (_message$toLowerCase5 = message.toLowerCase) === null || _message$toLowerCase5 === void 0 ? void 0 : (_message$toLowerCase6 = (_message$toLowerCase7 = _message$toLowerCase5.call(message)).includes) === null || _message$toLowerCase6 === void 0 ? void 0 : _message$toLowerCase6.call(_message$toLowerCase7, \"timeout\")) ? \"Service Timeout, Please Retry\" : (message === null || message === void 0 ? void 0 : (_message$toLowerCase8 = message.toLowerCase) === null || _message$toLowerCase8 === void 0 ? void 0 : (_message$toLowerCase9 = (_message$toLowerCase10 = _message$toLowerCase8.call(message)).includes) === null || _message$toLowerCase9 === void 0 ? void 0 : _message$toLowerCase9.call(_message$toLowerCase10, \"network\")) ? \"Network Error!\" : \"Something went wrong!\";\n    console.error(errorObject);\n    cb();\n    notify(msg, \"error\", () => console.log(\"complete\"));\n    if (isTokenExpired) auth.signout();\n  };\n}\n_c = LoanErrorHandler;\nexport function validateToken(token, history, jwt_decode, auth, notify) {\n  if (token && token !== \"\") {\n    const decodedToken = jwt_decode(token);\n    let currentDate = new Date();\n\n    if (decodedToken.exp * 1000 < currentDate.getTime()) {\n      notify(\"Session expired\", \"error\");\n      history.push(\"/login\");\n      auth.signout();\n      return;\n    }\n  } else {\n    history.push(\"/login\");\n  }\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"LoanErrorHandler\");","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/utils/errorHandler.js"],"names":["errorHandler","auth","errorObject","notify","cb","message","msg","toLowerCase","includes","console","error","log","signout","LoanErrorHandler","isTokenExpired","data","validateToken","token","history","jwt_decode","decodedToken","currentDate","Date","exp","getTime","push"],"mappings":"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","sourcesContent":["export default function errorHandler(auth) {\n  return (errorObject, notify, cb = () => {}) => {\n    const { message } = errorObject;\n    const msg = errorObject?.toLowerCase?.().includes?.(\"unauth\")\n      ? \"Session Expired, please log in.\"\n      : message?.toLowerCase?.().includes?.(\"timeout\")\n      ? \"Service Timeout, Please Retry\"\n      : message?.toLowerCase?.().includes?.(\"network\")\n      ? \"Network Error!\"\n      : \"Something went wrong!\";\n\n    console.error(errorObject);\n    cb();\n    notify(msg, \"error\", () => console.log(\"complete\"));\n    if (errorObject?.toLowerCase?.().includes?.(\"unauth\")) auth.signout();\n  };\n}\n\nexport function LoanErrorHandler(auth) {\n  return (errorObject, notify, cb = () => {}) => {\n    const { message } = errorObject;\n    const isTokenExpired =\n      errorObject?.toLowerCase?.().includes?.(\"unauth\") ||\n      errorObject?.data?.toLowerCase?.().includes?.(\"token\");\n    const msg = isTokenExpired\n      ? \"Session Expired, please log in.\"\n      : message?.toLowerCase?.().includes?.(\"timeout\")\n      ? \"Service Timeout, Please Retry\"\n      : message?.toLowerCase?.().includes?.(\"network\")\n      ? \"Network Error!\"\n      : \"Something went wrong!\";\n\n    console.error(errorObject);\n    cb();\n    notify(msg, \"error\", () => console.log(\"complete\"));\n    if (isTokenExpired) auth.signout();\n  };\n}\n\nexport function validateToken(token, history, jwt_decode, auth, notify) {\n  if (token && token !== \"\") {\n    const decodedToken = jwt_decode(token);\n    let currentDate = new Date();\n\n    if (decodedToken.exp * 1000 < currentDate.getTime()) {\n      notify(\"Session expired\", \"error\");\n      history.push(\"/login\");\n      auth.signout();\n      return;\n    }\n  } else {\n    history.push(\"/login\");\n  }\n}\n"]},"metadata":{},"sourceType":"module"}