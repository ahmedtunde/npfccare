{"ast":null,"code":"import _defineProperty from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useCallback,useState,useEffect}from\"react\";import{useHistory,useLocation,useRouteMatch,useParams}from\"react-router-dom\";import jwt_decode from\"jwt-decode\";import{ReactComponent as ArrowRightCircle}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/arrow-right-circle.svg\";import{ReactComponent as ArrowRightShort}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/arrow-right-short.svg\";import{ReactComponent as TimesCircleFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/times-circle-fill.svg\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/spinner.svg\";import{getAccessToken,getAdminName}from\"../../utils/localStorageService\";import{useAuth}from\"../../components/utilities\";import errorHandler,{validateToken}from\"../../utils/errorHandler\";import face from\"../../assets/img/placeholder-img.png\";import notify from\"../../utils/notification\";import{getAdminProfileDetails,getAdminRoles,updateAdminProfile}from\"../../services/adminService\";import{getBranches,getRoles}from\"../../services/loanService\";import{DeleteModal}from\"../../components/loanManagement/customer/approvalModal\";var AdminDetails=function AdminDetails(){var history=useHistory();var location=useLocation();var auth=useAuth();var search=location.search;var adminName=getAdminName();var _useState=useState({userFull:false,submit:false,rejectApplication:false,approveApplication:false,printApplication:false,loadPage:false}),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),adminDetails=_useState4[0],setAdminDetails=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),branch=_useState6[0],setBranch=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),branchName=_useState8[0],setBranchName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),branchId=_useState10[0],setBranchId=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),roles=_useState12[0],setRoles=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),roleName=_useState14[0],setRoleName=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),loanWorkFlow=_useState16[0],setLoanWorkFlow=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),workFlow=_useState18[0],setWorkFlow=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),hideBranch=_useState20[0],setHideBranch=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),hideWorkFlow=_useState22[0],setHideWorkFlow=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),loanOfficerCode=_useState24[0],setLoanOfficerCode=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),firstName=_useState26[0],setFirstName=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),lastName=_useState28[0],setLastName=_useState28[1];var _useState29=useState(null),_useState30=_slicedToArray(_useState29,2),email=_useState30[0],setEmail=_useState30[1];var _useState31=useState(null),_useState32=_slicedToArray(_useState31,2),phoneNumber=_useState32[0],setPhoneNumber=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),hideAdminRole=_useState34[0],setHideAdminRole=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),deleteModalBtn=_useState36[0],setDeleteModalBtn=_useState36[1];var _useState37=useState(null),_useState38=_slicedToArray(_useState37,2),staffId=_useState38[0],setStaffId=_useState38[1];var _useState39=useState(null),_useState40=_slicedToArray(_useState39,2),rank=_useState40[0],setRank=_useState40[1];var _useState41=useState(\"\"),_useState42=_slicedToArray(_useState41,2),adminRole=_useState42[0],setAdminRole=_useState42[1];var _useState43=useState({}),_useState44=_slicedToArray(_useState43,2),deleteData=_useState44[0],setDeleteData=_useState44[1];var searchParams=new URLSearchParams(search);var id=searchParams.get(\"id\");var token=getAccessToken();useEffect(function(){validateToken(token,history,jwt_decode,auth,notify);},[auth,history,token]);useEffect(function(){setHideBranch(false);setHideAdminRole(false);setDeleteModalBtn(false);var handleGetAdminProfileDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result,_roles,_workFlow;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;handleChangeLoading(\"loadPage\",true);_context.next=4;return getAdminProfileDetails(id);case 4:response=_context.sent;_context.next=7;return getBranches();case 7:result=_context.sent;_context.next=10;return getAdminRoles();case 10:_roles=_context.sent;_context.next=13;return getRoles();case 13:_workFlow=_context.sent;if(!(response.data&&response.data.status)){_context.next=22;break;}console.log(response.data);setAdminDetails(response.data.data);setBranch(result.data);setRoles(_roles.result);setLoanWorkFlow(_workFlow.data);handleChangeLoading(\"loadPage\",false);return _context.abrupt(\"return\");case 22:_context.next=29;break;case 24:_context.prev=24;_context.t0=_context[\"catch\"](0);console.log(_context.t0);handleChangeLoading(\"loadPage\",false);return _context.abrupt(\"return\");case 29:handleChangeLoading(\"loadPage\",false);case 30:case\"end\":return _context.stop();}}},_callee,null,[[0,24]]);}));return function handleGetAdminProfileDetails(){return _ref.apply(this,arguments);};}();handleGetAdminProfileDetails();},[]);useEffect(function(){branch&&branch.forEach(function(option){if(parseInt(adminDetails.branch)===option.id){setBranchName(option.name);}});adminDetails.AdminUserRoles&&adminDetails.AdminUserRoles.forEach(function(option){setRoleName(option.name);loanWorkFlow&&loanWorkFlow.forEach(function(data){if(option.code===data.code){setWorkFlow(data.name);}});});},[adminDetails.AdminUserRoles,adminDetails.branch,branch,loanWorkFlow]);var editHideBranch=function editHideBranch(){setHideBranch(true);};var editHideAdminRole=function editHideAdminRole(){setHideAdminRole(true);};var editHideWorkFlow=function editHideWorkFlow(){setHideWorkFlow(true);};var handleEventSelect=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(e.target.name===\"role\"){setWorkFlow(e.target.value);}if(e.target.value!==\"LOAN OFFICER\"){setLoanOfficerCode(\"\");}setRoleName(e.target.value);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function handleEventSelect(_x){return _ref2.apply(this,arguments);};}();var handleChangeLoading=function handleChangeLoading(name,value){return setLoading(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var getRoleId,payload,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();handleChangeLoading(\"submit\",true);getRoleId=null;_context3.prev=3;roles&&roles.forEach(function(option){if(roleName===option.name){getRoleId=option.id;}});payload={email:email,firstName:firstName,lastName:lastName,phoneNumber:phoneNumber,branchId:branchId,roleName:roleName,roleId:!isNaN(getRoleId)?parseInt(getRoleId):null,loanOfficerCode:loanOfficerCode,staffId:staffId,rank:rank};_context3.next=8;return updateAdminProfile(id,payload);case 8:response=_context3.sent;if(!response.error){_context3.next=13;break;}notify(response.message,\"error\");handleChangeLoading(\"submit\",false);return _context3.abrupt(\"return\");case 13:console.log(e,payload);notify(response.message,\"success\");handleChangeLoading(\"submit\",false);setTimeout(function(){history.push(\"/pages/superAdmin\");},2500);return _context3.abrupt(\"return\");case 20:_context3.prev=20;_context3.t0=_context3[\"catch\"](3);notify(\"Something went wrong\",\"success\");handleChangeLoading(\"submit\",false);return _context3.abrupt(\"return\");case 25:case\"end\":return _context3.stop();}}},_callee3,null,[[3,20]]);}));return function handleSubmit(_x2){return _ref3.apply(this,arguments);};}();var handleDeleteModal=function handleDeleteModal(){return/*#__PURE__*/_jsx(DeleteModal,{deleteModalBtn:deleteModalBtn,setDeleteModalBtn:setDeleteModalBtn,deleteData:deleteData});};var checkDeleteModal=function checkDeleteModal(){setDeleteModalBtn(function(prev){return!prev;});var data={id:id,adminName:adminDetails.firstname,adminRole:roleName};setDeleteData(data);};console.log(adminDetails);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return history.goBack();},className:\"btn btn-primary back-btn\",children:/*#__PURE__*/_jsx(ArrowRightShort,{})}),\"Admin Details\"]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"small-admin-details\",children:[/*#__PURE__*/_jsx(\"img\",{src:face,alt:\"\"}),adminName||\"NPF Admin\",/*#__PURE__*/_jsx(\"i\",{className:\"arrow down\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"some-container\",children:handleDeleteModal()})]})]}),isLoading.loadPage?/*#__PURE__*/_jsx(\"div\",{className:\"searching-block\",children:/*#__PURE__*/_jsx(\"div\",{className:\"svg-holder\",children:/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"})})}):/*#__PURE__*/_jsx(\"main\",{className:\"loan-inprocess-page\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"customer-details row animated fadeIn delay-05s\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loan-details col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"details-header\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Staff ID:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"First Name:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Last Name:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Email:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Rank:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Phone Number:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Branch:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Admin Role:\"})}),workFlow!==\"\"&&workFlow===\"LOAN OFFICER\"&&/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Workflow Level:\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personal-details col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"details-header\",children:\"Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"staffId\",id:\"staffId\",className:\"form-control\",defaultValue:adminDetails.staff_id,onChange:function onChange(e){setStaffId(e.target.value);},value:staffId})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstname\",id:\"firstname\",className:\"form-control\",defaultValue:adminDetails.firstname,onChange:function onChange(e){return setFirstName(e.target.value);},value:firstName})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastname\",id:\"lastname\",className:\"form-control\",defaultValue:adminDetails.lastname,onChange:function onChange(e){return setLastName(e.target.value);},value:lastName})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",className:\"form-control\",defaultValue:adminDetails.username,onChange:function onChange(e){setEmail(e.target.value);},value:email})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"rank\",id:\"rank\",className:\"form-control\",defaultValue:adminDetails.rank,onChange:function onChange(e){setRank(e.target.value);},value:rank})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",id:\"phone\",className:\"form-control\",defaultValue:adminDetails.phone,onChange:function onChange(e){return setPhoneNumber(e.target.value);},value:phoneNumber})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:!hideBranch?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"branch\",id:\"branch\",className:\"form-control\",defaultValue:branchName,onFocus:editHideBranch}):/*#__PURE__*/_jsx(\"select\",{name:\"branch\",class:\"btn dropdown-toggle\",style:{border:\"1px solid #ccc\",outline:\"none\",borderRadius:\"10px\",fontSize:\"14px\",padding:\"0.8em 1em\",width:\"100%\",fontWeight:\"600\"},value:branchId,onChange:function onChange(e){setBranchId(e.target.value);},children:branch&&branch.map(function(option,idx){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"option\",{value:option.id,children:option.name},idx+option.code)});})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:!hideAdminRole?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"role\",id:\"role\",className:\"form-control\",defaultValue:roleName,onFocus:editHideAdminRole}):/*#__PURE__*/_jsx(\"select\",{name:\"role\",class:\"btn dropdown-toggle\",style:{border:\"1px solid #ccc\",outline:\"none\",borderRadius:\"10px\",fontSize:\"14px\",padding:\"0.8em 1em\",width:\"100%\",fontWeight:\"600\"},value:roleName,onChange:function onChange(e){handleEventSelect(e);},children:roles&&roles.map(function(option,idx){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"option\",{value:option.name,children:option.name},idx+option.code)});})})}),workFlow!==\"\"&&workFlow===\"LOAN OFFICER\"&&/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:!hideWorkFlow?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"workflowlevel\",id:\"workflowlevel\",className:\"form-control\",defaultValue:workFlow,onFocus:editHideWorkFlow}):/*#__PURE__*/_jsx(\"select\",{name:\"workflowlevel\",class:\"btn dropdown-toggle\",style:{border:\"1px solid #ccc\",outline:\"none\",borderRadius:\"10px\",fontSize:\"14px\",padding:\"0.8em 1em\",width:\"100%\",fontWeight:\"600\"},value:loanOfficerCode,onChange:function onChange(e){setLoanOfficerCode(e.target.value);},children:loanWorkFlow&&loanWorkFlow.map(function(option,idx){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"option\",{value:option.code,children:option.name!==\"devnpfuser\"&&option.name},idx+option.code)});})})}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn export-ifrs-btn mt-3\",children:[\"Save Changes\",/*#__PURE__*/_jsx(\"span\",{className:\"pl-2\",children:isLoading.submit?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):/*#__PURE__*/_jsx(ArrowRightCircle,{})})]})]})]})})]});};export default AdminDetails;","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/admin/adminDetails.js"],"names":["React","useCallback","useState","useEffect","useHistory","useLocation","useRouteMatch","useParams","jwt_decode","getAccessToken","getAdminName","useAuth","errorHandler","validateToken","face","notify","getAdminProfileDetails","getAdminRoles","updateAdminProfile","getBranches","getRoles","DeleteModal","AdminDetails","history","location","auth","search","adminName","userFull","submit","rejectApplication","approveApplication","printApplication","loadPage","isLoading","setLoading","adminDetails","setAdminDetails","branch","setBranch","branchName","setBranchName","branchId","setBranchId","roles","setRoles","roleName","setRoleName","loanWorkFlow","setLoanWorkFlow","workFlow","setWorkFlow","hideBranch","setHideBranch","hideWorkFlow","setHideWorkFlow","loanOfficerCode","setLoanOfficerCode","firstName","setFirstName","lastName","setLastName","email","setEmail","phoneNumber","setPhoneNumber","hideAdminRole","setHideAdminRole","deleteModalBtn","setDeleteModalBtn","staffId","setStaffId","rank","setRank","adminRole","setAdminRole","deleteData","setDeleteData","searchParams","URLSearchParams","id","get","token","handleGetAdminProfileDetails","handleChangeLoading","response","result","data","status","console","log","forEach","option","parseInt","name","AdminUserRoles","code","editHideBranch","editHideAdminRole","editHideWorkFlow","handleEventSelect","e","preventDefault","target","value","prev","handleSubmit","getRoleId","payload","roleId","isNaN","error","message","setTimeout","push","handleDeleteModal","checkDeleteModal","firstname","goBack","staff_id","lastname","username","phone","border","outline","borderRadius","fontSize","padding","width","fontWeight","map","idx"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect } from \"react\";\nimport {\n  useHistory,\n  useLocation,\n  useRouteMatch,\n  useParams,\n} from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport { ReactComponent as ArrowRightCircle } from \"../../assets/icons/arrow-right-circle.svg\";\nimport { ReactComponent as ArrowRightShort } from \"../../assets/icons/arrow-right-short.svg\";\nimport { ReactComponent as TimesCircleFill } from \"../../assets/icons/times-circle-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../../assets/icons/spinner.svg\";\nimport { getAccessToken, getAdminName } from \"../../utils/localStorageService\";\nimport { useAuth } from \"../../components/utilities\";\nimport errorHandler, { validateToken } from \"../../utils/errorHandler\";\nimport face from \"../../assets/img/placeholder-img.png\";\nimport notify from \"../../utils/notification\";\nimport {\n  getAdminProfileDetails,\n  getAdminRoles,\n  updateAdminProfile,\n} from \"../../services/adminService\";\nimport { getBranches, getRoles } from \"../../services/loanService\";\nimport { DeleteModal } from \"../../components/loanManagement/customer/approvalModal\";\n\nconst AdminDetails = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const auth = useAuth();\n  const { search } = location;\n  const adminName = getAdminName();\n  const [isLoading, setLoading] = useState({\n    userFull: false,\n    submit: false,\n    rejectApplication: false,\n    approveApplication: false,\n    printApplication: false,\n    loadPage: false,\n  });\n  const [adminDetails, setAdminDetails] = useState({});\n  const [branch, setBranch] = useState([]);\n  const [branchName, setBranchName] = useState(\"\");\n  const [branchId, setBranchId] = useState(\"\");\n  const [roles, setRoles] = useState([]);\n  const [roleName, setRoleName] = useState(null);\n  const [loanWorkFlow, setLoanWorkFlow] = useState([]);\n  const [workFlow, setWorkFlow] = useState(\"\");\n  const [hideBranch, setHideBranch] = useState(false);\n  const [hideWorkFlow, setHideWorkFlow] = useState(false);\n  const [loanOfficerCode, setLoanOfficerCode] = useState(null);\n  const [firstName, setFirstName] = useState(null);\n  const [lastName, setLastName] = useState(null);\n  const [email, setEmail] = useState(null);\n  const [phoneNumber, setPhoneNumber] = useState(null);\n  const [hideAdminRole, setHideAdminRole] = useState(false);\n  const [deleteModalBtn, setDeleteModalBtn] = useState(false);\n  const [staffId, setStaffId] = useState(null);\n  const [rank, setRank] = useState(null);\n  const [adminRole, setAdminRole] = useState(\"\");\n  const [deleteData, setDeleteData] = useState({});\n  const searchParams = new URLSearchParams(search);\n  const id = searchParams.get(\"id\");\n\n  const token = getAccessToken();\n\n  useEffect(() => {\n    validateToken(token, history, jwt_decode, auth, notify);\n  }, [auth, history, token]);\n\n  useEffect(() => {\n    setHideBranch(false);\n    setHideAdminRole(false);\n    setDeleteModalBtn(false);\n\n    const handleGetAdminProfileDetails = async () => {\n      try {\n        handleChangeLoading(\"loadPage\", true);\n        const response = await getAdminProfileDetails(id);\n        const result = await getBranches();\n        const roles = await getAdminRoles();\n        const workFlow = await getRoles();\n\n        if (response.data && response.data.status) {\n          console.log(response.data);\n          setAdminDetails(response.data.data);\n          setBranch(result.data);\n          setRoles(roles.result);\n          setLoanWorkFlow(workFlow.data);\n          handleChangeLoading(\"loadPage\", false);\n          return;\n        }\n      } catch (error) {\n        console.log(error);\n        handleChangeLoading(\"loadPage\", false);\n        return;\n      }\n      handleChangeLoading(\"loadPage\", false);\n    };\n    handleGetAdminProfileDetails();\n  }, []);\n\n  useEffect(() => {\n    branch &&\n      branch.forEach((option) => {\n        if (parseInt(adminDetails.branch) === option.id) {\n          setBranchName(option.name);\n        }\n      });\n\n    adminDetails.AdminUserRoles &&\n      adminDetails.AdminUserRoles.forEach((option) => {\n        setRoleName(option.name);\n\n        loanWorkFlow &&\n          loanWorkFlow.forEach((data) => {\n            if (option.code === data.code) {\n              setWorkFlow(data.name);\n            }\n          });\n      });\n  }, [adminDetails.AdminUserRoles, adminDetails.branch, branch, loanWorkFlow]);\n\n  const editHideBranch = () => {\n    setHideBranch(true);\n  };\n\n  const editHideAdminRole = () => {\n    setHideAdminRole(true);\n  };\n\n  const editHideWorkFlow = () => {\n    setHideWorkFlow(true);\n  };\n\n  const handleEventSelect = async (e) => {\n    e.preventDefault();\n\n    if (e.target.name === \"role\") {\n      setWorkFlow(e.target.value);\n    }\n\n    if (e.target.value !== \"LOAN OFFICER\") {\n      setLoanOfficerCode(\"\");\n    }\n\n    setRoleName(e.target.value);\n  };\n\n  const handleChangeLoading = (name, value) =>\n    setLoading((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    handleChangeLoading(\"submit\", true);\n    let getRoleId = null;\n    try {\n      roles &&\n        roles.forEach((option) => {\n          if (roleName === option.name) {\n            getRoleId = option.id;\n          }\n        });\n\n      const payload = {\n        email,\n        firstName,\n        lastName,\n        phoneNumber,\n        branchId: branchId,\n        roleName,\n        roleId: !isNaN(getRoleId) ? parseInt(getRoleId) : null,\n        loanOfficerCode,\n        staffId,\n        rank,\n      };\n\n      const response = await updateAdminProfile(id, payload);\n\n      if (response.error) {\n        notify(response.message, \"error\");\n        handleChangeLoading(\"submit\", false);\n        return;\n      }\n      console.log(e, payload);\n      notify(response.message, \"success\");\n      handleChangeLoading(\"submit\", false);\n      setTimeout(() => {\n        history.push(\"/pages/superAdmin\");\n      }, 2500);\n      return;\n    } catch (error) {\n      notify(\"Something went wrong\", \"success\");\n      handleChangeLoading(\"submit\", false);\n      return;\n    }\n  };\n\n  const handleDeleteModal = () => {\n    return (\n      <DeleteModal\n        deleteModalBtn={deleteModalBtn}\n        setDeleteModalBtn={setDeleteModalBtn}\n        deleteData={deleteData}\n      />\n    );\n  };\n\n  const checkDeleteModal = () => {\n    setDeleteModalBtn((prev) => !prev);\n\n    const data = {\n      id: id,\n      adminName: adminDetails.firstname,\n      adminRole: roleName,\n    };\n\n    setDeleteData(data);\n  };\n\n  console.log(adminDetails);\n\n  return (\n    <>\n      <header>\n        <div>\n          <h1>\n            <button\n              onClick={(e) => history.goBack()}\n              className=\"btn btn-primary back-btn\"\n            >\n              <ArrowRightShort />\n            </button>\n            Admin Details\n          </h1>\n        </div>\n        <div>\n          <div className=\"small-admin-details\">\n            <img src={face} alt=\"\" />\n            {adminName || `NPF Admin`}\n            <i className=\"arrow down\"></i>\n          </div>\n          <div className=\"some-container\">\n            {/* <button\n              // disabled={\n              //   adminWorkFlowLevel >= loan.loanApp.workFlowLevel ? false : true\n              // }\n              className={`btn reject-loan-btn ${\n                isLoading.rejectApplication ? \"loading disabled\" : \"\"\n              }`}\n              onClick={checkDeleteModal}\n            >\n              {isLoading.rejectApplication ? (\n                <SpinnerIcon className=\"rotating\" />\n              ) : (\n                <>\n                  <TimesCircleFill /> Delete Profile\n                </>\n              )}\n            </button> */}\n            {handleDeleteModal()}\n          </div>\n        </div>\n      </header>\n\n      {isLoading.loadPage ? (\n        <div className=\"searching-block\">\n          <div className=\"svg-holder\">\n            <SpinnerIcon className=\"rotating\" />\n          </div>\n        </div>\n      ) : (\n        <main className=\"loan-inprocess-page\">\n          <form\n            onSubmit={handleSubmit}\n            className=\"customer-details row animated fadeIn delay-05s\"\n          >\n            <div className=\"loan-details col\">\n              <div className=\"details-header\">Admin</div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Staff ID:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">First Name:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Last Name:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Email:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Rank:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Phone Number:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Branch:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Admin Role:</div>\n              </div>\n              {workFlow !== \"\" && workFlow === \"LOAN OFFICER\" && (\n                <div className=\"row\">\n                  <div className=\"col-12 mb-3\">Workflow Level:</div>\n                </div>\n              )}\n            </div>\n            <div className=\"personal-details col\">\n              <div className=\"details-header\">Details</div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"staffId\"\n                  id=\"staffId\"\n                  className=\"form-control\"\n                  defaultValue={adminDetails.staff_id}\n                  onChange={(e) => {\n                    setStaffId(e.target.value);\n                  }}\n                  value={staffId}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"firstname\"\n                  id=\"firstname\"\n                  className=\"form-control\"\n                  defaultValue={adminDetails.firstname}\n                  onChange={(e) => setFirstName(e.target.value)}\n                  value={firstName}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"lastname\"\n                  id=\"lastname\"\n                  className=\"form-control\"\n                  defaultValue={adminDetails.lastname}\n                  onChange={(e) => setLastName(e.target.value)}\n                  value={lastName}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  id=\"email\"\n                  className=\"form-control\"\n                  defaultValue={adminDetails.username}\n                  onChange={(e) => {\n                    setEmail(e.target.value);\n                  }}\n                  value={email}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"rank\"\n                  id=\"rank\"\n                  className=\"form-control\"\n                  defaultValue={adminDetails.rank}\n                  onChange={(e) => {\n                    setRank(e.target.value);\n                  }}\n                  value={rank}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"phone\"\n                  id=\"phone\"\n                  className=\"form-control\"\n                  defaultValue={adminDetails.phone}\n                  onChange={(e) => setPhoneNumber(e.target.value)}\n                  value={phoneNumber}\n                />\n              </div>\n\n              <div className=\"row col-9\">\n                {!hideBranch ? (\n                  <input\n                    type=\"text\"\n                    name=\"branch\"\n                    id=\"branch\"\n                    className=\"form-control\"\n                    defaultValue={branchName}\n                    onFocus={editHideBranch}\n                  />\n                ) : (\n                  <select\n                    name=\"branch\"\n                    class=\"btn dropdown-toggle\"\n                    style={{\n                      border: \"1px solid #ccc\",\n                      outline: \"none\",\n                      borderRadius: \"10px\",\n                      fontSize: \"14px\",\n                      padding: \"0.8em 1em\",\n                      width: \"100%\",\n                      fontWeight: \"600\",\n                    }}\n                    value={branchId}\n                    onChange={(e) => {\n                      setBranchId(e.target.value);\n                    }}\n                  >\n                    {branch &&\n                      branch.map((option, idx) => (\n                        <>\n                          <option key={idx + option.code} value={option.id}>\n                            {option.name}\n                          </option>\n                        </>\n                      ))}\n                  </select>\n                )}\n              </div>\n\n              <div className=\"row col-9\">\n                {!hideAdminRole ? (\n                  <input\n                    type=\"text\"\n                    name=\"role\"\n                    id=\"role\"\n                    className=\"form-control\"\n                    defaultValue={roleName}\n                    onFocus={editHideAdminRole}\n                  />\n                ) : (\n                  <select\n                    name=\"role\"\n                    class=\"btn dropdown-toggle\"\n                    style={{\n                      border: \"1px solid #ccc\",\n                      outline: \"none\",\n                      borderRadius: \"10px\",\n                      fontSize: \"14px\",\n                      padding: \"0.8em 1em\",\n                      width: \"100%\",\n                      fontWeight: \"600\",\n                    }}\n                    value={roleName}\n                    onChange={(e) => {\n                      handleEventSelect(e);\n                    }}\n                  >\n                    {roles &&\n                      roles.map((option, idx) => {\n                        return (\n                          <>\n                            <option key={idx + option.code} value={option.name}>\n                              {option.name}\n                            </option>\n                          </>\n                        );\n                      })}\n                  </select>\n                )}\n              </div>\n\n              {workFlow !== \"\" && workFlow === \"LOAN OFFICER\" && (\n                <div className=\"row col-9\">\n                  {!hideWorkFlow ? (\n                    <input\n                      type=\"text\"\n                      name=\"workflowlevel\"\n                      id=\"workflowlevel\"\n                      className=\"form-control\"\n                      defaultValue={workFlow}\n                      onFocus={editHideWorkFlow}\n                    />\n                  ) : (\n                    <select\n                      name=\"workflowlevel\"\n                      class=\"btn dropdown-toggle\"\n                      style={{\n                        border: \"1px solid #ccc\",\n                        outline: \"none\",\n                        borderRadius: \"10px\",\n                        fontSize: \"14px\",\n                        padding: \"0.8em 1em\",\n                        width: \"100%\",\n                        fontWeight: \"600\",\n                      }}\n                      value={loanOfficerCode}\n                      onChange={(e) => {\n                        setLoanOfficerCode(e.target.value);\n                      }}\n                    >\n                      {loanWorkFlow &&\n                        loanWorkFlow.map((option, idx) => (\n                          <>\n                            <option key={idx + option.code} value={option.code}>\n                              {option.name !== \"devnpfuser\" && option.name}\n                            </option>\n                          </>\n                        ))}\n                    </select>\n                  )}\n                </div>\n              )}\n              <button className=\"btn export-ifrs-btn mt-3\">\n                Save Changes\n                <span className=\"pl-2\">\n                  {isLoading.submit ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    <ArrowRightCircle />\n                  )}\n                </span>\n              </button>\n            </div>\n          </form>\n        </main>\n      )}\n    </>\n  );\n};\n\nexport default AdminDetails;\n"]},"metadata":{},"sourceType":"module"}