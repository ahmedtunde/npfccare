{"ast":null,"code":"import _defineProperty from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Checkboxes beside customers are commented out to until feature to export data of selected customers is needed\n// -----------------------------------------------\nimport React,{Fragment,useState,useEffect,useRef,useCallback}from\"react\";import jwt_decode from\"jwt-decode\";import{Route,Switch,useHistory,useRouteMatch}from\"react-router-dom\";import moment from\"moment\";import face from\"../assets/img/placeholder-img.png\";import placeholderImg from\"../assets/img/placeholder-img.png\";import{ReactComponent as TimesIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/times.svg\";import{ReactComponent as CheckCircleFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/check-circle-fill.svg\";import{ReactComponent as SearchIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/search.svg\";import{ReactComponent as ExportIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/export.svg\";import{ReactComponent as Funnel}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/funnel.svg\";import{ReactComponent as ArrowLeftShortCircleFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/arrow-left-short-circle-fill.svg\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/spinner.svg\";import{ReactComponent as NothingFoundIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/nothing-found.svg\";import Customer from\"./customer\";import{getCustomers,getExportCustomersData,searchCustomers}from\"../services/customerService\";import errorHandler,{validateToken}from\"../utils/errorHandler\";import notify from\"../utils/notification\";import{handleHideModal,handleOpenModal,useAuth}from\"./utilities\";import ReactPaginate from\"react-paginate\";import Modal from\"./modal\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{getAccessToken,getAdminName}from\"../utils/localStorageService\";var Customers=function Customers(props){var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path;var history=useHistory();var auth=useAuth();var adminName=getAdminName();// useCallback ensures that handle error function isn't recreated on every render\nvar handleError=useCallback(function(errorObject,notify,cb){return errorHandler(auth)(errorObject,notify,cb);},[auth]);var _useState=useState(function(){return Array(0).fill(\"\").map(function(v,idx){return{id:\"40\".concat(idx),bvnhash:\"\",firstname:\"\",lastname:\"\",middlename:null,phone:\"\",simswapstatus:null,otpstatus:null,email:\"\",dob:\"1999-06-30T00:00:00.000Z\",pob:null,bucket:\"npf-mfb\",photo_location:\"\",photo_key:\"40/photo/livelinesscheck.png\",photo_number:null,video_location:\"\",video_key:\"\",signature_location:\"\",signature_key:\"\",document_location:\"\",document_key:\"\",document_number:\"\",document_type_id:2,documentschecked:null,isnewbankcustomer:null,document_issue_date:\"\",document_expiry_date:\"\",isotpverified:true,livelinesschecked:null,salary_officer:false,force_number:\"N/A\",ippis_number:\"N/A\",address:\"N/A\",has_pin:true,transfer_limit:\"\",createdAt:\"2020-11-04T15:11:59.904Z\",updatedAt:\"2020-11-06T09:11:40.700Z\",user:62,accountNumber:\"0209525729\",bvn:\"\",accountStatus:idx===0||idx===2?false:true,liveliness:idx===0||idx===2?false:true,PND:v.accountStatus===1?true:false,signup_incomplete:false};});}),_useState2=_slicedToArray(_useState,2),customers=_useState2[0],setCustomers=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),displayedCustomers=_useState4[0],setDisplayedCustomers=_useState4[1];var _useState5=useState({search:\"\",start_date:\"\",end_date:\"\"}),_useState6=_slicedToArray(_useState5,2),values=_useState6[0],setValues=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];var _useState9=useState(\"all\"),_useState10=_slicedToArray(_useState9,2),showCustomers=_useState10[0],setShowCustomers=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isLoading=_useState12[0],setLoading=_useState12[1];var _useState13=useState({method:\"\",param:\"\"}),_useState14=_slicedToArray(_useState13,2),filter=_useState14[0],setFilter=_useState14[1];var _useState15=useState(5),_useState16=_slicedToArray(_useState15,2),itemsPerPage=_useState16[0],setItemsPerPage=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),selectedCustomers=_useState18[0],setSelectedCustomers=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isDataExporting=_useState20[0],setDataExporting=_useState20[1];var isSearching=useRef(false);var token=getAccessToken();useEffect(function(){validateToken(token,history,jwt_decode,auth,notify);},[auth,history,token]);// useCallback ensures that handle error function isn't recreated on every render\nvar fetchCustomers=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(method,param){var data,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);data=[method===\"channel\"?param:\"\",method===\"reg_complete\"?param:\"\"];_context.prev=2;_context.next=5;return getCustomers.apply(void 0,data);case 5:result=_context.sent;setLoading(false);if(!result.error){_context.next=9;break;}return _context.abrupt(\"return\",notify(result.message,\"error\"));case 9:// channel ? setDisplayedCustomers([...result.result]) :\nsetCustomers(function(prev){return _toConsumableArray(result===null||result===void 0?void 0:result.result);});_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);handleError(_context.t0,notify,function(){return setLoading(false);});case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}(),[handleError]);useEffect(function(){fetchCustomers();},[fetchCustomers]);useEffect(function(){setDisplayedCustomers(customers);},[customers]);useEffect(function(){var tempCustomers;setCurrentPage(1);if(showCustomers===\"all\")tempCustomers=customers;// for now enabled refers to PND inactive while restricted refers to active PND\n// if(showCustomers === \"active\" || showCustomers === \"restricted\"){\n//   tempCustomers = customers.filter(({enabled}) => (showCustomers === \"active\" && enabled) || (showCustomers === \"restricted\" && !enabled));\n// };\nif(showCustomers===\"active\"||showCustomers===\"restricted\"){tempCustomers=customers.filter(function(_ref2){var PND=_ref2.PND;return showCustomers===\"active\"&&!PND||showCustomers===\"restricted\"&&PND;});}// if(showCustomers === \"active\"){\n//   tempCustomers = customers.filter(({enabled}) => {\n//     if (showCustomers === \"active\" && enabled) return true;\n//     // if (showCustomers === \"pending\" && !accountStatus) return true;\n//     return false;\n//   });\n// };\nif(showCustomers===\"pending\"){tempCustomers=customers.filter(function(_ref3){var isnewbankcustomer=_ref3.isnewbankcustomer,livelinesschecked=_ref3.livelinesschecked,documentschecked=_ref3.documentschecked;if(showCustomers===\"pending\"&&(isnewbankcustomer===null||livelinesschecked===\"PENDING\"||documentschecked===null))return true;return false;});}setDisplayedCustomers(tempCustomers);},[showCustomers,customers]);var handleNavigateToCustomer=function handleNavigateToCustomer(e){var element=e.target;if(!element.classList.contains(\"action-btn\"))return;var userId=element.dataset.userId;// const requestedCustomer = customers[customers.findIndex(v => v.id.toString() === userId)];\n// history.push(`${path}/${userId}`, {requestedCustomer: requestedCustomer});\nhistory.push(\"\".concat(path,\"/\").concat(userId));};var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value,checked=_e$target.checked;if(name.includes(\"selCustomer\")){var id=name.replace(\"selCustomer-\",\"\");id=id===\"all\"?id:parseInt(id);var newSelectedCustomers;if(checked){newSelectedCustomers=id===\"all\"?[\"all\"]:[].concat(_toConsumableArray(selectedCustomers),[id]);}else{newSelectedCustomers=selectedCustomers.includes(\"all\")&&id!==\"all\"?_toConsumableArray(displayedCustomers.map(function(_ref4){var id=_ref4.id;return id;})):_toConsumableArray(selectedCustomers);var idx=newSelectedCustomers.findIndex(function(v){return v===id;});newSelectedCustomers.splice(idx,1);}setSelectedCustomers(newSelectedCustomers);return;}setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,name===\"search\"?value.trim():value));});if(name===\"search\")handleSearchCustomers(value);};var handleSearchCustomers=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(searchPhrase){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setShowCustomers(\"all\");setCurrentPage(1);// setFilter(\"\");\nif(searchPhrase){_context2.next=7;break;}isSearching.current=false;setLoading(false);setDisplayedCustomers(customers);return _context2.abrupt(\"return\");case 7:isSearching.current=true;setLoading(true);_context2.prev=9;_context2.next=12;return searchCustomers(searchPhrase);case 12:result=_context2.sent;setLoading(false);if(!result.error){_context2.next=16;break;}return _context2.abrupt(\"return\",notify(result.message,\"error\"));case 16:isSearching.current&&setDisplayedCustomers(result.result);isSearching.current=false;_context2.next=23;break;case 20:_context2.prev=20;_context2.t0=_context2[\"catch\"](9);handleError(_context2.t0,notify,function(){return setLoading(false);});case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[9,20]]);}));return function handleSearchCustomers(_x3){return _ref5.apply(this,arguments);};}();var handleFilterCustomers=function handleFilterCustomers(method,param){setFilter({method:method,param:param});fetchCustomers(method,param);setCurrentPage(1);setShowCustomers(\"all\");setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{search:\"\"});});};var handleExportData=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var customer_ids,start_date,end_date,requestTime,result,url,link;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setDataExporting(true);handleHideModal(\"#exportCustomersDataModal\");_context3.prev=2;customer_ids=selectedCustomers.includes(\"all\")?[]:selectedCustomers;start_date=values.start_date?values.start_date.toISOString():\"\";end_date=values.end_date?values.end_date.toISOString():\"\";requestTime=moment().format(\"DD-MM-YY\");// fetch result\n_context3.next=9;return getExportCustomersData({customer_ids:customer_ids,start_date:start_date,end_date:end_date});case 9:result=_context3.sent;setDataExporting(false);// handle download\nurl=window.URL.createObjectURL(result);link=document.createElement(\"a\");link.href=url;link.setAttribute(\"download\",\"Customers \".concat(requestTime,\".xlsx\"));//or any other extension\ndocument.body.appendChild(link);link.click();setTimeout(function(){document.body.removeChild(link);window.URL.revokeObjectURL(url);setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{start_date:null,end_date:null});});},500);_context3.next=23;break;case 20:_context3.prev=20;_context3.t0=_context3[\"catch\"](2);handleError(_context3.t0,notify,function(){return setDataExporting(false);});case 23:case\"end\":return _context3.stop();}}},_callee3,null,[[2,20]]);}));return function handleExportData(){return _ref6.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:path,children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Customer Accounts Management\"}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"a\",{className:showCustomers===\"all\"?\"active\":\"\",onClick:function onClick(e){return setShowCustomers(\"all\");},children:\"All Customers\"}),/*#__PURE__*/_jsx(\"a\",{className:showCustomers===\"active\"?\"active\":\"\",onClick:function onClick(e){return setShowCustomers(\"active\");},children:\"Active\"}),/*#__PURE__*/_jsx(\"a\",{className:showCustomers===\"pending\"?\"active\":\"\",onClick:function onClick(e){return setShowCustomers(\"pending\");},children:\"Pending\"}),/*#__PURE__*/_jsx(\"a\",{className:showCustomers===\"restricted\"?\"active\":\"\",onClick:function onClick(e){return setShowCustomers(\"restricted\");},children:\"Restricted\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"small-admin-details\",children:[/*#__PURE__*/_jsx(\"img\",{src:face,alt:\"\"}),adminName||\"NPF Admin\",/*#__PURE__*/_jsx(\"i\",{className:\"arrow down\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"some-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-div\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"search\",children:/*#__PURE__*/_jsx(SearchIcon,{})}),/*#__PURE__*/_jsx(\"input\",{type:\"search\",className:\"form-control\",name:\"search\",id:\"search\",\"aria-label\":\"Search for customers\",value:values.search,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleOpenModal(\"#exportCustomersDataModal\");},id:\"exportCustomersData\",className:\"btn export-data-btn d-block \".concat(isDataExporting?\"loading disabled\":\"\"),children:isDataExporting?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ExportIcon,{}),\" Export Data\"]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn filter-btn dropdown-toggle\",type:\"button\",id:\"dropdownMenuButton\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:filter.param===\"bvn\"?\"BVN\":filter.param===\"phone\"?\"Phone\":filter.param===\"bank\"?\"Bank\":filter.param===\"true\"?\"Completed\":filter.param===\"false\"?\"InComplete\":/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Funnel,{}),\" Filter\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"dropdownMenuButton\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"dropdown-header\",children:\"Filter Customers\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-divider\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"dropdown-header\",children:\"By Registration Mode\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item \".concat(filter.param===\"bvn\"?\"active\":\"\"),onClick:function onClick(e){return handleFilterCustomers(\"channel\",\"bvn\");},children:\"BVN\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item \".concat(filter.param===\"phone\"?\"active\":\"\"),onClick:function onClick(e){return handleFilterCustomers(\"channel\",\"phone\");},children:\"Phone number\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item \".concat(filter.param===\"bank\"?\"active\":\"\"),onClick:function onClick(e){return handleFilterCustomers(\"channel\",\"bank\");},children:\"Bank\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-divider\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"dropdown-header\",children:\"By Registration Completion\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item \".concat(filter.param===\"true\"?\"active\":\"\"),onClick:function onClick(e){return handleFilterCustomers(\"reg_complete\",\"true\");},children:\"Completed\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item \".concat(filter.param===\"false\"?\"active\":\"\"),onClick:function onClick(e){return handleFilterCustomers(\"reg_complete\",\"false\");},children:\"Incomplete\"}),filter.param&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-divider\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",onClick:function onClick(e){return handleFilterCustomers(\"\",\"\");},children:\"Clear\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"customers-page\",children:[(isLoading||displayedCustomers.length===0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"searching-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"svg-holder \"+(!isLoading?\"not-loading\":\"\"),children:isLoading?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"}):/*#__PURE__*/_jsx(NothingFoundIcon,{})}),!isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"NOTHING FOUND!\"})]}),!isLoading&&displayedCustomers.length!==0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"color-dark-text-blue\",children:[\"Customers per page:\",\" \",/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{display:\"inline-block\"},children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",onChange:function onChange(e){setItemsPerPage(e.target.value);setCurrentPage(1);},value:itemsPerPage,children:[/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:20,children:\"20\"}),/*#__PURE__*/_jsx(\"option\",{value:50,children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:100,children:\"100\"}),/*#__PURE__*/_jsx(\"option\",{value:150,children:\"150\"}),/*#__PURE__*/_jsx(\"option\",{value:200,children:\"200\"})]})})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-borderless table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"color-dark-text-blue\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"BVN\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"PND Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Facial Liveliness Check\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Registration Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{onClick:handleNavigateToCustomer,children:[/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"}),displayedCustomers.map(function(v,idx){var initialBoundary=(currentPage-1)*itemsPerPage+1;var finalBoundary=currentPage*itemsPerPage;var itemNumber=idx+1;if(itemNumber<initialBoundary||itemNumber>finalBoundary)return null;var pseudoAccStatus=!v.PND;var showIncompleteBadge=v.signup_incomplete&&(filter.method!==\"reg_complete\"||filter.param!==\"false\");return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"customer-card\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"major-details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"customer-img\",children:/*#__PURE__*/_jsx(\"img\",{src:v.photo_location||placeholderImg,className:\"\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name font-weight-bold\",children:[v.firstname,\" \",v.lastname,showIncompleteBadge&&\" (Incomplete)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"email font-weight-light\",children:v.email})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"bvn font-weight-light\",children:v.bvnhash||\"N/A\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"phone font-weight-light\",children:[\"(234) \",v.phone.replace(\"234\",\"0\")]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"account-status \".concat(pseudoAccStatus?\"active\":\"pending\"),children:pseudoAccStatus?\"INACTIVE\":\"ACTIVE\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"liveliness \".concat(v.video_location?\"provided\":\"\"),children:[v.video_location?/*#__PURE__*/_jsx(CheckCircleFill,{}):/*#__PURE__*/_jsx(TimesIcon,{}),v.video_location?\" P\":\"Not p\",\"rovided\"]})}),/*#__PURE__*/_jsx(\"td\",{children:moment(v.createdAt).format(\"Do MMMM YYYY\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{\"data-user-id\":v.id,className:\"btn btn-success action-btn\",children:\"View\"})})]}),idx!==displayedCustomers.length-1&&/*#__PURE__*/_jsx(\"tr\",{className:\"spacer\"})]},\"\".concat(v.user,\" + \").concat(idx));})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"audit-history-footer\",children:/*#__PURE__*/_jsx(ReactPaginate,{pageCount:Math.ceil(displayedCustomers.length/itemsPerPage)||1,marginPagesDisplayed:2,pageRangeDisplayed:3,forcePage:currentPage-1,onPageChange:function onPageChange(selectedItem){return setCurrentPage(selectedItem.selected+1);},containerClassName:\"pagination-btns\",activeLinkClassName:\"active\",pageLinkClassName:\"btn\",previousLabel:/*#__PURE__*/_jsx(ArrowLeftShortCircleFill,{}),previousLinkClassName:\"btn icon\",nextLabel:/*#__PURE__*/_jsx(ArrowLeftShortCircleFill,{style:{transform:\"rotateY(180deg)\"}}),nextLinkClassName:\"btn icon\",disabledClassName:\"disabled\"})}),\" \"]})]}),/*#__PURE__*/_jsx(Modal,{id:\"exportCustomersDataModal\",showCloseX:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title color-dark-text-blue\",id:\"exportCustomersDataModalLabel\",children:\"Export Customers Data\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"color-dark-text-blue\",children:\"Select date range\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-range-container row my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(DatePicker,{selected:values.start_date,value:values.start_date,onChange:function onChange(date){return setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{start_date:date});});},name:\"start_date\",dateFormat:\"dd/MM/yyyy\",placeholderText:\"Start Date\",className:\"start_date form-control\",peekNextMonth:true,showMonthDropdown:true,showYearDropdown:true,dropdownMode:\"select\",locale:\"en-GB\",isClearable:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(DatePicker,{selected:values.end_date,value:values.end_date,onChange:function onChange(date){return setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{end_date:date});});},name:\"end_date\",dateFormat:\"dd/MM/yyyy\",placeholderText:\"End date\",className:\"end_date form-control\",minDate:values.start_date,peekNextMonth:true,showMonthDropdown:true,showYearDropdown:true,dropdownMode:\"select\",locale:\"en-GB\",isClearable:true})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleExportData,disabled:!values.start_date||!values.end_date||values.start_date&&values.end_date&&moment(values.start_date).isAfter(values.end_date),children:\"Continue\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-danger d-block\",children:values.start_date&&values.end_date&&moment(values.start_date).isAfter(values.end_date)&&\"Please select an end date that comes after the start date.\"})]})]})]})})]})}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(path,\"/:userId\"),component:Customer})]});};export default Customers;","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/customers.js"],"names":["React","Fragment","useState","useEffect","useRef","useCallback","jwt_decode","Route","Switch","useHistory","useRouteMatch","moment","face","placeholderImg","Customer","getCustomers","getExportCustomersData","searchCustomers","errorHandler","validateToken","notify","handleHideModal","handleOpenModal","useAuth","ReactPaginate","Modal","DatePicker","getAccessToken","getAdminName","Customers","props","path","history","auth","adminName","handleError","errorObject","cb","Array","fill","map","v","idx","id","bvnhash","firstname","lastname","middlename","phone","simswapstatus","otpstatus","email","dob","pob","bucket","photo_location","photo_key","photo_number","video_location","video_key","signature_location","signature_key","document_location","document_key","document_number","document_type_id","documentschecked","isnewbankcustomer","document_issue_date","document_expiry_date","isotpverified","livelinesschecked","salary_officer","force_number","ippis_number","address","has_pin","transfer_limit","createdAt","updatedAt","user","accountNumber","bvn","accountStatus","liveliness","PND","signup_incomplete","customers","setCustomers","displayedCustomers","setDisplayedCustomers","search","start_date","end_date","values","setValues","currentPage","setCurrentPage","showCustomers","setShowCustomers","isLoading","setLoading","method","param","filter","setFilter","itemsPerPage","setItemsPerPage","selectedCustomers","setSelectedCustomers","isDataExporting","setDataExporting","isSearching","token","fetchCustomers","data","result","error","message","prev","tempCustomers","handleNavigateToCustomer","e","element","target","classList","contains","userId","dataset","push","handleChange","name","value","checked","includes","replace","parseInt","newSelectedCustomers","findIndex","splice","trim","handleSearchCustomers","searchPhrase","current","handleFilterCustomers","handleExportData","customer_ids","toISOString","requestTime","format","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","length","display","initialBoundary","finalBoundary","itemNumber","pseudoAccStatus","showIncompleteBadge","Math","ceil","selectedItem","selected","transform","date","isAfter"],"mappings":"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","sourcesContent":["// Checkboxes beside customers are commented out to until feature to export data of selected customers is needed\n// -----------------------------------------------\nimport React, {\n  Fragment,\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n} from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport { Route, Switch, useHistory, useRouteMatch } from \"react-router-dom\";\nimport moment from \"moment\";\nimport face from \"../assets/img/placeholder-img.png\";\nimport placeholderImg from \"../assets/img/placeholder-img.png\";\nimport { ReactComponent as TimesIcon } from \"../assets/icons/times.svg\";\nimport { ReactComponent as CheckCircleFill } from \"../assets/icons/check-circle-fill.svg\";\nimport { ReactComponent as SearchIcon } from \"../assets/icons/search.svg\";\nimport { ReactComponent as ExportIcon } from \"../assets/icons/export.svg\";\nimport { ReactComponent as Funnel } from \"../assets/icons/funnel.svg\";\nimport { ReactComponent as ArrowLeftShortCircleFill } from \"../assets/icons/arrow-left-short-circle-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../assets/icons/spinner.svg\";\nimport { ReactComponent as NothingFoundIcon } from \"../assets/icons/nothing-found.svg\";\nimport Customer from \"./customer\";\nimport {\n  getCustomers,\n  getExportCustomersData,\n  searchCustomers,\n} from \"../services/customerService\";\nimport errorHandler, { validateToken } from \"../utils/errorHandler\";\nimport notify from \"../utils/notification\";\nimport { handleHideModal, handleOpenModal, useAuth } from \"./utilities\";\nimport ReactPaginate from \"react-paginate\";\nimport Modal from \"./modal\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { getAccessToken, getAdminName } from \"../utils/localStorageService\";\n\nconst Customers = (props) => {\n  const { path } = useRouteMatch();\n  const history = useHistory();\n  const auth = useAuth();\n  const adminName = getAdminName();\n  // useCallback ensures that handle error function isn't recreated on every render\n  const handleError = useCallback(\n    (errorObject, notify, cb) => errorHandler(auth)(errorObject, notify, cb),\n    [auth]\n  );\n\n  const [customers, setCustomers] = useState(() =>\n    Array(0)\n      .fill(\"\")\n      .map((v, idx) => ({\n        id: `40${idx}`,\n        bvnhash: \"\",\n        firstname: \"\",\n        lastname: \"\",\n        middlename: null,\n        phone: \"\",\n        simswapstatus: null,\n        otpstatus: null,\n        email: \"\",\n        dob: \"1999-06-30T00:00:00.000Z\",\n        pob: null,\n        bucket: \"npf-mfb\",\n        photo_location: \"\",\n        photo_key: \"40/photo/livelinesscheck.png\",\n        photo_number: null,\n        video_location: \"\",\n        video_key: \"\",\n        signature_location: \"\",\n        signature_key: \"\",\n        document_location: \"\",\n        document_key: \"\",\n        document_number: \"\",\n        document_type_id: 2,\n        documentschecked: null,\n        isnewbankcustomer: null,\n        document_issue_date: \"\",\n        document_expiry_date: \"\",\n        isotpverified: true,\n        livelinesschecked: null,\n        salary_officer: false,\n        force_number: \"N/A\",\n        ippis_number: \"N/A\",\n        address: \"N/A\",\n        has_pin: true,\n        transfer_limit: \"\",\n        createdAt: \"2020-11-04T15:11:59.904Z\",\n        updatedAt: \"2020-11-06T09:11:40.700Z\",\n        user: 62,\n        accountNumber: \"0209525729\",\n        bvn: \"\",\n        accountStatus: idx === 0 || idx === 2 ? false : true,\n        liveliness: idx === 0 || idx === 2 ? false : true,\n        PND: v.accountStatus === 1 ? true : false,\n        signup_incomplete: false,\n      }))\n  );\n\n  const [displayedCustomers, setDisplayedCustomers] = useState([]);\n  const [values, setValues] = useState({\n    search: \"\",\n    start_date: \"\",\n    end_date: \"\",\n  });\n  const [currentPage, setCurrentPage] = useState(1);\n  const [showCustomers, setShowCustomers] = useState(\"all\");\n  const [isLoading, setLoading] = useState(false);\n  const [filter, setFilter] = useState({\n    method: \"\",\n    param: \"\",\n  });\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  const [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [isDataExporting, setDataExporting] = useState(false);\n  const isSearching = useRef(false);\n  const token = getAccessToken();\n\n  useEffect(() => {\n    validateToken(token, history, jwt_decode, auth, notify);\n  }, [auth, history, token]);\n\n  // useCallback ensures that handle error function isn't recreated on every render\n  const fetchCustomers = useCallback(\n    async (method, param) => {\n      setLoading(true);\n      const data = [\n        method === \"channel\" ? param : \"\",\n        method === \"reg_complete\" ? param : \"\",\n      ];\n      try {\n        const result = await getCustomers(...data);\n        setLoading(false);\n        if (result.error) return notify(result.message, \"error\");\n        // channel ? setDisplayedCustomers([...result.result]) :\n        setCustomers((prev) => [...result?.result]);\n      } catch (error) {\n        handleError(error, notify, () => setLoading(false));\n      }\n    },\n    [handleError]\n  );\n\n  useEffect(() => {\n    fetchCustomers();\n  }, [fetchCustomers]);\n\n  useEffect(() => {\n    setDisplayedCustomers(customers);\n  }, [customers]);\n\n  useEffect(() => {\n    let tempCustomers;\n    setCurrentPage(1);\n    if (showCustomers === \"all\") tempCustomers = customers;\n\n    // for now enabled refers to PND inactive while restricted refers to active PND\n    // if(showCustomers === \"active\" || showCustomers === \"restricted\"){\n    //   tempCustomers = customers.filter(({enabled}) => (showCustomers === \"active\" && enabled) || (showCustomers === \"restricted\" && !enabled));\n    // };\n\n    if (showCustomers === \"active\" || showCustomers === \"restricted\") {\n      tempCustomers = customers.filter(\n        ({ PND }) =>\n          (showCustomers === \"active\" && !PND) ||\n          (showCustomers === \"restricted\" && PND)\n      );\n    }\n\n    // if(showCustomers === \"active\"){\n    //   tempCustomers = customers.filter(({enabled}) => {\n    //     if (showCustomers === \"active\" && enabled) return true;\n    //     // if (showCustomers === \"pending\" && !accountStatus) return true;\n    //     return false;\n    //   });\n    // };\n\n    if (showCustomers === \"pending\") {\n      tempCustomers = customers.filter(\n        ({ isnewbankcustomer, livelinesschecked, documentschecked }) => {\n          if (\n            showCustomers === \"pending\" &&\n            (isnewbankcustomer === null ||\n              livelinesschecked === \"PENDING\" ||\n              documentschecked === null)\n          )\n            return true;\n          return false;\n        }\n      );\n    }\n\n    setDisplayedCustomers(tempCustomers);\n  }, [showCustomers, customers]);\n\n  const handleNavigateToCustomer = (e) => {\n    const element = e.target;\n    if (!element.classList.contains(\"action-btn\")) return;\n    const userId = element.dataset.userId;\n    // const requestedCustomer = customers[customers.findIndex(v => v.id.toString() === userId)];\n    // history.push(`${path}/${userId}`, {requestedCustomer: requestedCustomer});\n    history.push(`${path}/${userId}`);\n  };\n\n  const handleChange = (e) => {\n    const { name, value, checked } = e.target;\n\n    if (name.includes(\"selCustomer\")) {\n      let id = name.replace(\"selCustomer-\", \"\");\n      id = id === \"all\" ? id : parseInt(id);\n      let newSelectedCustomers;\n      if (checked) {\n        newSelectedCustomers =\n          id === \"all\" ? [\"all\"] : [...selectedCustomers, id];\n      } else {\n        newSelectedCustomers =\n          selectedCustomers.includes(\"all\") && id !== \"all\"\n            ? [...displayedCustomers.map(({ id }) => id)]\n            : [...selectedCustomers];\n        const idx = newSelectedCustomers.findIndex((v) => v === id);\n        newSelectedCustomers.splice(idx, 1);\n      }\n      setSelectedCustomers(newSelectedCustomers);\n      return;\n    }\n\n    setValues((prev) => ({\n      ...prev,\n      [name]: name === \"search\" ? value.trim() : value,\n    }));\n\n    if (name === \"search\") handleSearchCustomers(value);\n  };\n\n  const handleSearchCustomers = async (searchPhrase) => {\n    setShowCustomers(\"all\");\n    setCurrentPage(1);\n    // setFilter(\"\");\n    if (!searchPhrase) {\n      isSearching.current = false;\n      setLoading(false);\n      setDisplayedCustomers(customers);\n      return;\n    }\n    isSearching.current = true;\n    setLoading(true);\n    try {\n      const result = await searchCustomers(searchPhrase);\n      setLoading(false);\n      if (result.error) return notify(result.message, \"error\");\n      isSearching.current && setDisplayedCustomers(result.result);\n      isSearching.current = false;\n    } catch (error) {\n      handleError(error, notify, () => setLoading(false));\n    }\n  };\n\n  const handleFilterCustomers = (method, param) => {\n    setFilter({ method, param });\n    fetchCustomers(method, param);\n    setCurrentPage(1);\n    setShowCustomers(\"all\");\n    setValues((prev) => ({\n      ...prev,\n      search: \"\",\n    }));\n  };\n\n  const handleExportData = async () => {\n    setDataExporting(true);\n    handleHideModal(\"#exportCustomersDataModal\");\n    try {\n      const customer_ids = selectedCustomers.includes(\"all\")\n        ? []\n        : selectedCustomers;\n      const start_date = values.start_date\n        ? values.start_date.toISOString()\n        : \"\";\n      const end_date = values.end_date ? values.end_date.toISOString() : \"\";\n      const requestTime = moment().format(\"DD-MM-YY\");\n      // fetch result\n      const result = await getExportCustomersData({\n        customer_ids,\n        start_date,\n        end_date,\n      });\n      setDataExporting(false);\n      // handle download\n      const url = window.URL.createObjectURL(result);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.setAttribute(\"download\", `Customers ${requestTime}.xlsx`); //or any other extension\n      document.body.appendChild(link);\n      link.click();\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n        setValues((prev) => ({\n          ...prev,\n          start_date: null,\n          end_date: null,\n        }));\n      }, 500);\n    } catch (error) {\n      handleError(error, notify, () => setDataExporting(false));\n    }\n  };\n\n  return (\n    <Switch>\n      <Route exact path={path}>\n        <>\n          <header>\n            <div>\n              <h1>Customer Accounts Management</h1>\n\n              <nav>\n                {/* eslint-disable-next-line */}\n                <a\n                  className={showCustomers === \"all\" ? \"active\" : \"\"}\n                  onClick={(e) => setShowCustomers(\"all\")}\n                >\n                  All Customers\n                </a>\n                {/* eslint-disable-next-line */}\n                <a\n                  className={showCustomers === \"active\" ? \"active\" : \"\"}\n                  onClick={(e) => setShowCustomers(\"active\")}\n                >\n                  Active\n                </a>\n                {/* eslint-disable-next-line */}\n                <a\n                  className={showCustomers === \"pending\" ? \"active\" : \"\"}\n                  onClick={(e) => setShowCustomers(\"pending\")}\n                >\n                  Pending\n                </a>\n                {/* eslint-disable-next-line */}\n                <a\n                  className={showCustomers === \"restricted\" ? \"active\" : \"\"}\n                  onClick={(e) => setShowCustomers(\"restricted\")}\n                >\n                  Restricted\n                </a>\n              </nav>\n            </div>\n            <div>\n              <div className=\"small-admin-details\">\n                <img src={face} alt=\"\" />\n                {adminName || `NPF Admin`}\n                <i className=\"arrow down\"></i>\n              </div>\n              <div className=\"some-container\">\n                <div className=\"search-div\">\n                  <label htmlFor=\"search\">\n                    <SearchIcon />\n                  </label>\n                  <input\n                    type=\"search\"\n                    className=\"form-control\"\n                    name=\"search\"\n                    id=\"search\"\n                    aria-label=\"Search for customers\"\n                    value={values.search}\n                    onChange={handleChange}\n                  />\n                </div>\n                <button\n                  onClick={(e) => handleOpenModal(\"#exportCustomersDataModal\")}\n                  id=\"exportCustomersData\"\n                  className={`btn export-data-btn d-block ${\n                    isDataExporting ? \"loading disabled\" : \"\"\n                  }`}\n                >\n                  {isDataExporting ? (\n                    <SpinnerIcon className=\"rotating\" />\n                  ) : (\n                    <>\n                      <ExportIcon /> Export Data\n                    </>\n                  )}\n                </button>\n                <button\n                  className=\"btn filter-btn dropdown-toggle\"\n                  type=\"button\"\n                  id=\"dropdownMenuButton\"\n                  data-toggle=\"dropdown\"\n                  aria-haspopup=\"true\"\n                  aria-expanded=\"false\"\n                >\n                  {filter.param === \"bvn\" ? (\n                    \"BVN\"\n                  ) : filter.param === \"phone\" ? (\n                    \"Phone\"\n                  ) : filter.param === \"bank\" ? (\n                    \"Bank\"\n                  ) : filter.param === \"true\" ? (\n                    \"Completed\"\n                  ) : filter.param === \"false\" ? (\n                    \"InComplete\"\n                  ) : (\n                    <>\n                      <Funnel /> Filter\n                    </>\n                  )}\n                </button>\n                {/* <div className=\"dropdown\">\n                  <button className=\"btn btn-secondary dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                    Dropdown button\n                  </button> */}\n                <div\n                  className=\"dropdown-menu\"\n                  aria-labelledby=\"dropdownMenuButton\"\n                >\n                  <h5 className=\"dropdown-header\">Filter Customers</h5>\n                  <div className=\"dropdown-divider\"></div>\n                  <h6 className=\"dropdown-header\">By Registration Mode</h6>\n                  <button\n                    className={`dropdown-item ${\n                      filter.param === \"bvn\" ? \"active\" : \"\"\n                    }`}\n                    onClick={(e) => handleFilterCustomers(\"channel\", \"bvn\")}\n                  >\n                    BVN\n                  </button>\n                  <button\n                    className={`dropdown-item ${\n                      filter.param === \"phone\" ? \"active\" : \"\"\n                    }`}\n                    onClick={(e) => handleFilterCustomers(\"channel\", \"phone\")}\n                  >\n                    Phone number\n                  </button>\n                  <button\n                    className={`dropdown-item ${\n                      filter.param === \"bank\" ? \"active\" : \"\"\n                    }`}\n                    onClick={(e) => handleFilterCustomers(\"channel\", \"bank\")}\n                  >\n                    Bank\n                  </button>\n                  <div className=\"dropdown-divider\"></div>\n                  <h6 className=\"dropdown-header\">\n                    By Registration Completion\n                  </h6>\n                  <button\n                    className={`dropdown-item ${\n                      filter.param === \"true\" ? \"active\" : \"\"\n                    }`}\n                    onClick={(e) =>\n                      handleFilterCustomers(\"reg_complete\", \"true\")\n                    }\n                  >\n                    Completed\n                  </button>\n                  <button\n                    className={`dropdown-item ${\n                      filter.param === \"false\" ? \"active\" : \"\"\n                    }`}\n                    onClick={(e) =>\n                      handleFilterCustomers(\"reg_complete\", \"false\")\n                    }\n                  >\n                    Incomplete\n                  </button>\n                  {filter.param && (\n                    <>\n                      <div className=\"dropdown-divider\"></div>\n                      <button\n                        className={`dropdown-item`}\n                        onClick={(e) => handleFilterCustomers(\"\", \"\")}\n                      >\n                        Clear\n                      </button>\n                    </>\n                  )}\n                </div>\n                {/* </div> */}\n              </div>\n            </div>\n          </header>\n          <main className=\"customers-page\">\n            {(isLoading || displayedCustomers.length === 0) && (\n              <div className=\"searching-block\">\n                <div\n                  className={\"svg-holder \" + (!isLoading ? \"not-loading\" : \"\")}\n                >\n                  {isLoading ? (\n                    <SpinnerIcon className=\"rotating\" />\n                  ) : (\n                    <NothingFoundIcon />\n                  )}\n                </div>\n                {!isLoading && <p>NOTHING FOUND!</p>}\n              </div>\n            )}\n            {!isLoading && displayedCustomers.length !== 0 && (\n              <>\n                <div className=\"color-dark-text-blue\">\n                  Customers per page:{\" \"}\n                  <div\n                    className=\"form-group\"\n                    style={{ display: \"inline-block\" }}\n                  >\n                    <select\n                      className=\"form-control\"\n                      onChange={(e) => {\n                        setItemsPerPage(e.target.value);\n                        setCurrentPage(1);\n                      }}\n                      value={itemsPerPage}\n                    >\n                      <option value={5}>5</option>\n                      <option value={10}>10</option>\n                      <option value={20}>20</option>\n                      <option value={50}>50</option>\n                      <option value={100}>100</option>\n                      <option value={150}>150</option>\n                      <option value={200}>200</option>\n                    </select>\n                  </div>\n                </div>\n                <table className=\"table table-borderless table-hover\">\n                  <thead className=\"color-dark-text-blue\">\n                    <tr>\n                      {/* <th scope=\"col\">\n                    <input type=\"checkbox\" name=\"selCustomer-all\" onChange={handleChange} checked={selectedCustomers.includes(\"all\")} />\n                  </th> */}\n                      <th scope=\"col\">Customer</th>\n                      <th scope=\"col\">BVN</th>\n                      <th scope=\"col\">Phone</th>\n                      <th scope=\"col\">PND Status</th>\n                      <th scope=\"col\">Facial Liveliness Check</th>\n                      <th scope=\"col\">Registration Date</th>\n                      <th scope=\"col\">Action</th>\n                    </tr>\n                  </thead>\n                  <tbody onClick={handleNavigateToCustomer}>\n                    <tr className=\"spacer\" />\n                    {displayedCustomers.map((v, idx) => {\n                      const initialBoundary =\n                        (currentPage - 1) * itemsPerPage + 1;\n                      const finalBoundary = currentPage * itemsPerPage;\n                      const itemNumber = idx + 1;\n                      if (\n                        itemNumber < initialBoundary ||\n                        itemNumber > finalBoundary\n                      )\n                        return null;\n\n                      const pseudoAccStatus = !v.PND;\n                      const showIncompleteBadge =\n                        v.signup_incomplete &&\n                        (filter.method !== \"reg_complete\" ||\n                          filter.param !== \"false\");\n\n                      return (\n                        <Fragment key={`${v.user} + ${idx}`}>\n                          <tr className=\"customer-card\">\n                            {/* <th scope=\"row\" style={{verticalAlign: \"middle\"}}>\n                        <input\n                          type=\"checkbox\"\n                          name={`selCustomer-${v.id}`}\n                          checked={selectedCustomers.includes(v.id) || selectedCustomers.includes(\"all\")}\n                          onChange={handleChange}/>\n                      </th> */}\n                            <td className=\"major-details\">\n                              <div className=\"row\">\n                                <div className=\"customer-img\">\n                                  <img\n                                    src={v.photo_location || placeholderImg}\n                                    className=\"\"\n                                    alt=\"\"\n                                  />\n                                </div>\n                                <div className=\"col\">\n                                  <div className=\"name font-weight-bold\">\n                                    {v.firstname} {v.lastname}\n                                    {showIncompleteBadge && \" (Incomplete)\"}\n                                  </div>\n                                  <div className=\"email font-weight-light\">\n                                    {v.email}\n                                  </div>\n                                  {/* <div className=\"acc-number\">AC/N: {v.accountNumber || \"N/A\"}</div> */}\n                                </div>\n                              </div>\n                            </td>\n                            <td className=\"bvn font-weight-light\">\n                              {v.bvnhash || \"N/A\"}\n                            </td>\n                            <td className=\"phone font-weight-light\">\n                              (234) {v.phone.replace(\"234\", \"0\")}\n                            </td>\n                            <td>\n                              <span\n                                className={`account-status ${\n                                  pseudoAccStatus ? \"active\" : \"pending\"\n                                }`}\n                              >\n                                {pseudoAccStatus ? \"INACTIVE\" : \"ACTIVE\"}\n                              </span>\n                            </td>\n                            <td>\n                              {/* <span className={`liveliness ${v.liveliness ? \"provided\" : \"\"}`}>\n                          {v.liveliness ? <CheckCircleFill /> : <TimesIcon />}\n                          {v.liveliness ? \" P\" : \"Not p\"}rovided\n                        </span> */}\n                              <span\n                                className={`liveliness ${\n                                  v.video_location ? \"provided\" : \"\"\n                                }`}\n                              >\n                                {v.video_location ? (\n                                  <CheckCircleFill />\n                                ) : (\n                                  <TimesIcon />\n                                )}\n                                {v.video_location ? \" P\" : \"Not p\"}rovided\n                              </span>\n                            </td>\n                            <td>\n                              {moment(v.createdAt).format(\"Do MMMM YYYY\")}\n                            </td>\n                            <td>\n                              <button\n                                data-user-id={v.id}\n                                className=\"btn btn-success action-btn\"\n                              >\n                                View\n                              </button>\n                            </td>\n                          </tr>\n                          {idx !== displayedCustomers.length - 1 && (\n                            <tr className=\"spacer\" />\n                          )}\n                        </Fragment>\n                      );\n                    })}\n                  </tbody>\n                </table>\n                <div className=\"audit-history-footer\">\n                  <ReactPaginate\n                    pageCount={\n                      Math.ceil(displayedCustomers.length / itemsPerPage) || 1\n                    }\n                    marginPagesDisplayed={2}\n                    pageRangeDisplayed={3}\n                    forcePage={currentPage - 1}\n                    onPageChange={(selectedItem) =>\n                      setCurrentPage(selectedItem.selected + 1)\n                    }\n                    containerClassName=\"pagination-btns\"\n                    activeLinkClassName=\"active\"\n                    pageLinkClassName=\"btn\"\n                    previousLabel={<ArrowLeftShortCircleFill />}\n                    previousLinkClassName=\"btn icon\"\n                    nextLabel={\n                      <ArrowLeftShortCircleFill\n                        style={{ transform: \"rotateY(180deg)\" }}\n                      />\n                    }\n                    nextLinkClassName=\"btn icon\"\n                    disabledClassName=\"disabled\"\n                  />\n                </div>{\" \"}\n              </>\n            )}\n          </main>\n          <Modal id=\"exportCustomersDataModal\" showCloseX>\n            <div className=\"modal-body\">\n              <h5\n                className=\"modal-title color-dark-text-blue\"\n                id={`exportCustomersDataModalLabel`}\n              >\n                Export Customers Data\n              </h5>\n              <div className=\"\">\n                <p className=\"color-dark-text-blue\">Select date range</p>\n                <div className=\"date-range-container row my-5\">\n                  <div className=\"col-6\">\n                    <DatePicker\n                      selected={values.start_date}\n                      value={values.start_date}\n                      onChange={(date) =>\n                        setValues((prev) => ({\n                          ...prev,\n                          start_date: date,\n                        }))\n                      }\n                      name=\"start_date\"\n                      dateFormat=\"dd/MM/yyyy\"\n                      placeholderText=\"Start Date\"\n                      className=\"start_date form-control\"\n                      peekNextMonth\n                      showMonthDropdown\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      locale=\"en-GB\"\n                      isClearable\n                    />\n                  </div>\n\n                  <div className=\"col-6\">\n                    <DatePicker\n                      selected={values.end_date}\n                      value={values.end_date}\n                      onChange={(date) =>\n                        setValues((prev) => ({\n                          ...prev,\n                          end_date: date,\n                        }))\n                      }\n                      name=\"end_date\"\n                      dateFormat=\"dd/MM/yyyy\"\n                      placeholderText=\"End date\"\n                      className=\"end_date form-control\"\n                      minDate={values.start_date}\n                      peekNextMonth\n                      showMonthDropdown\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      locale=\"en-GB\"\n                      isClearable\n                    />\n                  </div>\n                </div>\n                <div className=\"mt-4\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-primary\"\n                    onClick={handleExportData}\n                    disabled={\n                      !values.start_date ||\n                      !values.end_date ||\n                      (values.start_date &&\n                        values.end_date &&\n                        moment(values.start_date).isAfter(values.end_date))\n                    }\n                  >\n                    Continue\n                  </button>\n                  <small className=\"text-danger d-block\">\n                    {values.start_date &&\n                      values.end_date &&\n                      moment(values.start_date).isAfter(values.end_date) &&\n                      \"Please select an end date that comes after the start date.\"}\n                  </small>\n                </div>\n              </div>\n            </div>\n          </Modal>\n        </>\n      </Route>\n      <Route path={`${path}/:userId`} component={Customer} />\n    </Switch>\n  );\n};\n\nexport default Customers;\n"]},"metadata":{},"sourceType":"module"}