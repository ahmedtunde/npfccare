{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/xerde2/Downloads/npf-admin-web/src/components/loanManagement/customer/UpdateScore.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { ReactComponent as CheckCircleFill } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/check-circle-fill.svg\";\nimport { ReactComponent as TimesCircleFill } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/times-circle-fill.svg\";\nimport { ReactComponent as ArrowRightShort } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/arrow-right-short.svg\";\nimport { ReactComponent as SpinnerIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/spinner.svg\";\nimport errorHandler from \"../../../utils/errorHandler\";\nimport { useAuth } from \"../../utilities\";\nimport { addAdminCriteria, adminLoanScoring, adminTotalScore } from \"../../../services/loanService\";\nimport notify from \"../../../utils/notification\";\n\nconst NumberDiv = props => {\n  _s();\n\n  const [number, setNumber] = useState(null);\n  useEffect(() => {\n    if (number != null) {\n      alert(number);\n    }\n  }, [number]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"num-div\",\n      children: props.num && props.num.map(content => /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => setNumber(content),\n        children: content || 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NumberDiv, \"P5fLXLWUfDVmTFs4Sb8HLQu6PA0=\");\n\n_c = NumberDiv;\n\nconst DetailDiv = props => /*#__PURE__*/_jsxDEV(_Fragment, {\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-5 mb-1\",\n      children: \"Significant change in interest rate because of changes in credit risk since initial recognition:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-2\",\n      children: \"Yes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn py-1\",\n          style: {\n            backgroundColor: \"#2dbe7e\",\n            color: \"#fff\",\n            borderRadius: \"50px\",\n            padding: \"0 1.5em\",\n            marginRight: \"1em\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(CheckCircleFill, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this), \" Yes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn py-1\",\n          style: {\n            border: \"1px solid red\",\n            color: \"red\",\n            borderRadius: \"50px\",\n            padding: \"0 1.5em\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(TimesCircleFill, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), \" No\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this)\n}, void 0, false);\n\n_c2 = DetailDiv;\n\nconst UpdateScore = _ref => {\n  _s2();\n\n  let {\n    loan,\n    adminWorkFlowLevel\n  } = _ref;\n  const auth = useAuth();\n  const [leftCriteria, setLeftCriteria] = useState([]);\n  const [rightCriteria, setRightCriteria] = useState([]);\n  const [getRequirement, setGetRequirement] = useState(\"\");\n  const [countScore, setCountScore] = useState(1);\n  const [countCriteria, setCountCriteria] = useState(0);\n  const [disabled, setDisabled] = useState(false);\n  const [status, setStatus] = useState(\"\");\n  const [isLoading, setLoading] = useState({\n    userFull: false,\n    acceptApplication: false,\n    rejectApplication: false,\n    approveApplication: false,\n    printApplication: false,\n    loadPage: false\n  });\n  const handleError = useCallback((errorObject, notify, cb) => errorHandler(auth)(errorObject, notify, cb), [auth]);\n  useEffect(() => {\n    setDisabled(false);\n    setCountScore(1);\n    setStatus(\"\");\n    setLoading({\n      userFull: false,\n      acceptApplication: false,\n      rejectApplication: false,\n      approveApplication: false,\n      printApplication: false,\n      loadPage: false\n    });\n    const criteriaArray = [];\n    const criteriaSetArray = [];\n    console.log(loan, []);\n    loan.loanApp.loanProduct.loanProductCategory.criterias.forEach(criteria => {\n      if (criteria.scoreType === \"Behavioural\") {\n        criteriaArray.push(criteria);\n        criteriaSetArray.push(criteria.requirements);\n        const newFiles = [...new Set(criteriaSetArray)];\n        setCountCriteria(newFiles.length);\n      }\n    });\n    const halfOfArray = Math.round(criteriaArray.length / 2);\n    setLeftCriteria(criteriaArray.slice(0, halfOfArray));\n    setRightCriteria(criteriaArray.slice(halfOfArray + 1, criteriaArray.length));\n  }, []);\n\n  const handleChangeLoading = (name, value) => setLoading(prev => ({ ...prev,\n    [name]: value\n  }));\n\n  const handleEventSelect = async e => {\n    try {\n      console.log(e.target.value);\n      handleChangeLoading(\"loadPage\", true);\n      setDisabled(true);\n      const app_data = {\n        requirement: getRequirement,\n        value: e.target.value,\n        score_type: \"Admin\"\n      };\n      const loanAppId = loan.loan_app_id;\n      const response = await addAdminCriteria(loanAppId, app_data);\n      console.log(response, getRequirement, loanAppId);\n\n      if (response.status === \"success\") {\n        setCountScore(countScore + 1);\n        setStatus( /*#__PURE__*/_jsxDEV(CheckCircleFill, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 19\n        }, this));\n        handleChangeLoading(\"loadPage\", false);\n        setDisabled(false);\n        return;\n      } else {\n        setStatus(\"Something went wrong\");\n        handleChangeLoading(\"loadPage\", false);\n        setDisabled(false);\n        return;\n      }\n    } catch (error) {\n      handleError(error, notify, () => {\n        setStatus(\"Something went wrong\");\n        handleChangeLoading(\"loadPage\", false);\n        setDisabled(false);\n      });\n    }\n  };\n\n  const handleRequirement = data => {\n    console.log(data);\n    setGetRequirement(data);\n  };\n\n  const handleAdminScoring = async () => {\n    try {\n      const loanAppId = loan.loan_app_id;\n      handleChangeLoading(\"acceptApplication\", true);\n      setDisabled(true);\n      const response = await adminLoanScoring(loanAppId);\n\n      if (response.status === \"error\") {\n        notify(\"Something went wrong\", \"error\");\n        handleChangeLoading(\"acceptApplication\", false);\n        setDisabled(false);\n        return;\n      }\n\n      if (response.status === \"success\") {\n        const totalScore = await adminTotalScore(loanAppId);\n\n        if (totalScore.status === \"error\") {\n          notify(\"Something went wrong\", \"error\");\n          handleChangeLoading(\"acceptApplication\", false);\n          setDisabled(false);\n          return;\n        }\n\n        if (totalScore.status === \"success\") {\n          notify(\"Loan Successfully scored\", \"success\");\n          handleChangeLoading(\"acceptApplication\", false);\n          setDisabled(false);\n          setTimeout(() => {\n            window.location.reload();\n          }, 2000);\n          return;\n        }\n      }\n    } catch (error) {\n      handleError(error, notify, () => {\n        setStatus(\"Something went wrong\");\n        handleChangeLoading(\"acceptApplication\", false);\n        setDisabled(false);\n      });\n    }\n  };\n\n  const displayRightBehLoanScore = () => {\n    return rightCriteria && rightCriteria.map(criteria => {\n      const {\n        id,\n        requirements\n      } = criteria;\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col mb-1\",\n            children: [requirements, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"color-sec-green\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"dropdown\",\n                style: {\n                  width: \"40%\",\n                  outline: \"none\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  disabled: disabled || adminWorkFlowLevel >= loan.loanApp.workFlowLevel ? false : true,\n                  class: \"btn dropdown-toggle\",\n                  style: {\n                    border: \"1px solid #ccc\",\n                    outline: \"none\",\n                    borderRadius: \"10px\",\n                    fontSize: \"14px\",\n                    padding: \"0.8em 1em\",\n                    width: \"100%\",\n                    fontWeight: \"600\"\n                  } // value={getValue}\n                  ,\n                  onClick: () => handleRequirement(requirements),\n                  onChange: e => {\n                    handleEventSelect(e); // handleRequirement(requirements);\n                  },\n                  children: criteria.optionValues.map((option, idx) => /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: option,\n                      children: option\n                    }, idx + option, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: requirements === getRequirement && (isLoading.loadPage ? /*#__PURE__*/_jsxDEV(SpinnerIcon, {\n                  className: \"limit-loading rotating\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: status === \"Something went wrong\" ? {\n                    fontSize: \"12px\",\n                    color: \"red\"\n                  } : {},\n                  children: [\" \", status]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    });\n  };\n\n  const displayLeftBehLoanScore = () => {\n    return leftCriteria && leftCriteria.map((criteria, idx) => {\n      const {\n        id,\n        requirements\n      } = criteria;\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col mb-1\",\n            children: [requirements, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"color-sec-green\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"dropdown\",\n                style: {\n                  width: \"40%\",\n                  outline: \"none\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  disabled: disabled || adminWorkFlowLevel >= loan.loanApp.workFlowLevel ? false : true,\n                  class: \"btn dropdown-toggle\",\n                  style: {\n                    border: \"1px solid #ccc\",\n                    outline: \"none\",\n                    borderRadius: \"10px\",\n                    fontSize: \"14px\",\n                    padding: \"0.8em 1em\",\n                    width: \"100%\",\n                    fontWeight: \"600\"\n                  } // value={getValue}\n                  ,\n                  onClick: () => handleRequirement(requirements),\n                  onChange: e => {\n                    handleEventSelect(e);\n                  },\n                  children: criteria.optionValues.map((option, idx) => /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: option,\n                      children: option\n                    }, idx + option, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 346,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: requirements === getRequirement && (isLoading.loadPage ? /*#__PURE__*/_jsxDEV(SpinnerIcon, {\n                  className: \"limit-loading rotating\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: status === \"Something went wrong\" ? {\n                    fontSize: \"12px\",\n                    color: \"red\"\n                  } : {},\n                  children: [\" \", status]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loan-details col\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"details-header\",\n          children: \"Criteria Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"100%\"\n          },\n          children: displayLeftBehLoanScore()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loan-details col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"details-header\",\n        children: \"More Criteria Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"100%\"\n        },\n        children: displayRightBehLoanScore()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAdminScoring,\n        style: {\n          marginTop: \"2rem\"\n        },\n        disabled: countScore >= countCriteria && adminWorkFlowLevel >= loan.loanApp.workFlowLevel ? false : true,\n        className: `btn accept-loan-btn ${isLoading.acceptApplication ? \"loading disabled\" : \"\"}`,\n        children: isLoading.acceptApplication ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"Scoring \", /*#__PURE__*/_jsxDEV(SpinnerIcon, {\n            className: \"rotating\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"Score\", \" \", /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"16\",\n            height: \"16\",\n            fill: \"currentColor\",\n            class: \"bi bi-arrow-right-short\",\n            viewBox: \"0 0 16 16\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              \"fill-rule\": \"evenodd\",\n              d: \"M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s2(UpdateScore, \"ZrUBOfiuTsLzwPrPEX7JtOAAs2Q=\", false, function () {\n  return [useAuth];\n});\n\n_c3 = UpdateScore;\nexport default UpdateScore;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"NumberDiv\");\n$RefreshReg$(_c2, \"DetailDiv\");\n$RefreshReg$(_c3, \"UpdateScore\");","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/loanManagement/customer/UpdateScore.js"],"names":["React","useEffect","useState","useCallback","errorHandler","useAuth","addAdminCriteria","adminLoanScoring","adminTotalScore","notify","NumberDiv","props","number","setNumber","alert","num","map","content","DetailDiv","backgroundColor","color","borderRadius","padding","marginRight","border","UpdateScore","loan","adminWorkFlowLevel","auth","leftCriteria","setLeftCriteria","rightCriteria","setRightCriteria","getRequirement","setGetRequirement","countScore","setCountScore","countCriteria","setCountCriteria","disabled","setDisabled","status","setStatus","isLoading","setLoading","userFull","acceptApplication","rejectApplication","approveApplication","printApplication","loadPage","handleError","errorObject","cb","criteriaArray","criteriaSetArray","console","log","loanApp","loanProduct","loanProductCategory","criterias","forEach","criteria","scoreType","push","requirements","newFiles","Set","length","halfOfArray","Math","round","slice","handleChangeLoading","name","value","prev","handleEventSelect","e","target","app_data","requirement","score_type","loanAppId","loan_app_id","response","error","handleRequirement","data","handleAdminScoring","totalScore","setTimeout","window","location","reload","displayRightBehLoanScore","id","width","outline","workFlowLevel","fontSize","fontWeight","optionValues","option","idx","displayLeftBehLoanScore","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport { ReactComponent as CheckCircleFill } from \"../../../assets/icons/check-circle-fill.svg\";\nimport { ReactComponent as TimesCircleFill } from \"../../../assets/icons/times-circle-fill.svg\";\nimport { ReactComponent as ArrowRightShort } from \"../../../assets/icons/arrow-right-short.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../../../assets/icons/spinner.svg\";\nimport errorHandler from \"../../../utils/errorHandler\";\nimport { useAuth } from \"../../utilities\";\nimport {\n  addAdminCriteria,\n  adminLoanScoring,\n  adminTotalScore,\n} from \"../../../services/loanService\";\nimport notify from \"../../../utils/notification\";\n\nconst NumberDiv = (props) => {\n  const [number, setNumber] = useState(null);\n\n  useEffect(() => {\n    if (number != null) {\n      alert(number);\n    }\n  }, [number]);\n\n  return (\n    <div className=\"col\">\n      <div className=\"num-div\">\n        {props.num &&\n          props.num.map((content) => (\n            <span onClick={() => setNumber(content)}>{content || 0}</span>\n          ))}\n      </div>\n    </div>\n  );\n};\n\nconst DetailDiv = (props) => (\n  <>\n    <div className=\"row\">\n      <div className=\"col-5 mb-1\">\n        Significant change in interest rate because of changes in credit risk\n        since initial recognition:\n      </div>\n      <div className=\"col-2\">Yes</div>\n      <div className=\"col\">\n        <div>\n          <button\n            className=\"btn py-1\"\n            style={{\n              backgroundColor: \"#2dbe7e\",\n              color: \"#fff\",\n              borderRadius: \"50px\",\n              padding: \"0 1.5em\",\n              marginRight: \"1em\",\n            }}\n          >\n            <CheckCircleFill /> Yes\n          </button>\n          <button\n            className=\"btn py-1\"\n            style={{\n              border: \"1px solid red\",\n              color: \"red\",\n              borderRadius: \"50px\",\n              padding: \"0 1.5em\",\n            }}\n          >\n            <TimesCircleFill /> No\n          </button>\n        </div>\n      </div>\n    </div>\n  </>\n);\n\nconst UpdateScore = ({ loan, adminWorkFlowLevel }) => {\n  const auth = useAuth();\n  const [leftCriteria, setLeftCriteria] = useState([]);\n  const [rightCriteria, setRightCriteria] = useState([]);\n  const [getRequirement, setGetRequirement] = useState(\"\");\n  const [countScore, setCountScore] = useState(1);\n  const [countCriteria, setCountCriteria] = useState(0);\n  const [disabled, setDisabled] = useState(false);\n  const [status, setStatus] = useState(\"\");\n  const [isLoading, setLoading] = useState({\n    userFull: false,\n    acceptApplication: false,\n    rejectApplication: false,\n    approveApplication: false,\n    printApplication: false,\n    loadPage: false,\n  });\n\n  const handleError = useCallback(\n    (errorObject, notify, cb) => errorHandler(auth)(errorObject, notify, cb),\n    [auth]\n  );\n\n  useEffect(() => {\n    setDisabled(false);\n    setCountScore(1);\n    setStatus(\"\");\n    setLoading({\n      userFull: false,\n      acceptApplication: false,\n      rejectApplication: false,\n      approveApplication: false,\n      printApplication: false,\n      loadPage: false,\n    });\n    const criteriaArray = [];\n    const criteriaSetArray = [];\n\n    console.log(loan, []);\n\n    loan.loanApp.loanProduct.loanProductCategory.criterias.forEach(\n      (criteria) => {\n        if (criteria.scoreType === \"Behavioural\") {\n          criteriaArray.push(criteria);\n          criteriaSetArray.push(criteria.requirements);\n          const newFiles = [...new Set(criteriaSetArray)];\n          setCountCriteria(newFiles.length);\n        }\n      }\n    );\n\n    const halfOfArray = Math.round(criteriaArray.length / 2);\n    setLeftCriteria(criteriaArray.slice(0, halfOfArray));\n    setRightCriteria(\n      criteriaArray.slice(halfOfArray + 1, criteriaArray.length)\n    );\n  }, []);\n\n  const handleChangeLoading = (name, value) =>\n    setLoading((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n\n  const handleEventSelect = async (e) => {\n    try {\n      console.log(e.target.value);\n\n      handleChangeLoading(\"loadPage\", true);\n      setDisabled(true);\n      const app_data = {\n        requirement: getRequirement,\n        value: e.target.value,\n        score_type: \"Admin\",\n      };\n\n      const loanAppId = loan.loan_app_id;\n\n      const response = await addAdminCriteria(loanAppId, app_data);\n\n      console.log(response, getRequirement, loanAppId);\n\n      if (response.status === \"success\") {\n        setCountScore(countScore + 1);\n        setStatus(<CheckCircleFill />);\n        handleChangeLoading(\"loadPage\", false);\n        setDisabled(false);\n\n        return;\n      } else {\n        setStatus(\"Something went wrong\");\n        handleChangeLoading(\"loadPage\", false);\n        setDisabled(false);\n        return;\n      }\n    } catch (error) {\n      handleError(error, notify, () => {\n        setStatus(\"Something went wrong\");\n        handleChangeLoading(\"loadPage\", false);\n        setDisabled(false);\n      });\n    }\n  };\n\n  const handleRequirement = (data) => {\n    console.log(data);\n    setGetRequirement(data);\n  };\n\n  const handleAdminScoring = async () => {\n    try {\n      const loanAppId = loan.loan_app_id;\n\n      handleChangeLoading(\"acceptApplication\", true);\n      setDisabled(true);\n\n      const response = await adminLoanScoring(loanAppId);\n\n      if (response.status === \"error\") {\n        notify(\"Something went wrong\", \"error\");\n        handleChangeLoading(\"acceptApplication\", false);\n        setDisabled(false);\n        return;\n      }\n\n      if (response.status === \"success\") {\n        const totalScore = await adminTotalScore(loanAppId);\n\n        if (totalScore.status === \"error\") {\n          notify(\"Something went wrong\", \"error\");\n          handleChangeLoading(\"acceptApplication\", false);\n          setDisabled(false);\n          return;\n        }\n\n        if (totalScore.status === \"success\") {\n          notify(\"Loan Successfully scored\", \"success\");\n          handleChangeLoading(\"acceptApplication\", false);\n          setDisabled(false);\n\n          setTimeout(() => {\n            window.location.reload();\n          }, 2000);\n          return;\n        }\n      }\n    } catch (error) {\n      handleError(error, notify, () => {\n        setStatus(\"Something went wrong\");\n        handleChangeLoading(\"acceptApplication\", false);\n        setDisabled(false);\n      });\n    }\n  };\n\n  const displayRightBehLoanScore = () => {\n    return (\n      rightCriteria &&\n      rightCriteria.map((criteria) => {\n        const { id, requirements } = criteria;\n        return (\n          <>\n            <div className=\"row\" key={id}>\n              <div className=\"col mb-1\">{requirements}:</div>\n              <div className=\"col\">\n                <span className=\"color-sec-green\">\n                  <div\n                    class=\"dropdown\"\n                    style={{ width: \"40%\", outline: \"none\" }}\n                  >\n                    <select\n                      disabled={\n                        disabled ||\n                        adminWorkFlowLevel >= loan.loanApp.workFlowLevel\n                          ? false\n                          : true\n                      }\n                      class=\"btn dropdown-toggle\"\n                      style={{\n                        border: \"1px solid #ccc\",\n                        outline: \"none\",\n                        borderRadius: \"10px\",\n                        fontSize: \"14px\",\n                        padding: \"0.8em 1em\",\n                        width: \"100%\",\n                        fontWeight: \"600\",\n                      }}\n                      // value={getValue}\n                      onClick={() => handleRequirement(requirements)}\n                      onChange={(e) => {\n                        handleEventSelect(e);\n                        // handleRequirement(requirements);\n                      }}\n                    >\n                      {criteria.optionValues.map((option, idx) => (\n                        <>\n                          <option key={idx + option} value={option}>\n                            {option}\n                          </option>\n                        </>\n                      ))}\n                    </select>\n                  </div>\n                  <div>\n                    {requirements === getRequirement &&\n                      (isLoading.loadPage ? (\n                        <SpinnerIcon className=\"limit-loading rotating\" />\n                      ) : (\n                        <span\n                          style={\n                            status === \"Something went wrong\"\n                              ? { fontSize: \"12px\", color: \"red\" }\n                              : {}\n                          }\n                        >\n                          {\" \"}\n                          {status}\n                        </span>\n                      ))}\n                  </div>\n                </span>\n              </div>\n            </div>\n          </>\n        );\n      })\n    );\n  };\n\n  const displayLeftBehLoanScore = () => {\n    return (\n      leftCriteria &&\n      leftCriteria.map((criteria, idx) => {\n        const { id, requirements } = criteria;\n\n        return (\n          <>\n            <div className=\"row\" key={id}>\n              <div className=\"col mb-1\">{requirements}:</div>\n              <div className=\"col\">\n                &nbsp;&nbsp;\n                <span className=\"color-sec-green\">\n                  <div\n                    class=\"dropdown\"\n                    style={{ width: \"40%\", outline: \"none\" }}\n                  >\n                    <select\n                      disabled={\n                        disabled ||\n                        adminWorkFlowLevel >= loan.loanApp.workFlowLevel\n                          ? false\n                          : true\n                      }\n                      class=\"btn dropdown-toggle\"\n                      style={{\n                        border: \"1px solid #ccc\",\n                        outline: \"none\",\n                        borderRadius: \"10px\",\n                        fontSize: \"14px\",\n                        padding: \"0.8em 1em\",\n                        width: \"100%\",\n                        fontWeight: \"600\",\n                      }}\n                      // value={getValue}\n                      onClick={() => handleRequirement(requirements)}\n                      onChange={(e) => {\n                        handleEventSelect(e);\n                      }}\n                    >\n                      {criteria.optionValues.map((option, idx) => (\n                        <>\n                          <option key={idx + option} value={option}>\n                            {option}\n                          </option>\n                        </>\n                      ))}\n                    </select>\n                  </div>\n                  <div>\n                    {requirements === getRequirement &&\n                      (isLoading.loadPage ? (\n                        <SpinnerIcon className=\"limit-loading rotating\" />\n                      ) : (\n                        <span\n                          style={\n                            status === \"Something went wrong\"\n                              ? { fontSize: \"12px\", color: \"red\" }\n                              : {}\n                          }\n                        >\n                          {\" \"}\n                          {status}\n                        </span>\n                      ))}\n                  </div>\n                </span>\n              </div>\n            </div>\n          </>\n        );\n      })\n    );\n  };\n  return (\n    <>\n      <div className=\"loan-details col\">\n        <div className=\"mb-5\">\n          <div className=\"details-header\">Criteria Details</div>\n          <div style={{ width: \"100%\" }}>{displayLeftBehLoanScore()}</div>\n\n          {/* <div style={{ width: \"65%\" }}>\n            <div className=\"row\">\n              <div className=\"col-5 mb-1\">Existing loan exposure:</div>\n              <div className=\"col-2\">50%</div>\n              <NumberDiv num={[5, 10, 15, 20, 30]} />\n            </div>\n          </div>\n          <div style={{ width: \"70%\" }}>\n            <div className=\"row\">\n              <div className=\"col-5 mb-1\">Date of Enlistment:</div>\n              <div className=\"col-3\">12/02/2021</div>\n              <NumberDiv num={[1, 2, 3, 4, 5]} />\n            </div>\n          </div>\n          <div style={{ width: \"65%\" }}>\n            <div className=\"row\">\n              <div className=\"col-5 mb-1\">Employer type:</div>\n              <div className=\"col-3\">Federal</div>\n              <NumberDiv num={[1, 2, 3]} />\n            </div>\n          </div>\n          <div style={{ width: \"65%\" }}>\n            <div className=\"row\">\n              <div className=\"col-5 mb-1\">Default:</div>\n              <div className=\"col-3\">13days</div>\n              <NumberDiv num={[1, 2, 3, 4, 5]} />\n            </div>\n          </div> */}\n        </div>\n      </div>\n      <div className=\"loan-details col\">\n        <div className=\"details-header\">More Criteria Details</div>\n        <div style={{ width: \"100%\" }}>{displayRightBehLoanScore()}</div>\n        <button\n          onClick={handleAdminScoring}\n          style={{ marginTop: \"2rem\" }}\n          disabled={\n            countScore >= countCriteria &&\n            adminWorkFlowLevel >= loan.loanApp.workFlowLevel\n              ? false\n              : true\n          }\n          className={`btn accept-loan-btn ${\n            isLoading.acceptApplication ? \"loading disabled\" : \"\"\n          }`}\n        >\n          {isLoading.acceptApplication ? (\n            <>\n              Scoring <SpinnerIcon className=\"rotating\" />\n            </>\n          ) : (\n            <>\n              Score{\" \"}\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                fill=\"currentColor\"\n                class=\"bi bi-arrow-right-short\"\n                viewBox=\"0 0 16 16\"\n              >\n                <path\n                  fill-rule=\"evenodd\"\n                  d=\"M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z\"\n                />\n              </svg>\n            </>\n          )}\n        </button>\n        {/* <div\n          style={{\n            margin: \"2em 0\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            flexDirection: \"column\",\n          }}\n        >\n          <span>Continue Scoring</span>\n          <button className=\"btn btn-info\">\n            Score Documents <ArrowRightShort />\n          </button>\n        </div> */}\n      </div>\n    </>\n  );\n};\n\nexport default UpdateScore;\n"]},"metadata":{},"sourceType":"module"}