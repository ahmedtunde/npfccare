{"ast":null,"code":"import _defineProperty from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/xerde2/Downloads/npf-admin-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useCallback,useState,useEffect}from\"react\";import{useHistory,useLocation,useRouteMatch,useParams}from\"react-router-dom\";import jwt_decode from\"jwt-decode\";import moment from\"moment\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{ReactComponent as ArrowRightCircle}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/arrow-right-circle.svg\";import{ReactComponent as ArrowRightShort}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/arrow-right-short.svg\";import{ReactComponent as TimesCircleFill}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/times-circle-fill.svg\";import{ReactComponent as SpinnerIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/spinner.svg\";import{getAccessToken,getAdminName}from\"../../utils/localStorageService\";import{useAuth}from\"../../components/utilities\";import errorHandler,{validateToken}from\"../../utils/errorHandler\";import face from\"../../assets/img/placeholder-img.png\";import notify from\"../../utils/notification\";import placeholderImg from\"../../assets/img/placeholder-img.png\";import{editCustomerInfo,getAdminProfileDetails,getAdminRoles,getCustomerDetails,updateAdminProfile}from\"../../services/adminService\";import{getBranches,getRoles}from\"../../services/loanService\";function CustomerDetails(){var history=useHistory();var location=useLocation();var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path;var auth=useAuth();var search=location.search;var adminName=getAdminName();var _useState=useState({userFull:false,submit:false,rejectApplication:false,approveApplication:false,printApplication:false,loadPage:false}),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),customerDetail=_useState4[0],setCustomerDetail=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selecedDate=_useState6[0],setSelectDate=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),hideDob=_useState8[0],setHideDob=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),hideBranch=_useState10[0],setHideBranch=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),branch=_useState12[0],setBranch=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),branchName=_useState14[0],setBranchName=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),firstname=_useState16[0],setFirstname=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),lastname=_useState18[0],setLastname=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),middlename=_useState20[0],setMiddlename=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),email=_useState22[0],setEmail=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),phone=_useState24[0],setPhone=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),bvnhash=_useState26[0],setBvnhash=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),pob=_useState28[0],setPob=_useState28[1];var _useState29=useState(null),_useState30=_slicedToArray(_useState29,2),rank=_useState30[0],setRank=_useState30[1];var _useState31=useState(null),_useState32=_slicedToArray(_useState31,2),genotype=_useState32[0],setGenotype=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),branchId=_useState34[0],setBranchId=_useState34[1];var _useState35=useState(null),_useState36=_slicedToArray(_useState35,2),bloodGroup=_useState36[0],setBloodGroup=_useState36[1];var _useState37=useState(null),_useState38=_slicedToArray(_useState37,2),securityNumber=_useState38[0],setSecurityNumber=_useState38[1];var _useState39=useState(null),_useState40=_slicedToArray(_useState39,2),nhisNumber=_useState40[0],setNhisNumber=_useState40[1];var _useState41=useState(null),_useState42=_slicedToArray(_useState41,2),gender=_useState42[0],setGender=_useState42[1];var searchParams=new URLSearchParams(search);var id=searchParams.get(\"id\");var token=getAccessToken();useEffect(function(){validateToken(token,history,jwt_decode,auth,notify);},[auth,history,token]);useEffect(function(){var handleGetCustomerDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;handleChangeLoading(\"loadPage\",true);_context.next=4;return getCustomerDetails(id);case 4:response=_context.sent;_context.next=7;return getBranches();case 7:result=_context.sent;if(!(response.data&&response.data.status)){_context.next=13;break;}setCustomerDetail(response.data.data);setBranch(result.data);handleChangeLoading(\"loadPage\",false);return _context.abrupt(\"return\");case 13:console.log(response);_context.next=21;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.log(_context.t0);handleChangeLoading(\"loadPage\",false);return _context.abrupt(\"return\");case 21:handleChangeLoading(\"loadPage\",false);case 22:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return function handleGetCustomerDetails(){return _ref.apply(this,arguments);};}();handleGetCustomerDetails();},[]);useEffect(function(){branch&&branch.forEach(function(option){if(parseInt(customerDetail.branch)===option.id){setBranchName(option.name);}});},[]);var handleChangeLoading=function handleChangeLoading(name,value){return setLoading(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var handleNavigateToCustomerDetails=function handleNavigateToCustomerDetails(){history.push(\"/pages/helpDesk\");return;};var editHideDob=function editHideDob(){setHideDob(true);};var editHideBranch=function editHideBranch(){setHideBranch(true);};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var payload,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();handleChangeLoading(\"submit\",true);_context2.prev=2;payload={email:email,firstname:firstname,middlename:middlename,lastname:lastname,phone:phone,bvnhash:bvnhash,dob:selecedDate,pob:pob,branch:!isNaN(branchId)?parseInt(branchId):null,gender:gender?gender.toUpperCase():null,rank:rank,genotype:genotype,blood_group:bloodGroup,security_number:securityNumber,nhis_number:Number(nhisNumber)};_context2.next=6;return editCustomerInfo(id,payload);case 6:response=_context2.sent;console.log(response);if(!response.error){_context2.next=12;break;}notify(response.message,\"error\");handleChangeLoading(\"submit\",false);return _context2.abrupt(\"return\");case 12:console.log(e,payload);notify(response.message,\"success\");handleChangeLoading(\"submit\",false);setTimeout(function(){handleNavigateToCustomerDetails();},2500);return _context2.abrupt(\"return\");case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](2);notify(\"Something went wrong\",\"success\");handleChangeLoading(\"submit\",false);return _context2.abrupt(\"return\");case 24:case\"end\":return _context2.stop();}}},_callee2,null,[[2,19]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleNavigateToCustomerDetails();},className:\"btn btn-primary back-btn\",children:/*#__PURE__*/_jsx(ArrowRightShort,{})}),\"Customer Details\"]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"small-admin-details\",children:[/*#__PURE__*/_jsx(\"img\",{src:face,alt:\"\"}),adminName||\"NPF Admin\",/*#__PURE__*/_jsx(\"i\",{className:\"arrow down\"})]})})]}),isLoading.loadPage?/*#__PURE__*/_jsx(\"div\",{className:\"searching-block\",children:/*#__PURE__*/_jsx(\"div\",{className:\"svg-holder\",children:/*#__PURE__*/_jsx(SpinnerIcon,{className:\"rotating\"})})}):/*#__PURE__*/_jsx(\"main\",{className:\"loan-inprocess-page\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"customer-details row animated fadeIn delay-05s\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-side col-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"img-holder\",children:/*#__PURE__*/_jsx(\"img\",{src:customerDetail.photo_location||placeholderImg,alt:\"customer-img\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"loan-details col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"details-header\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"First Name:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Middle Name:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Last Name:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Email:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"BVN:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Phone Number:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Gender:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Date of Birth:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Place of Birth:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Rank:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Branch:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Genotype:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Blood Group:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"Security Number:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:\"NHIS Number:\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personal-details col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"details-header\",children:\"Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstname\",id:\"firstname\",className:\"form-control\",defaultValue:customerDetail.firstname,onChange:function onChange(e){return setFirstname(e.target.value);},value:firstname})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"middlename\",id:\"middlename\",className:\"form-control\",defaultValue:customerDetail.middlename,onChange:function onChange(e){return setMiddlename(e.target.value);},value:middlename})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastname\",id:\"lastname\",className:\"form-control\",defaultValue:customerDetail.lastname,onChange:function onChange(e){return setLastname(e.target.value);},value:lastname})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",className:\"form-control\",defaultValue:customerDetail.email,onChange:function onChange(e){setEmail(e.target.value);},value:email})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"bvnhash\",name:\"bvnhash\",id:\"bvnhash\",className:\"form-control\",defaultValue:customerDetail.bvnhash,onChange:function onChange(e){setBvnhash(e.target.value);},value:bvnhash})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",id:\"phone\",className:\"form-control\",defaultValue:customerDetail.phone,onChange:function onChange(e){return setPhone(e.target.value);},value:phone})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"gender\",id:\"gender\",className:\"form-control\",defaultValue:customerDetail.gender,onChange:function onChange(e){return setGender(e.target.value);},value:gender})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:!hideDob?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dob\",id:\"dob\",className:\"form-control\",defaultValue:moment(customerDetail.dob).format(\"DD/MM/YYYY\"),onFocus:editHideDob}):/*#__PURE__*/_jsx(DatePicker,{selected:selecedDate//   value={values.start_date}\n,onChange:function onChange(date){return setSelectDate(date);},name:\"start_date\",dateFormat:\"dd/MM/yyyy\",placeholderText:\"Select Date\",className:\"start_date form-control\",peekNextMonth:true,showMonthDropdown:true,showYearDropdown:true,dropdownMode:\"select\",locale:\"en-GB\",isClearable:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"pob\",id:\"pob\",className:\"form-control\",defaultValue:customerDetail.pob,onChange:function onChange(e){return setPob(e.target.value);},value:pob})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"rank\",id:\"rank\",className:\"form-control\",defaultValue:customerDetail.rank,onChange:function onChange(e){return setRank(e.target.value);},value:rank})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:!hideBranch?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"branch\",id:\"branch\",className:\"form-control\",defaultValue:branchName,onFocus:editHideBranch}):/*#__PURE__*/_jsx(\"select\",{name:\"branch\",class:\"btn dropdown-toggle\",style:{border:\"1px solid #ccc\",outline:\"none\",borderRadius:\"10px\",fontSize:\"14px\",padding:\"0.8em 1em\",width:\"100%\",fontWeight:\"600\"},value:branchId,onChange:function onChange(e){setBranchId(e.target.value);},children:branch&&branch.map(function(option,idx){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"option\",{value:option.id,children:option.name},idx+option.code)});})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"genotype\",id:\"genotype\",className:\"form-control\",defaultValue:customerDetail.genotype,onChange:function onChange(e){return setGenotype(e.target.value);},value:genotype})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"blood_group\",id:\"blood_group\",className:\"form-control\",defaultValue:customerDetail.blood_group,onChange:function onChange(e){return setBloodGroup(e.target.value);},value:bloodGroup})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"security_number\",id:\"security_number\",className:\"form-control\",defaultValue:customerDetail.security_number,onChange:function onChange(e){return setSecurityNumber(e.target.value);},value:securityNumber})}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"nhis_number\",id:\"nhis_number\",className:\"form-control\",defaultValue:customerDetail.nhis_number,onChange:function onChange(e){return setNhisNumber(e.target.value);},value:nhisNumber})}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn export-ifrs-btn mt-3\",children:[\"Save Changes\",/*#__PURE__*/_jsx(\"span\",{className:\"pl-2\",children:isLoading.submit?/*#__PURE__*/_jsx(SpinnerIcon,{className:\"limit-loading rotating\"}):/*#__PURE__*/_jsx(ArrowRightCircle,{})})]})]})]})})]});}export default CustomerDetails;","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/helpDesk/customerDetails.js"],"names":["React","useCallback","useState","useEffect","useHistory","useLocation","useRouteMatch","useParams","jwt_decode","moment","DatePicker","getAccessToken","getAdminName","useAuth","errorHandler","validateToken","face","notify","placeholderImg","editCustomerInfo","getAdminProfileDetails","getAdminRoles","getCustomerDetails","updateAdminProfile","getBranches","getRoles","CustomerDetails","history","location","path","auth","search","adminName","userFull","submit","rejectApplication","approveApplication","printApplication","loadPage","isLoading","setLoading","customerDetail","setCustomerDetail","selecedDate","setSelectDate","hideDob","setHideDob","hideBranch","setHideBranch","branch","setBranch","branchName","setBranchName","firstname","setFirstname","lastname","setLastname","middlename","setMiddlename","email","setEmail","phone","setPhone","bvnhash","setBvnhash","pob","setPob","rank","setRank","genotype","setGenotype","branchId","setBranchId","bloodGroup","setBloodGroup","securityNumber","setSecurityNumber","nhisNumber","setNhisNumber","gender","setGender","searchParams","URLSearchParams","id","get","token","handleGetCustomerDetails","handleChangeLoading","response","result","data","status","console","log","forEach","option","parseInt","name","value","prev","handleNavigateToCustomerDetails","push","editHideDob","editHideBranch","handleSubmit","e","preventDefault","payload","dob","isNaN","toUpperCase","blood_group","security_number","nhis_number","Number","error","message","setTimeout","photo_location","target","format","date","border","outline","borderRadius","fontSize","padding","width","fontWeight","map","idx","code"],"mappings":"u5BAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,QAA7B,CAAuCC,SAAvC,KAAwD,OAAxD,CACA,OACEC,UADF,CAEEC,WAFF,CAGEC,aAHF,CAIEC,SAJF,KAKO,kBALP,CAMA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CACA,MAAO,4CAAP,C,oeAKA,OAASC,cAAT,CAAyBC,YAAzB,KAA6C,iCAA7C,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,YAAP,EAAuBC,aAAvB,KAA4C,0BAA5C,CACA,MAAOC,CAAAA,IAAP,KAAiB,sCAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,sCAA3B,CACA,OACEC,gBADF,CAEEC,sBAFF,CAGEC,aAHF,CAIEC,kBAJF,CAKEC,kBALF,KAMO,6BANP,CAOA,OAASC,WAAT,CAAsBC,QAAtB,KAAsC,4BAAtC,CAEA,QAASC,CAAAA,eAAT,EAA2B,CACzB,GAAMC,CAAAA,OAAO,CAAGvB,UAAU,EAA1B,CACA,GAAMwB,CAAAA,QAAQ,CAAGvB,WAAW,EAA5B,CAFyB,mBAGRC,aAAa,EAHL,CAGjBuB,IAHiB,gBAGjBA,IAHiB,CAIzB,GAAMC,CAAAA,IAAI,CAAGjB,OAAO,EAApB,CAJyB,GAKjBkB,CAAAA,MALiB,CAKNH,QALM,CAKjBG,MALiB,CAMzB,GAAMC,CAAAA,SAAS,CAAGpB,YAAY,EAA9B,CANyB,cAOOV,QAAQ,CAAC,CACvC+B,QAAQ,CAAE,KAD6B,CAEvCC,MAAM,CAAE,KAF+B,CAGvCC,iBAAiB,CAAE,KAHoB,CAIvCC,kBAAkB,CAAE,KAJmB,CAKvCC,gBAAgB,CAAE,KALqB,CAMvCC,QAAQ,CAAE,KAN6B,CAAD,CAPf,wCAOlBC,SAPkB,eAOPC,UAPO,8BAemBtC,QAAQ,CAAC,EAAD,CAf3B,yCAelBuC,cAfkB,eAeFC,iBAfE,8BAgBYxC,QAAQ,CAAC,IAAD,CAhBpB,yCAgBlByC,WAhBkB,eAgBLC,aAhBK,8BAiBK1C,QAAQ,CAAC,KAAD,CAjBb,yCAiBlB2C,OAjBkB,eAiBTC,UAjBS,8BAkBW5C,QAAQ,CAAC,KAAD,CAlBnB,0CAkBlB6C,UAlBkB,gBAkBNC,aAlBM,gCAmBG9C,QAAQ,CAAC,EAAD,CAnBX,2CAmBlB+C,MAnBkB,gBAmBVC,SAnBU,gCAoBWhD,QAAQ,CAAC,EAAD,CApBnB,2CAoBlBiD,UApBkB,gBAoBNC,aApBM,gCAqBSlD,QAAQ,CAAC,IAAD,CArBjB,2CAqBlBmD,SArBkB,gBAqBPC,YArBO,gCAsBOpD,QAAQ,CAAC,IAAD,CAtBf,2CAsBlBqD,QAtBkB,gBAsBRC,WAtBQ,gCAuBWtD,QAAQ,CAAC,IAAD,CAvBnB,2CAuBlBuD,UAvBkB,gBAuBNC,aAvBM,gCAwBCxD,QAAQ,CAAC,IAAD,CAxBT,2CAwBlByD,KAxBkB,gBAwBXC,QAxBW,gCAyBC1D,QAAQ,CAAC,IAAD,CAzBT,2CAyBlB2D,KAzBkB,gBAyBXC,QAzBW,gCA0BK5D,QAAQ,CAAC,IAAD,CA1Bb,2CA0BlB6D,OA1BkB,gBA0BTC,UA1BS,gCA2BH9D,QAAQ,CAAC,IAAD,CA3BL,2CA2BlB+D,GA3BkB,gBA2BbC,MA3Ba,gCA4BDhE,QAAQ,CAAC,IAAD,CA5BP,2CA4BlBiE,IA5BkB,gBA4BZC,OA5BY,gCA6BOlE,QAAQ,CAAC,IAAD,CA7Bf,2CA6BlBmE,QA7BkB,gBA6BRC,WA7BQ,gCA8BOpE,QAAQ,CAAC,EAAD,CA9Bf,2CA8BlBqE,QA9BkB,gBA8BRC,WA9BQ,gCA+BWtE,QAAQ,CAAC,IAAD,CA/BnB,2CA+BlBuE,UA/BkB,gBA+BNC,aA/BM,gCAgCmBxE,QAAQ,CAAC,IAAD,CAhC3B,2CAgClByE,cAhCkB,gBAgCFC,iBAhCE,gCAiCW1E,QAAQ,CAAC,IAAD,CAjCnB,2CAiClB2E,UAjCkB,gBAiCNC,aAjCM,gCAkCG5E,QAAQ,CAAC,IAAD,CAlCX,2CAkClB6E,MAlCkB,gBAkCVC,SAlCU,gBAoCzB,GAAMC,CAAAA,YAAY,CAAG,GAAIC,CAAAA,eAAJ,CAAoBnD,MAApB,CAArB,CACA,GAAMoD,CAAAA,EAAE,CAAGF,YAAY,CAACG,GAAb,CAAiB,IAAjB,CAAX,CAEA,GAAMC,CAAAA,KAAK,CAAG1E,cAAc,EAA5B,CAEAR,SAAS,CAAC,UAAM,CACdY,aAAa,CAACsE,KAAD,CAAQ1D,OAAR,CAAiBnB,UAAjB,CAA6BsB,IAA7B,CAAmCb,MAAnC,CAAb,CACD,CAFQ,CAEN,CAACa,IAAD,CAAOH,OAAP,CAAgB0D,KAAhB,CAFM,CAAT,CAIAlF,SAAS,CAAC,UAAM,CACd,GAAMmF,CAAAA,wBAAwB,0FAAG,uKAE7BC,mBAAmB,CAAC,UAAD,CAAa,IAAb,CAAnB,CAF6B,sBAGNjE,CAAAA,kBAAkB,CAAC6D,EAAD,CAHZ,QAGvBK,QAHuB,qCAIRhE,CAAAA,WAAW,EAJH,QAIvBiE,MAJuB,oBAMzBD,QAAQ,CAACE,IAAT,EAAiBF,QAAQ,CAACE,IAAT,CAAcC,MANN,2BAO3BjD,iBAAiB,CAAC8C,QAAQ,CAACE,IAAT,CAAcA,IAAf,CAAjB,CACAxC,SAAS,CAACuC,MAAM,CAACC,IAAR,CAAT,CACAH,mBAAmB,CAAC,UAAD,CAAa,KAAb,CAAnB,CAT2B,yCAa7BK,OAAO,CAACC,GAAR,CAAYL,QAAZ,EAb6B,iFAe7BI,OAAO,CAACC,GAAR,cACAN,mBAAmB,CAAC,UAAD,CAAa,KAAb,CAAnB,CAhB6B,yCAmB/BA,mBAAmB,CAAC,UAAD,CAAa,KAAb,CAAnB,CAnB+B,qEAAH,kBAAxBD,CAAAA,wBAAwB,0CAA9B,CAqBAA,wBAAwB,GACzB,CAvBQ,CAuBN,EAvBM,CAAT,CAyBAnF,SAAS,CAAC,UAAM,CACd8C,MAAM,EACJA,MAAM,CAAC6C,OAAP,CAAe,SAACC,MAAD,CAAY,CACzB,GAAIC,QAAQ,CAACvD,cAAc,CAACQ,MAAhB,CAAR,GAAoC8C,MAAM,CAACZ,EAA/C,CAAmD,CACjD/B,aAAa,CAAC2C,MAAM,CAACE,IAAR,CAAb,CACD,CACF,CAJD,CADF,CAMD,CAPQ,CAON,EAPM,CAAT,CASA,GAAMV,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACU,IAAD,CAAOC,KAAP,QAC1B1D,CAAAA,UAAU,CAAC,SAAC2D,IAAD,wCACNA,IADM,wBAERF,IAFQ,CAEDC,KAFC,IAAD,CADgB,EAA5B,CAMA,GAAME,CAAAA,+BAA+B,CAAG,QAAlCA,CAAAA,+BAAkC,EAAM,CAC5CzE,OAAO,CAAC0E,IAAR,oBACA,OACD,CAHD,CAKA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBxD,UAAU,CAAC,IAAD,CAAV,CACD,CAFD,CAIA,GAAMyD,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BvD,aAAa,CAAC,IAAD,CAAb,CACD,CAFD,CAIA,GAAMwD,CAAAA,YAAY,2FAAG,kBAAOC,CAAP,2IACnBA,CAAC,CAACC,cAAF,GACAnB,mBAAmB,CAAC,QAAD,CAAW,IAAX,CAAnB,CAFmB,iBAKXoB,OALW,CAKD,CACdhD,KAAK,CAALA,KADc,CAEdN,SAAS,CAATA,SAFc,CAGdI,UAAU,CAAVA,UAHc,CAIdF,QAAQ,CAARA,QAJc,CAKdM,KAAK,CAALA,KALc,CAMdE,OAAO,CAAPA,OANc,CAOd6C,GAAG,CAAEjE,WAPS,CAQdsB,GAAG,CAAHA,GARc,CASdhB,MAAM,CAAE,CAAC4D,KAAK,CAACtC,QAAD,CAAN,CAAmByB,QAAQ,CAACzB,QAAD,CAA3B,CAAwC,IATlC,CAUdQ,MAAM,CAAEA,MAAM,CAAGA,MAAM,CAAC+B,WAAP,EAAH,CAA0B,IAV1B,CAWd3C,IAAI,CAAJA,IAXc,CAYdE,QAAQ,CAARA,QAZc,CAad0C,WAAW,CAAEtC,UAbC,CAcduC,eAAe,CAAErC,cAdH,CAedsC,WAAW,CAAEC,MAAM,CAACrC,UAAD,CAfL,CALC,wBAuBM1D,CAAAA,gBAAgB,CAACgE,EAAD,CAAKwB,OAAL,CAvBtB,QAuBXnB,QAvBW,gBAyBjBI,OAAO,CAACC,GAAR,CAAYL,QAAZ,EAzBiB,IA2BbA,QAAQ,CAAC2B,KA3BI,2BA4BflG,MAAM,CAACuE,QAAQ,CAAC4B,OAAV,CAAmB,OAAnB,CAAN,CACA7B,mBAAmB,CAAC,QAAD,CAAW,KAAX,CAAnB,CA7Be,0CAgCjBK,OAAO,CAACC,GAAR,CAAYY,CAAZ,CAAeE,OAAf,EACA1F,MAAM,CAACuE,QAAQ,CAAC4B,OAAV,CAAmB,SAAnB,CAAN,CACA7B,mBAAmB,CAAC,QAAD,CAAW,KAAX,CAAnB,CACA8B,UAAU,CAAC,UAAM,CACfjB,+BAA+B,GAChC,CAFS,CAEP,IAFO,CAAV,CAnCiB,+FAwCjBnF,MAAM,CAAC,sBAAD,CAAyB,SAAzB,CAAN,CACAsE,mBAAmB,CAAC,QAAD,CAAW,KAAX,CAAnB,CAzCiB,yGAAH,kBAAZiB,CAAAA,YAAY,6CAAlB,CA8CA,mBACE,wCACE,uCACE,kCACE,mCACE,eACE,OAAO,CAAE,yBAAMJ,CAAAA,+BAA+B,EAArC,EADX,CAEE,SAAS,CAAC,0BAFZ,uBAIE,KAAC,eAAD,IAJF,EADF,sBADF,EADF,cAYE,kCACE,aAAK,SAAS,CAAC,qBAAf,wBACE,YAAK,GAAG,CAAEpF,IAAV,CAAgB,GAAG,CAAC,EAApB,EADF,CAEGgB,SAAS,aAFZ,cAGE,UAAG,SAAS,CAAC,YAAb,EAHF,GADF,EAZF,GADF,CA0CGO,SAAS,CAACD,QAAV,cACC,YAAK,SAAS,CAAC,iBAAf,uBACE,YAAK,SAAS,CAAC,YAAf,uBACE,KAAC,WAAD,EAAa,SAAS,CAAC,UAAvB,EADF,EADF,EADD,cAOC,aAAM,SAAS,CAAC,qBAAhB,uBACE,cACE,QAAQ,CAAEkE,YADZ,CAEE,SAAS,CAAC,gDAFZ,wBAIE,YAAK,SAAS,CAAC,iBAAf,uBACE,YAAK,SAAS,CAAC,YAAf,uBACE,YACE,GAAG,CAAE/D,cAAc,CAAC6E,cAAf,EAAiCpG,cADxC,CAEE,GAAG,CAAC,cAFN,EADF,EADF,EAJF,cAYE,aAAK,SAAS,CAAC,kBAAf,wBACE,YAAK,SAAS,CAAC,gBAAf,sBADF,cAEE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,yBADF,EAFF,cAKE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,0BADF,EALF,cAQE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,wBADF,EARF,cAWE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,oBADF,EAXF,cAcE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,kBADF,EAdF,cAiBE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,2BADF,EAjBF,cAoBE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,qBADF,EApBF,cAuBE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,4BADF,EAvBF,cA0BE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,6BADF,EA1BF,cA6BE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,mBADF,EA7BF,cAgCE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,qBADF,EAhCF,cAmCE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,uBADF,EAnCF,cAsCE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,0BADF,EAtCF,cA0CE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,8BADF,EA1CF,cA6CE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,0BADF,EA7CF,GAZF,cA6DE,aAAK,SAAS,CAAC,sBAAf,wBACE,YAAK,SAAS,CAAC,gBAAf,qBADF,cAEE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,WAFP,CAGE,EAAE,CAAC,WAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEuB,cAAc,CAACY,SAL/B,CAME,QAAQ,CAAE,kBAACoD,CAAD,QAAOnD,CAAAA,YAAY,CAACmD,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAnB,EANZ,CAOE,KAAK,CAAE7C,SAPT,EADF,EAFF,cAaE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,YAFP,CAGE,EAAE,CAAC,YAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEZ,cAAc,CAACgB,UAL/B,CAME,QAAQ,CAAE,kBAACgD,CAAD,QAAO/C,CAAAA,aAAa,CAAC+C,CAAC,CAACc,MAAF,CAASrB,KAAV,CAApB,EANZ,CAOE,KAAK,CAAEzC,UAPT,EADF,EAbF,cAwBE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,UAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEhB,cAAc,CAACc,QAL/B,CAME,QAAQ,CAAE,kBAACkD,CAAD,QAAOjD,CAAAA,WAAW,CAACiD,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAlB,EANZ,CAOE,KAAK,CAAE3C,QAPT,EADF,EAxBF,cAmCE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,OAFP,CAGE,EAAE,CAAC,OAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEd,cAAc,CAACkB,KAL/B,CAME,QAAQ,CAAE,kBAAC8C,CAAD,CAAO,CACf7C,QAAQ,CAAC6C,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAR,CACD,CARH,CASE,KAAK,CAAEvC,KATT,EADF,EAnCF,cAgDE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,SADP,CAEE,IAAI,CAAC,SAFP,CAGE,EAAE,CAAC,SAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAElB,cAAc,CAACsB,OAL/B,CAME,QAAQ,CAAE,kBAAC0C,CAAD,CAAO,CACfzC,UAAU,CAACyC,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAV,CACD,CARH,CASE,KAAK,CAAEnC,OATT,EADF,EAhDF,cA6DE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,OAFP,CAGE,EAAE,CAAC,OAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEtB,cAAc,CAACoB,KAL/B,CAME,QAAQ,CAAE,kBAAC4C,CAAD,QAAO3C,CAAAA,QAAQ,CAAC2C,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAf,EANZ,CAOE,KAAK,CAAErC,KAPT,EADF,EA7DF,cAwEE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,QAFP,CAGE,EAAE,CAAC,QAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEpB,cAAc,CAACsC,MAL/B,CAME,QAAQ,CAAE,kBAAC0B,CAAD,QAAOzB,CAAAA,SAAS,CAACyB,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAhB,EANZ,CAOE,KAAK,CAAEnB,MAPT,EADF,EAxEF,cAmFE,YAAK,SAAS,CAAC,WAAf,UACG,CAAClC,OAAD,cACC,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,KAFP,CAGE,EAAE,CAAC,KAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEpC,MAAM,CAACgC,cAAc,CAACmE,GAAhB,CAAN,CAA2BY,MAA3B,CACZ,YADY,CALhB,CAQE,OAAO,CAAElB,WARX,EADD,cAYC,KAAC,UAAD,EACE,QAAQ,CAAE3D,WACV;AAFF,CAGE,QAAQ,CAAE,kBAAC8E,IAAD,QAAU7E,CAAAA,aAAa,CAAC6E,IAAD,CAAvB,EAHZ,CAIE,IAAI,CAAC,YAJP,CAKE,UAAU,CAAC,YALb,CAME,eAAe,CAAC,aANlB,CAOE,SAAS,CAAC,yBAPZ,CAQE,aAAa,KARf,CASE,iBAAiB,KATnB,CAUE,gBAAgB,KAVlB,CAWE,YAAY,CAAC,QAXf,CAYE,MAAM,CAAC,OAZT,CAaE,WAAW,KAbb,EAbJ,EAnFF,cAiHE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,KAFP,CAGE,EAAE,CAAC,KAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEhF,cAAc,CAACwB,GAL/B,CAME,QAAQ,CAAE,kBAACwC,CAAD,QAAOvC,CAAAA,MAAM,CAACuC,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAb,EANZ,CAOE,KAAK,CAAEjC,GAPT,EADF,EAjHF,cA6HE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,MAFP,CAGE,EAAE,CAAC,MAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAExB,cAAc,CAAC0B,IAL/B,CAME,QAAQ,CAAE,kBAACsC,CAAD,QAAOrC,CAAAA,OAAO,CAACqC,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAd,EANZ,CAOE,KAAK,CAAE/B,IAPT,EADF,EA7HF,cAyIE,YAAK,SAAS,CAAC,WAAf,UACG,CAACpB,UAAD,cACC,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,QAFP,CAGE,EAAE,CAAC,QAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEI,UALhB,CAME,OAAO,CAAEoD,cANX,EADD,cAUC,eACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,qBAFR,CAGE,KAAK,CAAE,CACLmB,MAAM,CAAE,gBADH,CAELC,OAAO,CAAE,MAFJ,CAGLC,YAAY,CAAE,MAHT,CAILC,QAAQ,CAAE,MAJL,CAKLC,OAAO,CAAE,WALJ,CAMLC,KAAK,CAAE,MANF,CAOLC,UAAU,CAAE,KAPP,CAHT,CAYE,KAAK,CAAEzD,QAZT,CAaE,QAAQ,CAAE,kBAACkC,CAAD,CAAO,CACfjC,WAAW,CAACiC,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAX,CACD,CAfH,UAiBGjD,MAAM,EACLA,MAAM,CAACgF,GAAP,CAAW,SAAClC,MAAD,CAASmC,GAAT,qBACT,sCACE,eAAgC,KAAK,CAAEnC,MAAM,CAACZ,EAA9C,UACGY,MAAM,CAACE,IADV,EAAaiC,GAAG,CAAGnC,MAAM,CAACoC,IAA1B,CADF,EADS,EAAX,CAlBJ,EAXJ,EAzIF,cAiLE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,UAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAE1F,cAAc,CAAC4B,QAL/B,CAME,QAAQ,CAAE,kBAACoC,CAAD,QAAOnC,CAAAA,WAAW,CAACmC,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAlB,EANZ,CAOE,KAAK,CAAE7B,QAPT,EADF,EAjLF,cA6LE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,aAFP,CAGE,EAAE,CAAC,aAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAE5B,cAAc,CAACsE,WAL/B,CAME,QAAQ,CAAE,kBAACN,CAAD,QAAO/B,CAAAA,aAAa,CAAC+B,CAAC,CAACc,MAAF,CAASrB,KAAV,CAApB,EANZ,CAOE,KAAK,CAAEzB,UAPT,EADF,EA7LF,cAyME,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,iBAFP,CAGE,EAAE,CAAC,iBAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAEhC,cAAc,CAACuE,eAL/B,CAME,QAAQ,CAAE,kBAACP,CAAD,QAAO7B,CAAAA,iBAAiB,CAAC6B,CAAC,CAACc,MAAF,CAASrB,KAAV,CAAxB,EANZ,CAOE,KAAK,CAAEvB,cAPT,EADF,EAzMF,cAqNE,YAAK,SAAS,CAAC,WAAf,uBACE,cACE,IAAI,CAAC,QADP,CAEE,IAAI,CAAC,aAFP,CAGE,EAAE,CAAC,aAHL,CAIE,SAAS,CAAC,cAJZ,CAKE,YAAY,CAAElC,cAAc,CAACwE,WAL/B,CAME,QAAQ,CAAE,kBAACR,CAAD,QAAO3B,CAAAA,aAAa,CAAC2B,CAAC,CAACc,MAAF,CAASrB,KAAV,CAApB,EANZ,CAOE,KAAK,CAAErB,UAPT,EADF,EArNF,cAiOE,gBAAQ,SAAS,CAAC,0BAAlB,uCAEE,aAAM,SAAS,CAAC,MAAhB,UACGtC,SAAS,CAACL,MAAV,cACC,KAAC,WAAD,EAAa,SAAS,CAAC,wBAAvB,EADD,cAGC,KAAC,gBAAD,IAJJ,EAFF,GAjOF,GA7DF,GADF,EAjDJ,GADF,CAiWD,CAED,cAAeR,CAAAA,eAAf","sourcesContent":["import React, { useCallback, useState, useEffect } from \"react\";\nimport {\n  useHistory,\n  useLocation,\n  useRouteMatch,\n  useParams,\n} from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport moment from \"moment\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { ReactComponent as ArrowRightCircle } from \"../../assets/icons/arrow-right-circle.svg\";\nimport { ReactComponent as ArrowRightShort } from \"../../assets/icons/arrow-right-short.svg\";\nimport { ReactComponent as TimesCircleFill } from \"../../assets/icons/times-circle-fill.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../../assets/icons/spinner.svg\";\nimport { getAccessToken, getAdminName } from \"../../utils/localStorageService\";\nimport { useAuth } from \"../../components/utilities\";\nimport errorHandler, { validateToken } from \"../../utils/errorHandler\";\nimport face from \"../../assets/img/placeholder-img.png\";\nimport notify from \"../../utils/notification\";\nimport placeholderImg from \"../../assets/img/placeholder-img.png\";\nimport {\n  editCustomerInfo,\n  getAdminProfileDetails,\n  getAdminRoles,\n  getCustomerDetails,\n  updateAdminProfile,\n} from \"../../services/adminService\";\nimport { getBranches, getRoles } from \"../../services/loanService\";\n\nfunction CustomerDetails() {\n  const history = useHistory();\n  const location = useLocation();\n  const { path } = useRouteMatch();\n  const auth = useAuth();\n  const { search } = location;\n  const adminName = getAdminName();\n  const [isLoading, setLoading] = useState({\n    userFull: false,\n    submit: false,\n    rejectApplication: false,\n    approveApplication: false,\n    printApplication: false,\n    loadPage: false,\n  });\n  const [customerDetail, setCustomerDetail] = useState({});\n  const [selecedDate, setSelectDate] = useState(null);\n  const [hideDob, setHideDob] = useState(false);\n  const [hideBranch, setHideBranch] = useState(false);\n  const [branch, setBranch] = useState([]);\n  const [branchName, setBranchName] = useState(\"\");\n  const [firstname, setFirstname] = useState(null);\n  const [lastname, setLastname] = useState(null);\n  const [middlename, setMiddlename] = useState(null);\n  const [email, setEmail] = useState(null);\n  const [phone, setPhone] = useState(null);\n  const [bvnhash, setBvnhash] = useState(null);\n  const [pob, setPob] = useState(null);\n  const [rank, setRank] = useState(null);\n  const [genotype, setGenotype] = useState(null);\n  const [branchId, setBranchId] = useState(\"\");\n  const [bloodGroup, setBloodGroup] = useState(null);\n  const [securityNumber, setSecurityNumber] = useState(null);\n  const [nhisNumber, setNhisNumber] = useState(null);\n  const [gender, setGender] = useState(null);\n\n  const searchParams = new URLSearchParams(search);\n  const id = searchParams.get(\"id\");\n\n  const token = getAccessToken();\n\n  useEffect(() => {\n    validateToken(token, history, jwt_decode, auth, notify);\n  }, [auth, history, token]);\n\n  useEffect(() => {\n    const handleGetCustomerDetails = async () => {\n      try {\n        handleChangeLoading(\"loadPage\", true);\n        const response = await getCustomerDetails(id);\n        const result = await getBranches();\n\n        if (response.data && response.data.status) {\n          setCustomerDetail(response.data.data);\n          setBranch(result.data);\n          handleChangeLoading(\"loadPage\", false);\n          return;\n        }\n\n        console.log(response);\n      } catch (error) {\n        console.log(error);\n        handleChangeLoading(\"loadPage\", false);\n        return;\n      }\n      handleChangeLoading(\"loadPage\", false);\n    };\n    handleGetCustomerDetails();\n  }, []);\n\n  useEffect(() => {\n    branch &&\n      branch.forEach((option) => {\n        if (parseInt(customerDetail.branch) === option.id) {\n          setBranchName(option.name);\n        }\n      });\n  }, []);\n\n  const handleChangeLoading = (name, value) =>\n    setLoading((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n\n  const handleNavigateToCustomerDetails = () => {\n    history.push(`/pages/helpDesk`);\n    return;\n  };\n\n  const editHideDob = () => {\n    setHideDob(true);\n  };\n\n  const editHideBranch = () => {\n    setHideBranch(true);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    handleChangeLoading(\"submit\", true);\n\n    try {\n      const payload = {\n        email,\n        firstname,\n        middlename,\n        lastname,\n        phone,\n        bvnhash,\n        dob: selecedDate,\n        pob,\n        branch: !isNaN(branchId) ? parseInt(branchId) : null,\n        gender: gender ? gender.toUpperCase() : null,\n        rank,\n        genotype,\n        blood_group: bloodGroup,\n        security_number: securityNumber,\n        nhis_number: Number(nhisNumber),\n      };\n\n      const response = await editCustomerInfo(id, payload);\n\n      console.log(response);\n\n      if (response.error) {\n        notify(response.message, \"error\");\n        handleChangeLoading(\"submit\", false);\n        return;\n      }\n      console.log(e, payload);\n      notify(response.message, \"success\");\n      handleChangeLoading(\"submit\", false);\n      setTimeout(() => {\n        handleNavigateToCustomerDetails();\n      }, 2500);\n      return;\n    } catch (error) {\n      notify(\"Something went wrong\", \"success\");\n      handleChangeLoading(\"submit\", false);\n      return;\n    }\n  };\n\n  return (\n    <>\n      <header>\n        <div>\n          <h1>\n            <button\n              onClick={() => handleNavigateToCustomerDetails()}\n              className=\"btn btn-primary back-btn\"\n            >\n              <ArrowRightShort />\n            </button>\n            Customer Details\n          </h1>\n        </div>\n        <div>\n          <div className=\"small-admin-details\">\n            <img src={face} alt=\"\" />\n            {adminName || `NPF Admin`}\n            <i className=\"arrow down\"></i>\n          </div>\n          {/* <div className=\"some-container\">\n            <button\n              // disabled={\n              //   adminWorkFlowLevel >= loan.loanApp.workFlowLevel ? false : true\n              // }\n              className={`btn reject-loan-btn ${\n                isLoading.rejectApplication ? \"loading disabled\" : \"\"\n              }`}\n            //   onClick={checkDeleteModal}\n            >\n              {isLoading.rejectApplication ? (\n                <SpinnerIcon className=\"rotating\" />\n              ) : (\n                <>\n                  <TimesCircleFill /> Delete Profile\n                </>\n              )}\n            </button>\n            {handleDeleteModal()}\n          </div> */}\n        </div>\n      </header>\n\n      {isLoading.loadPage ? (\n        <div className=\"searching-block\">\n          <div className=\"svg-holder\">\n            <SpinnerIcon className=\"rotating\" />\n          </div>\n        </div>\n      ) : (\n        <main className=\"loan-inprocess-page\">\n          <form\n            onSubmit={handleSubmit}\n            className=\"customer-details row animated fadeIn delay-05s\"\n          >\n            <div className=\"left-side col-3\">\n              <div className=\"img-holder\">\n                <img\n                  src={customerDetail.photo_location || placeholderImg}\n                  alt=\"customer-img\"\n                />\n              </div>\n            </div>\n            <div className=\"loan-details col\">\n              <div className=\"details-header\">Customer</div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">First Name:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Middle Name:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Last Name:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Email:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">BVN:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Phone Number:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Gender:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Date of Birth:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Place of Birth:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Rank:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Branch:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Genotype:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Blood Group:</div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">Security Number:</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 mb-3\">NHIS Number:</div>\n              </div>\n            </div>\n            <div className=\"personal-details col\">\n              <div className=\"details-header\">Details</div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"firstname\"\n                  id=\"firstname\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.firstname}\n                  onChange={(e) => setFirstname(e.target.value)}\n                  value={firstname}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"middlename\"\n                  id=\"middlename\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.middlename}\n                  onChange={(e) => setMiddlename(e.target.value)}\n                  value={middlename}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"lastname\"\n                  id=\"lastname\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.lastname}\n                  onChange={(e) => setLastname(e.target.value)}\n                  value={lastname}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  id=\"email\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.email}\n                  onChange={(e) => {\n                    setEmail(e.target.value);\n                  }}\n                  value={email}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"bvnhash\"\n                  name=\"bvnhash\"\n                  id=\"bvnhash\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.bvnhash}\n                  onChange={(e) => {\n                    setBvnhash(e.target.value);\n                  }}\n                  value={bvnhash}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"phone\"\n                  id=\"phone\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.phone}\n                  onChange={(e) => setPhone(e.target.value)}\n                  value={phone}\n                />\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"gender\"\n                  id=\"gender\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.gender}\n                  onChange={(e) => setGender(e.target.value)}\n                  value={gender}\n                />\n              </div>\n              <div className=\"row col-9\">\n                {!hideDob ? (\n                  <input\n                    type=\"text\"\n                    name=\"dob\"\n                    id=\"dob\"\n                    className=\"form-control\"\n                    defaultValue={moment(customerDetail.dob).format(\n                      \"DD/MM/YYYY\"\n                    )}\n                    onFocus={editHideDob}\n                  />\n                ) : (\n                  <DatePicker\n                    selected={selecedDate}\n                    //   value={values.start_date}\n                    onChange={(date) => setSelectDate(date)}\n                    name=\"start_date\"\n                    dateFormat=\"dd/MM/yyyy\"\n                    placeholderText=\"Select Date\"\n                    className=\"start_date form-control\"\n                    peekNextMonth\n                    showMonthDropdown\n                    showYearDropdown\n                    dropdownMode=\"select\"\n                    locale=\"en-GB\"\n                    isClearable\n                  />\n                )}\n              </div>\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"pob\"\n                  id=\"pob\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.pob}\n                  onChange={(e) => setPob(e.target.value)}\n                  value={pob}\n                />\n              </div>\n\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"rank\"\n                  id=\"rank\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.rank}\n                  onChange={(e) => setRank(e.target.value)}\n                  value={rank}\n                />\n              </div>\n\n              <div className=\"row col-9\">\n                {!hideBranch ? (\n                  <input\n                    type=\"text\"\n                    name=\"branch\"\n                    id=\"branch\"\n                    className=\"form-control\"\n                    defaultValue={branchName}\n                    onFocus={editHideBranch}\n                  />\n                ) : (\n                  <select\n                    name=\"branch\"\n                    class=\"btn dropdown-toggle\"\n                    style={{\n                      border: \"1px solid #ccc\",\n                      outline: \"none\",\n                      borderRadius: \"10px\",\n                      fontSize: \"14px\",\n                      padding: \"0.8em 1em\",\n                      width: \"100%\",\n                      fontWeight: \"600\",\n                    }}\n                    value={branchId}\n                    onChange={(e) => {\n                      setBranchId(e.target.value);\n                    }}\n                  >\n                    {branch &&\n                      branch.map((option, idx) => (\n                        <>\n                          <option key={idx + option.code} value={option.id}>\n                            {option.name}\n                          </option>\n                        </>\n                      ))}\n                  </select>\n                )}\n              </div>\n\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"genotype\"\n                  id=\"genotype\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.genotype}\n                  onChange={(e) => setGenotype(e.target.value)}\n                  value={genotype}\n                />\n              </div>\n\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"blood_group\"\n                  id=\"blood_group\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.blood_group}\n                  onChange={(e) => setBloodGroup(e.target.value)}\n                  value={bloodGroup}\n                />\n              </div>\n\n              <div className=\"row col-9\">\n                <input\n                  type=\"text\"\n                  name=\"security_number\"\n                  id=\"security_number\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.security_number}\n                  onChange={(e) => setSecurityNumber(e.target.value)}\n                  value={securityNumber}\n                />\n              </div>\n\n              <div className=\"row col-9\">\n                <input\n                  type=\"number\"\n                  name=\"nhis_number\"\n                  id=\"nhis_number\"\n                  className=\"form-control\"\n                  defaultValue={customerDetail.nhis_number}\n                  onChange={(e) => setNhisNumber(e.target.value)}\n                  value={nhisNumber}\n                />\n              </div>\n\n              <button className=\"btn export-ifrs-btn mt-3\">\n                Save Changes\n                <span className=\"pl-2\">\n                  {isLoading.submit ? (\n                    <SpinnerIcon className=\"limit-loading rotating\" />\n                  ) : (\n                    <ArrowRightCircle />\n                  )}\n                </span>\n              </button>\n            </div>\n          </form>\n        </main>\n      )}\n    </>\n  );\n}\n\nexport default CustomerDetails;\n"]},"metadata":{},"sourceType":"module"}