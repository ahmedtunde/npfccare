{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/xerde2/Downloads/npf-admin-web/src/components/helpDesk/allCustomers.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState, useEffect } from \"react\";\nimport { useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport ReactPaginate from \"react-paginate\";\nimport { ReactComponent as ArrowRightCircle } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/arrow-right-circle.svg\";\nimport { ReactComponent as ArrowLeftShortCircleFill } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/arrow-left-short-circle-fill.svg\";\nimport { ReactComponent as SearchIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/search.svg\";\nimport { ReactComponent as SpinnerIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/spinner.svg\";\nimport { getAccessToken, getAdminName } from \"../../utils/localStorageService\";\nimport { useAuth } from \"../../components/utilities\";\nimport errorHandler, { validateToken } from \"../../utils/errorHandler\";\nimport face from \"../../assets/img/placeholder-img.png\";\nimport CustomerCard from \"./customerCard\";\nimport notify from \"../../utils/notification\";\nimport { handlePagination, limit } from \"../../utils/constant\";\nimport { getCustomersInfo, searchCustomerDetails } from \"../../services/adminService\";\n\nconst AllCustomers = () => {\n  _s();\n\n  const history = useHistory();\n  const location = useLocation();\n  const adminName = getAdminName();\n  const auth = useAuth();\n  const {\n    path\n  } = useRouteMatch();\n  const token = getAccessToken();\n  const handleError = useCallback((errorObject, notify, cb) => errorHandler(auth)(errorObject, notify, cb), [auth]);\n  const [showSection, setShowSection] = useState(\"all\");\n  const [customersInfo, setCustomersInfo] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [searchEmail, setSearchEmail] = useState(\"\");\n  const [isLoading, setLoading] = useState({\n    userFull: false,\n    submit: false,\n    rejectApplication: false,\n    approveApplication: false,\n    printApplication: false,\n    loadPage: false\n  });\n  useEffect(() => {\n    validateToken(token, history, jwt_decode, auth, notify);\n  }, [auth, history, token]);\n\n  const handleChangeLoading = (name, value) => setLoading(prev => ({ ...prev,\n    [name]: value\n  }));\n\n  useEffect(() => {\n    const getCustomers = async () => {\n      try {\n        handleChangeLoading(\"loadPage\", true);\n        const response = await getCustomersInfo(1, limit);\n        console.log(response);\n\n        if (response.data.status) {\n          setTotalPages(response.data.totalPages - 1);\n          setCustomersInfo(response.data.data);\n          handleChangeLoading(\"loadPage\", false);\n          return;\n        }\n\n        handleChangeLoading(\"loadPage\", false);\n        notify(\"Something went wrong\", \"error\");\n        return;\n      } catch (error) {\n        console.log(error);\n        handleChangeLoading(\"loadPage\", false);\n        return;\n      }\n    };\n\n    getCustomers();\n  }, []);\n\n  const handleSearch = async e => {\n    try {\n      e.preventDefault();\n      handleChangeLoading(\"loadPage\", true);\n      const response = await searchCustomerDetails(searchEmail);\n      console.log(response.data.data, searchEmail);\n\n      if (response.error) {\n        notify(response.message, \"error\");\n        handleChangeLoading(\"loadPage\", false);\n        return;\n      }\n\n      if (response.data.status) {\n        setCustomersInfo([response.data.data]);\n        handleChangeLoading(\"loadPage\", false);\n        return;\n      } else {\n        handleChangeLoading(\"loadPage\", false);\n        notify(\"Something went wrong\", \"error\");\n        return;\n      }\n    } catch (error) {\n      notify(\"Invalid email address\", \"success\");\n      handleChangeLoading(\"loadPage\", false);\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Customer Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: showSection === \"all\" ? \"active\" : \"\",\n            onClick: e => setShowSection(\"all\"),\n            children: \"Customer Overview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"small-admin-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: face,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), adminName || `NPF Admin`, /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"arrow down\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"some-container\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSearch,\n            className: \"search-div\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"search\",\n              children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"search\",\n              className: \"form-control\",\n              name: \"search\",\n              id: \"search\",\n              \"aria-label\": \"Search by email\",\n              placeholder: \"Search by email\",\n              value: searchEmail,\n              onChange: e => setSearchEmail(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), isLoading.loadPage === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"searching-block\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"svg-holder\",\n        children: /*#__PURE__*/_jsxDEV(SpinnerIcon, {\n          className: \"rotating\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"loan-inprocess-page\",\n      children: showSection === \"all\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(CustomerCard, {\n          path: path,\n          customersInfo: customersInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }, this), customersInfo.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"paginate-footer\",\n          children: /*#__PURE__*/_jsxDEV(ReactPaginate, {\n            pageCount: totalPages,\n            marginPagesDisplayed: 2,\n            pageRangeDisplayed: 3 //   forcePage={currentPage - 5}\n            ,\n            onPageChange: data => handlePagination(data, setCustomersInfo, getCustomersInfo),\n            containerClassName: \"pagination-btns\",\n            activeLinkClassName: \"active\",\n            pageLinkClassName: \"btn\",\n            previousLabel: /*#__PURE__*/_jsxDEV(ArrowLeftShortCircleFill, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 36\n            }, this),\n            previousLinkClassName: \"btn icon\",\n            nextLabel: /*#__PURE__*/_jsxDEV(ArrowLeftShortCircleFill, {\n              style: {\n                transform: \"rotateY(180deg)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 23\n            }, this),\n            nextLinkClassName: \"btn icon\",\n            disabledClassName: \"disabled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(AllCustomers, \"UDeEvraVZfOkwO8O6Fz5szZOmrQ=\", false, function () {\n  return [useHistory, useLocation, useAuth, useRouteMatch];\n});\n\n_c = AllCustomers;\nexport default AllCustomers;\n\nvar _c;\n\n$RefreshReg$(_c, \"AllCustomers\");","map":{"version":3,"sources":["/Users/xerde2/Downloads/npf-admin-web/src/components/helpDesk/allCustomers.js"],"names":["React","useCallback","useState","useEffect","useHistory","useLocation","useRouteMatch","jwt_decode","ReactPaginate","getAccessToken","getAdminName","useAuth","errorHandler","validateToken","face","CustomerCard","notify","handlePagination","limit","getCustomersInfo","searchCustomerDetails","AllCustomers","history","location","adminName","auth","path","token","handleError","errorObject","cb","showSection","setShowSection","customersInfo","setCustomersInfo","totalPages","setTotalPages","searchEmail","setSearchEmail","isLoading","setLoading","userFull","submit","rejectApplication","approveApplication","printApplication","loadPage","handleChangeLoading","name","value","prev","getCustomers","response","console","log","data","status","error","handleSearch","e","preventDefault","message","target","length","transform"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,SAASC,UAAT,EAAqBC,WAArB,EAAkCC,aAAlC,QAAuD,kBAAvD;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,aAAP,MAA0B,gBAA1B;;;;;AAKA,SAASC,cAAT,EAAyBC,YAAzB,QAA6C,iCAA7C;AACA,SAASC,OAAT,QAAwB,4BAAxB;AACA,OAAOC,YAAP,IAAuBC,aAAvB,QAA4C,0BAA5C;AACA,OAAOC,IAAP,MAAiB,sCAAjB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,gBAAT,EAA2BC,KAA3B,QAAwC,sBAAxC;AACA,SACEC,gBADF,EAEEC,qBAFF,QAGO,6BAHP;;AAKA,MAAMC,YAAY,GAAG,MAAM;AAAA;;AACzB,QAAMC,OAAO,GAAGlB,UAAU,EAA1B;AACA,QAAMmB,QAAQ,GAAGlB,WAAW,EAA5B;AACA,QAAMmB,SAAS,GAAGd,YAAY,EAA9B;AACA,QAAMe,IAAI,GAAGd,OAAO,EAApB;AACA,QAAM;AAAEe,IAAAA;AAAF,MAAWpB,aAAa,EAA9B;AACA,QAAMqB,KAAK,GAAGlB,cAAc,EAA5B;AAEA,QAAMmB,WAAW,GAAG3B,WAAW,CAC7B,CAAC4B,WAAD,EAAcb,MAAd,EAAsBc,EAAtB,KAA6BlB,YAAY,CAACa,IAAD,CAAZ,CAAmBI,WAAnB,EAAgCb,MAAhC,EAAwCc,EAAxC,CADA,EAE7B,CAACL,IAAD,CAF6B,CAA/B;AAKA,QAAM,CAACM,WAAD,EAAcC,cAAd,IAAgC9B,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAAC+B,aAAD,EAAgBC,gBAAhB,IAAoChC,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACiC,UAAD,EAAaC,aAAb,IAA8BlC,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACmC,WAAD,EAAcC,cAAd,IAAgCpC,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACqC,SAAD,EAAYC,UAAZ,IAA0BtC,QAAQ,CAAC;AACvCuC,IAAAA,QAAQ,EAAE,KAD6B;AAEvCC,IAAAA,MAAM,EAAE,KAF+B;AAGvCC,IAAAA,iBAAiB,EAAE,KAHoB;AAIvCC,IAAAA,kBAAkB,EAAE,KAJmB;AAKvCC,IAAAA,gBAAgB,EAAE,KALqB;AAMvCC,IAAAA,QAAQ,EAAE;AAN6B,GAAD,CAAxC;AASA3C,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,aAAa,CAACc,KAAD,EAAQL,OAAR,EAAiBf,UAAjB,EAA6BkB,IAA7B,EAAmCT,MAAnC,CAAb;AACD,GAFQ,EAEN,CAACS,IAAD,EAAOH,OAAP,EAAgBK,KAAhB,CAFM,CAAT;;AAIA,QAAMoB,mBAAmB,GAAG,CAACC,IAAD,EAAOC,KAAP,KAC1BT,UAAU,CAAEU,IAAD,KAAW,EACpB,GAAGA,IADiB;AAEpB,KAACF,IAAD,GAAQC;AAFY,GAAX,CAAD,CADZ;;AAMA9C,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgD,YAAY,GAAG,YAAY;AAC/B,UAAI;AACFJ,QAAAA,mBAAmB,CAAC,UAAD,EAAa,IAAb,CAAnB;AAEA,cAAMK,QAAQ,GAAG,MAAMjC,gBAAgB,CAAC,CAAD,EAAID,KAAJ,CAAvC;AAEAmC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AAEA,YAAIA,QAAQ,CAACG,IAAT,CAAcC,MAAlB,EAA0B;AACxBpB,UAAAA,aAAa,CAACgB,QAAQ,CAACG,IAAT,CAAcpB,UAAd,GAA2B,CAA5B,CAAb;AACAD,UAAAA,gBAAgB,CAACkB,QAAQ,CAACG,IAAT,CAAcA,IAAf,CAAhB;AACAR,UAAAA,mBAAmB,CAAC,UAAD,EAAa,KAAb,CAAnB;AACA;AACD;;AACDA,QAAAA,mBAAmB,CAAC,UAAD,EAAa,KAAb,CAAnB;AACA/B,QAAAA,MAAM,CAAC,sBAAD,EAAyB,OAAzB,CAAN;AACA;AACD,OAhBD,CAgBE,OAAOyC,KAAP,EAAc;AACdJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ;AACAV,QAAAA,mBAAmB,CAAC,UAAD,EAAa,KAAb,CAAnB;AACA;AACD;AACF,KAtBD;;AAuBAI,IAAAA,YAAY;AACb,GAzBQ,EAyBN,EAzBM,CAAT;;AA2BA,QAAMO,YAAY,GAAG,MAAOC,CAAP,IAAa;AAChC,QAAI;AACFA,MAAAA,CAAC,CAACC,cAAF;AACAb,MAAAA,mBAAmB,CAAC,UAAD,EAAa,IAAb,CAAnB;AAEA,YAAMK,QAAQ,GAAG,MAAMhC,qBAAqB,CAACiB,WAAD,CAA5C;AAEAgB,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,CAAcA,IAA1B,EAAgClB,WAAhC;;AAEA,UAAIe,QAAQ,CAACK,KAAb,EAAoB;AAClBzC,QAAAA,MAAM,CAACoC,QAAQ,CAACS,OAAV,EAAmB,OAAnB,CAAN;AACAd,QAAAA,mBAAmB,CAAC,UAAD,EAAa,KAAb,CAAnB;AACA;AACD;;AAED,UAAIK,QAAQ,CAACG,IAAT,CAAcC,MAAlB,EAA0B;AACxBtB,QAAAA,gBAAgB,CAAC,CAACkB,QAAQ,CAACG,IAAT,CAAcA,IAAf,CAAD,CAAhB;AACAR,QAAAA,mBAAmB,CAAC,UAAD,EAAa,KAAb,CAAnB;AACA;AACD,OAJD,MAIO;AACLA,QAAAA,mBAAmB,CAAC,UAAD,EAAa,KAAb,CAAnB;AACA/B,QAAAA,MAAM,CAAC,sBAAD,EAAyB,OAAzB,CAAN;AACA;AACD;AACF,KAvBD,CAuBE,OAAOyC,KAAP,EAAc;AACdzC,MAAAA,MAAM,CAAC,uBAAD,EAA0B,SAA1B,CAAN;AACA+B,MAAAA,mBAAmB,CAAC,UAAD,EAAa,KAAb,CAAnB;AACA;AACD;AACF,GA7BD;;AA+BA,sBACE;AAAA,4BACE;AAAA,8BACE;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAUE;AAAA,iCAEE;AACE,YAAA,SAAS,EAAEhB,WAAW,KAAK,KAAhB,GAAwB,QAAxB,GAAmC,EADhD;AAEE,YAAA,OAAO,EAAG4B,CAAD,IAAO3B,cAAc,CAAC,KAAD,CAFhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,gBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAyCE;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,qBAAf;AAAA,kCACE;AAAK,YAAA,GAAG,EAAElB,IAAV;AAAgB,YAAA,GAAG,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA,kBADF,EAEGU,SAAS,IAAK,WAFjB,eAGE;AAAG,YAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAME;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,iCACE;AAAM,YAAA,QAAQ,EAAEkC,YAAhB;AAA8B,YAAA,SAAS,EAAC,YAAxC;AAAA,oCACE;AAAO,cAAA,OAAO,EAAC,QAAf;AAAA,qCACE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE;AACE,cAAA,IAAI,EAAC,QADP;AAEE,cAAA,SAAS,EAAC,cAFZ;AAGE,cAAA,IAAI,EAAC,QAHP;AAIE,cAAA,EAAE,EAAC,QAJL;AAKE,4BAAW,iBALb;AAME,cAAA,WAAW,EAAC,iBANd;AAOE,cAAA,KAAK,EAAErB,WAPT;AAQE,cAAA,QAAQ,EAAGsB,CAAD,IAAOrB,cAAc,CAACqB,CAAC,CAACG,MAAF,CAASb,KAAV;AARjC;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBANF;AAAA;AAAA;AAAA;AAAA;AAAA,cAzCF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAoEGV,SAAS,CAACO,QAAV,KAAuB,IAAvB,gBACC;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA,+BACE,QAAC,WAAD;AAAa,UAAA,SAAS,EAAC;AAAvB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADD,gBAOC;AAAM,MAAA,SAAS,EAAC,qBAAhB;AAAA,gBACGf,WAAW,KAAK,KAAhB,iBACC;AAAA,gCACE,QAAC,YAAD;AAAc,UAAA,IAAI,EAAEL,IAApB;AAA0B,UAAA,aAAa,EAAEO;AAAzC;AAAA;AAAA;AAAA;AAAA,gBADF,EAEGA,aAAa,CAAC8B,MAAd,GAAuB,CAAvB,iBACC;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,iCACE,QAAC,aAAD;AACE,YAAA,SAAS,EAAE5B,UADb;AAEE,YAAA,oBAAoB,EAAE,CAFxB;AAGE,YAAA,kBAAkB,EAAE,CAHtB,CAIE;AAJF;AAKE,YAAA,YAAY,EAAGoB,IAAD,IACZtC,gBAAgB,CAACsC,IAAD,EAAOrB,gBAAP,EAAyBf,gBAAzB,CANpB;AAQE,YAAA,kBAAkB,EAAC,iBARrB;AASE,YAAA,mBAAmB,EAAC,QATtB;AAUE,YAAA,iBAAiB,EAAC,KAVpB;AAWE,YAAA,aAAa,eAAE,QAAC,wBAAD;AAAA;AAAA;AAAA;AAAA,oBAXjB;AAYE,YAAA,qBAAqB,EAAC,UAZxB;AAaE,YAAA,SAAS,eACP,QAAC,wBAAD;AACE,cAAA,KAAK,EAAE;AAAE6C,gBAAAA,SAAS,EAAE;AAAb;AADT;AAAA;AAAA;AAAA;AAAA,oBAdJ;AAkBE,YAAA,iBAAiB,EAAC,UAlBpB;AAmBE,YAAA,iBAAiB,EAAC;AAnBpB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAHJ;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,YA3EJ;AAAA,kBADF;AA+GD,CA7MD;;GAAM3C,Y;UACYjB,U,EACCC,W,EAEJM,O,EACIL,a;;;KALbe,Y;AA+MN,eAAeA,YAAf","sourcesContent":["import React, { useCallback, useState, useEffect } from \"react\";\nimport { useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport ReactPaginate from \"react-paginate\";\nimport { ReactComponent as ArrowRightCircle } from \"../../assets/icons/arrow-right-circle.svg\";\nimport { ReactComponent as ArrowLeftShortCircleFill } from \"../../assets/icons/arrow-left-short-circle-fill.svg\";\nimport { ReactComponent as SearchIcon } from \"../../assets/icons/search.svg\";\nimport { ReactComponent as SpinnerIcon } from \"../../assets/icons/spinner.svg\";\nimport { getAccessToken, getAdminName } from \"../../utils/localStorageService\";\nimport { useAuth } from \"../../components/utilities\";\nimport errorHandler, { validateToken } from \"../../utils/errorHandler\";\nimport face from \"../../assets/img/placeholder-img.png\";\nimport CustomerCard from \"./customerCard\";\nimport notify from \"../../utils/notification\";\nimport { handlePagination, limit } from \"../../utils/constant\";\nimport {\n  getCustomersInfo,\n  searchCustomerDetails,\n} from \"../../services/adminService\";\n\nconst AllCustomers = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const adminName = getAdminName();\n  const auth = useAuth();\n  const { path } = useRouteMatch();\n  const token = getAccessToken();\n\n  const handleError = useCallback(\n    (errorObject, notify, cb) => errorHandler(auth)(errorObject, notify, cb),\n    [auth]\n  );\n\n  const [showSection, setShowSection] = useState(\"all\");\n  const [customersInfo, setCustomersInfo] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [searchEmail, setSearchEmail] = useState(\"\");\n  const [isLoading, setLoading] = useState({\n    userFull: false,\n    submit: false,\n    rejectApplication: false,\n    approveApplication: false,\n    printApplication: false,\n    loadPage: false,\n  });\n\n  useEffect(() => {\n    validateToken(token, history, jwt_decode, auth, notify);\n  }, [auth, history, token]);\n\n  const handleChangeLoading = (name, value) =>\n    setLoading((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n\n  useEffect(() => {\n    const getCustomers = async () => {\n      try {\n        handleChangeLoading(\"loadPage\", true);\n\n        const response = await getCustomersInfo(1, limit);\n\n        console.log(response);\n\n        if (response.data.status) {\n          setTotalPages(response.data.totalPages - 1);\n          setCustomersInfo(response.data.data);\n          handleChangeLoading(\"loadPage\", false);\n          return;\n        }\n        handleChangeLoading(\"loadPage\", false);\n        notify(\"Something went wrong\", \"error\");\n        return;\n      } catch (error) {\n        console.log(error);\n        handleChangeLoading(\"loadPage\", false);\n        return;\n      }\n    };\n    getCustomers();\n  }, []);\n\n  const handleSearch = async (e) => {\n    try {\n      e.preventDefault();\n      handleChangeLoading(\"loadPage\", true);\n\n      const response = await searchCustomerDetails(searchEmail);\n\n      console.log(response.data.data, searchEmail);\n\n      if (response.error) {\n        notify(response.message, \"error\");\n        handleChangeLoading(\"loadPage\", false);\n        return;\n      }\n\n      if (response.data.status) {\n        setCustomersInfo([response.data.data]);\n        handleChangeLoading(\"loadPage\", false);\n        return;\n      } else {\n        handleChangeLoading(\"loadPage\", false);\n        notify(\"Something went wrong\", \"error\");\n        return;\n      }\n    } catch (error) {\n      notify(\"Invalid email address\", \"success\");\n      handleChangeLoading(\"loadPage\", false);\n      return;\n    }\n  };\n\n  return (\n    <>\n      <header>\n        <div>\n          <h1>\n            {/* <button\n              onClick={(e) => history.goBack()}\n              className=\"btn btn-primary back-btn\"\n            >\n              <ArrowRightShort />\n            </button> */}\n            Customer Management\n          </h1>\n          <nav>\n            {/* eslint-disable jsx-a11y/anchor-is-valid */}\n            <a\n              className={showSection === \"all\" ? \"active\" : \"\"}\n              onClick={(e) => setShowSection(\"all\")}\n            >\n              Customer Overview\n            </a>\n            {/* {\n              <a\n                className={showSection === \"create-admin\" ? \"active\" : \"\"}\n                onClick={(e) => {\n                  setShowSection(\"create-admin\");\n                }}\n              >\n                Create Admin\n              </a>\n            } */}\n            {/* <a\n              className={showSection === \"documents\" ? \"active\" : \"\"}\n              onClick={(e) => {\n                setShowSection(\"documents\");\n              }}\n            >\n              Documents\n            </a> */}\n            {/* eslint-enable */}\n          </nav>\n        </div>\n\n        <div>\n          <div className=\"small-admin-details\">\n            <img src={face} alt=\"\" />\n            {adminName || `NPF Admin`}\n            <i className=\"arrow down\"></i>\n          </div>\n          <div className=\"some-container\">\n            <form onSubmit={handleSearch} className=\"search-div\">\n              <label htmlFor=\"search\">\n                <SearchIcon />\n              </label>\n              <input\n                type=\"search\"\n                className=\"form-control\"\n                name=\"search\"\n                id=\"search\"\n                aria-label=\"Search by email\"\n                placeholder=\"Search by email\"\n                value={searchEmail}\n                onChange={(e) => setSearchEmail(e.target.value)}\n              />\n            </form>\n          </div>\n        </div>\n      </header>\n\n      {isLoading.loadPage === true ? (\n        <div className=\"searching-block\">\n          <div className=\"svg-holder\">\n            <SpinnerIcon className=\"rotating\" />\n          </div>\n        </div>\n      ) : (\n        <main className=\"loan-inprocess-page\">\n          {showSection === \"all\" && (\n            <>\n              <CustomerCard path={path} customersInfo={customersInfo} />\n              {customersInfo.length > 0 && (\n                <div className=\"paginate-footer\">\n                  <ReactPaginate\n                    pageCount={totalPages}\n                    marginPagesDisplayed={2}\n                    pageRangeDisplayed={3}\n                    //   forcePage={currentPage - 5}\n                    onPageChange={(data) =>\n                      handlePagination(data, setCustomersInfo, getCustomersInfo)\n                    }\n                    containerClassName=\"pagination-btns\"\n                    activeLinkClassName=\"active\"\n                    pageLinkClassName=\"btn\"\n                    previousLabel={<ArrowLeftShortCircleFill />}\n                    previousLinkClassName=\"btn icon\"\n                    nextLabel={\n                      <ArrowLeftShortCircleFill\n                        style={{ transform: \"rotateY(180deg)\" }}\n                      />\n                    }\n                    nextLinkClassName=\"btn icon\"\n                    disabledClassName=\"disabled\"\n                  />\n                </div>\n              )}\n            </>\n          )}\n        </main>\n      )}\n    </>\n  );\n};\n\nexport default AllCustomers;\n"]},"metadata":{},"sourceType":"module"}